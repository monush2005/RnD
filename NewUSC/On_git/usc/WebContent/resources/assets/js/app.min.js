"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}angular.module("selfcare",["ui.router","ngMaterial","material.components.expansionPanels","ngStorage","ngProgress","ngAnimate","ngMask","ngSanitize","ngMessages","duScroll","mwFormBuilder","mwFormViewer","mwFormUtils","monospaced.elastic","pascalprecht.translate"]),angular.element(document).ready(function(){angular.bootstrap(document,["selfcare"])}),function(e){function t(e,t,n,a,i,o,r,s,l){r.debugInfoEnabled(envVars.debugInfo),t.disableWarnings(),i.caseInsensitive(!0),a.html5Mode(!0),o.rules.otherwise("/dashboard/apps"),s.formatDate=function(e){return angular.isUndefined(e)?null:moment(e).format("DD MMMM YYYY")},s.parseDate=function(e){var t=moment(e,"D MMMM YYYY",!0);return t.isValid()||(t=moment(e,"D-M-YYYY",!0)),t.isValid()||(t=moment(e,"D MMM YYYY",!0)),t.isValid()?t.toDate():new Date(NaN)},e.theme("selfcare").primaryPalette("green"),n.configure({durationIndeterminate:1e3,strokeWidth:6}),l.useStaticFilesLoader({prefix:"resources/assets/static/",suffix:"/angular-surveys.json"}),l.preferredLanguage("en"),l.useSanitizeValueStrategy("sanitize")}e.config(t),t.$inject=["$mdThemingProvider","$mdAriaProvider","$mdProgressCircularProvider","$locationProvider","$urlMatcherFactoryProvider","$urlServiceProvider","$compileProvider","$mdDateLocaleProvider","$translateProvider"],Highcharts.setOptions({colors:["#40f0f0","#3F51B5","#89F14D","#9C27B0","#E91E63","#FFDD28","#CDDC39","#FB8C00","#26A69A","#00599D"],lang:{thousandsSep:","}})}(angular.module("selfcare")),function(e){function t(e){function t(n,a){var i=n.subStates;delete n.subStates,e.state(a,n),i&&_.each(i,t)}function n(e,t){var t=t.split(","),n=!1;return _.each(t,function(t){if(n)return!1;n=_.existsBy(e.userRights,t,"rightName")}),n}var a=["breadCrumbService",function(e){return e.pop()}],i=["breadCrumbService",function(e){e.pop(),e.pop()}],o={login:{url:"/login",component:"loginComponent",onEnter:["breadCrumbService",function(e){return e.reset()}]},selfcare:{component:"selfCareComponent",abstract:!0,subStates:{"selfcare.dashboard":{url:"/dashboard",redirectTo:"selfcare.dashboard.apps",subStates:{"selfcare.dashboard.apps":{url:"/apps",component:"dashboardAppsComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.dashboard.apps",name:"Dashboard"})}],onExit:a,subStates:{"selfcare.dashboard.apps.performance":{url:"/performance/:appid",component:"reportingComponent",onEnter:["breadCrumbService","$localStorage","appid",function(e,t,n){var a=t.userApps&&t.userApps[n];if(!a)return!1;e.push({state:"selfcare.dashboard.apps.performance",name:a.appname+" Performance"})}],onExit:a,resolve:{appid:["$transition$",function(e){return e.params().appid}],startDate:function(){return moment().subtract(1,"month").toDate()},endDate:function(){return moment().subtract(1,"day").toDate()}}}}},"selfcare.dashboard.services":{url:"/services",component:"dashboardServicesComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.dashboard.services",name:"Dashboard"})}],onExit:a,subStates:{"selfcare.dashboard.services.performance":{url:"/performance/:serviceid",component:"reportingComponent",onEnter:["breadCrumbService","$localStorage","serviceid",function(e,t,n){var a=t.userServices&&t.userServices[n];if(!a)return!1;e.push({state:"selfcare.dashboard.apps.performance({appid:"+a.appid+"})",name:a.app.appname}),e.push({state:"selfcare.dashboard.services.performance",name:a.servicename+" Performance"})}],onExit:i,resolve:{serviceid:["$transition$",function(e){return e.params().serviceid}],startDate:function(){return moment().subtract(1,"month").toDate()},endDate:function(){return moment().subtract(1,"day").toDate()}}}}},"selfcare.dashboard.app":{url:"/app/:appid",redirectTo:"selfcare.dashboard.app.home",onEnter:["breadCrumbService","$localStorage","appid",function(e,t,n){var a=t.userApps&&t.userApps[n];if(!a)return!1;e.push({state:"selfcare.dashboard.apps",name:"Dashboard"}),e.push({state:"selfcare.dashboard.app.home",name:a.appname})}],onExit:i,resolve:{appid:["$transition$",function(e){return e.params().appid}]},subStates:{"selfcare.dashboard.app.home":{url:"/home",component:"appHomeComponent"},"selfcare.dashboard.app.keywords":{url:"/keywords",component:"appKeywordComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"viewAppKeywords,editAppKeywords"))return!1;e.push({state:"selfcare.dashboard.app.keywords",name:"Keywords"})}],onExit:a},"selfcare.dashboard.app.queries":{url:"/queries",component:"userQueryComponent",params:{startDate:void 0,endDate:void 0,type:void 0},resolve:{startDate:["$transition$",function(e){return e.params().startDate}],endDate:["$transition$",function(e){return e.params().endDate}],type:["$transition$",function(e){return e.params().type}]},onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"viewQuery,takeQueryAction"))return!1;e.push({state:"selfcare.dashboard.app.queries",name:"User Complaints"})}],onExit:a},"selfcare.dashboard.app.categories":{url:"/categories",component:"appCategoryComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"viewAppCategory,editAppCategory"))return!1;e.push({state:"selfcare.dashboard.app.categories",name:"Category"})}],onExit:a},"selfcare.dashboard.app.ratings":{url:"/ratings",component:"ratingsComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.dashboard.app.ratings",name:"Ratings & Feedbacks"})}],onExit:a},"selfcare.dashboard.app.onOff":{url:"/onOff",component:"appServiceOnOffComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"onOffApp"))return!1;e.push({state:"selfcare.dashboard.app.onOff",name:"Activate/Deactivate"})}],onExit:a},"selfcare.dashboard.app.reportCard":{url:"/reportCard",component:"reportCardComponent",params:{startDate:function(){return moment().subtract(1,"month").toDate()},endDate:function(){return moment().subtract(1,"day").toDate()},selectedCard:void 0,dateRange:"month"},resolve:{startDate:["$transition$",function(e){return e.params().startDate}],endDate:["$transition$",function(e){return e.params().endDate}],selectedCard:["$transition$",function(e){return e.params().selectedCard}],dateRange:["$transition$",function(e){return e.params().dateRange}]},onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.dashboard.app.reportCard",name:"Report Card"})}],onExit:a},"selfcare.dashboard.app.appProfile":{url:"/appProfile",component:"appProfileComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.dashboard.app.appProfile",name:"Profile"})}],onExit:a}}},"selfcare.dashboard.service":{url:"/service/:serviceid",redirectTo:"selfcare.dashboard.service.home",onEnter:["breadCrumbService","$localStorage","serviceid",function(e,t,n){var a=t.userServices&&t.userServices[n];if(!a)return!1;e.push({state:"selfcare.dashboard.services",name:"Dashboard"}),e.push({state:"selfcare.dashboard.app({appid:"+a.appid+"})",name:a.app.appname}),e.push({state:"selfcare.dashboard.service.home",name:a.servicename})}],onExit:["breadCrumbService",function(e){e.pop(),e.pop(),e.pop()}],resolve:{serviceid:["$transition$",function(e){return e.params().serviceid}]},subStates:{"selfcare.dashboard.service.home":{url:"/home",component:"serviceHomeComponent"},"selfcare.dashboard.service.keywords":{url:"/keywords",component:"serviceKeywordComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"viewServiceKeywords,editServiceKeywords"))return!1;e.push({state:"selfcare.dashboard.service.keywords",name:"Keywords"})}],onExit:a},"selfcare.dashboard.service.reportCard":{url:"/reportCard",component:"reportCardComponent",params:{startDate:function(){return moment().subtract(1,"month").toDate()},endDate:function(){return moment().subtract(1,"day").toDate()},selectedCard:void 0,dateRange:"month"},resolve:{startDate:["$transition$",function(e){return e.params().startDate}],endDate:["$transition$",function(e){return e.params().endDate}],selectedCard:["$transition$",function(e){return e.params().selectedCard}],dateRange:["$transition$",function(e){return e.params().dateRange}]},onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.dashboard.service.reportCard",name:"Report Card"})}],onExit:a},"selfcare.dashboard.service.queries":{url:"/queries",component:"userQueryComponent",params:{startDate:void 0,endDate:void 0,type:void 0},resolve:{startDate:["$transition$",function(e){return e.params().startDate}],endDate:["$transition$",function(e){return e.params().endDate}],type:["$transition$",function(e){return e.params().type}]},onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"viewQuery,takeQueryAction"))return!1;e.push({state:"selfcare.dashboard.service.queries",name:"User Complaints"})}],onExit:a},"selfcare.dashboard.service.ratings":{url:"/ratings",component:"ratingsComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.dashboard.service.ratings",name:"Ratings & Feedbacks"})}],onExit:a},"selfcare.dashboard.service.onOff":{url:"/onOff",component:"appServiceOnOffComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){return!1}],onExit:a},"selfcare.dashboard.service.serviceProfile":{url:"/serviceProfile",component:"serviceProfileComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.dashboard.service.ratings",name:"Profile"})}],onExit:a}}}}},"selfcare.campaigns":{url:"/campaigns",redirectTo:"selfcare.campaigns.schedule",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"manageCampaigns"))return!1;e.push({state:"selfcare.campaigns",name:"Campaigns"})}],onExit:a,subStates:{"selfcare.campaigns.schedule":{url:"/schedule",component:"scheduleCampaignComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.campaigns.schedule",name:"Schedule"})}],onExit:a},"selfcare.campaigns.view":{url:"/view/:status",params:{status:{value:"scheduled",dynamic:!0}},component:"viewCampaignsComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.campaigns.view",name:"View"})}],onExit:a,resolve:{status:["$transition$",function(e){return e.params().status}]}}}},"selfcare.roles":{url:"/roles",redirectTo:"selfcare.roles.create",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"createUser"))return!1;e.push({state:"selfcare.roles",name:"Roles"})}],onExit:a,subStates:{"selfcare.roles.create":{url:"/create",component:"createRoleComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.roles.create",name:"Create"})}],onExit:a},"selfcare.roles.edit":{url:"/edit",component:"editRoleComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.roles.edit",name:"Edit"})}],onExit:a}}},"selfcare.banners":{url:"/banners",redirectTo:"selfcare.banners.upload",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"requestBanners,approveBanners"))return!1;e.push({state:"selfcare.banners",name:"Banners"})}],onExit:a,subStates:{"selfcare.banners.upload":{url:"/upload",component:"uploadBannerComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.banners.upload",name:"Upload"})}],onExit:a},"selfcare.banners.view":{url:"/view",component:"viewMyBannersComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.banners.view",name:"View"})}],onExit:a},"selfcare.banners.approve":{url:"/approve",component:"approveBannersComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"approveBanners"))return!1;e.push({state:"selfcare.banners.approve",name:"Approve"})}],onExit:a}}},"selfcare.users":{url:"/users",redirectTo:"selfcare.users.create",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"createUser,onboardingRequests"))return!1;e.push({state:"selfcare.users",name:"Manage Users"})}],onExit:a,subStates:{"selfcare.users.create":{url:"/create",component:"createUserComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.users.create",name:"Create"})}],onExit:a},"selfcare.users.edit":{url:"/edit",component:"editUsersComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.users.edit",name:"Edit"})}],onExit:a},"selfcare.users.tree":{url:"/tree",component:"editUsersComponent",resolve:{forTree:_.stubTrue},onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.users.tree",name:"Tree"})}],onExit:a},"selfcare.users.requests":{url:"/requests/:status",component:"manageRequestsComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"onboardingRequests"))return!1;e.push({state:"selfcare.users.requests",name:"Onboarding Requests"})}],onExit:a,params:{status:{value:"pending",dynamic:!0}},resolve:{status:["$transition$",function(e){return e.params().status}]}}}},"selfcare.myAccount":{url:"/myAccount",component:"profileDetailsComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.myAccount",name:"My Account"})}],onExit:a},"selfcare.createCategory":{url:"/appCategories",component:"createCategoryComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"createCategory"))return!1;e.push({state:"selfcare.createCategory",name:"App Categories"})}],onExit:a},"selfcare.ratingAndFeedback":{url:"/ratingAndFeedback",component:"ratingAndFeebacksComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"ratingsApp,ratingsDept"))return!1;e.push({state:"selfcare.ratingAndFeedback",name:"Rating & Feedback"})}],onExit:a},"selfcare.designApi":{url:"/designApi",component:"designApiComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"designApi"))return!1;e.push({state:"selfcare.designApi",name:"Design API"})}],onExit:a},"selfcare.umangFaq":{url:"/umangFaq",component:"umangFaqComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"manageAppFAQ"))return!1;e.push({state:"selfcare.umangFaq",name:"UMANG FAQ"})}],onExit:a},"selfcare.attention":{url:"/attentionScreen",redirectTo:"selfcare.attention.view",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"attentionScreen"))return!1;e.push({state:"selfcare.attention",name:"Attention Screen"})}],onExit:a,subStates:{"selfcare.attention.view":{url:"/view",component:"viewAttScreensComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.attention.view",name:"View"})}],onExit:a},"selfcare.attention.upload":{url:"/upload",component:"uploadAttScreenComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.attention.upload",name:"Upload"})}],onExit:a}}},"selfcare.directory":{url:"/directory",redirectTo:"selfcare.directory.view",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"directoryService"))return!1;e.push({state:"selfcare.directory",name:"Directory Service"})}],onExit:a,subStates:{"selfcare.directory.view":{url:"/view",component:"viewDirectoryComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.directory.view",name:"View"})}],onExit:a},"selfcare.directory.createNew":{url:"/createNew",component:"deptEditorComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.directory.createNew",name:"Create New Department"})}],onExit:a}}},"selfcare.analytics":{url:"/analytics/:currentComponent?startDate&endDate",component:"analyticsParentComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"analytics"))return!1;e.push({state:"selfcare.analytics",name:"Analytics"})}],params:{startDate:{dynamic:!0},endDate:{dynamic:!0},currentComponent:{value:"dashboard",dynamic:!0},status:{value:void 0}},resolve:{startDate:["$transition$",function(e){return e.params().startDate&&moment(e.params().startDate,"DD-MM-YYYY").toDate()}],endDate:["$transition$",function(e){return e.params().endDate&&moment(e.params().endDate,"DD-MM-YYYY").toDate()}],currentComponent:["$transition$",function(e){return e.params().currentComponent}],status:["$transition$",function(e){return e.params().status}]},onExit:a},"selfcare.questionnaire":{url:"/questionnaire",redirectTo:"selfcare.questionnaire.viewSubmissions",subStates:{"selfcare.questionnaire.fill":{url:"/fill",component:"fillQuestionnaireComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"fillQuestionaire"))return!1;e.push({state:"selfcare.questionnaire.fill",name:"Questionnaire"}),e.push({state:"selfcare.questionnaire.fill",name:"Fill"})}],onExit:i},"selfcare.questionnaire.build":{url:"/build",component:"buildQuestionnaireComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"viewQuestionaire"))return!1;e.push({state:"selfcare.questionnaire",name:"Questionnaire"}),e.push({state:"selfcare.questionnaire.build",name:"Build"})}],onExit:i},"selfcare.questionnaire.preview":{url:"/preview",component:"previewQuestionnaireComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"viewQuestionaire"))return!1;e.push({state:"selfcare.questionnaire",name:"Questionnaire"}),e.push({state:"selfcare.questionnaire.preview",name:"Preview"})}],onExit:i},"selfcare.questionnaire.viewSubmissions":{url:"/viewSubmissions",component:"viewQsnrSubmissionsComponent",onEnter:["breadCrumbService","$localStorage",function(e,t){if(!n(t,"viewQuestionaire"))return!1;e.push({state:"selfcare.questionnaire",name:"Questionnaire"}),e.push({state:"selfcare.questionnaire.viewSubmissions",name:"View Submissions"})}],onExit:i}}},"selfcare.messaging":{url:"/messaging",redirectTo:"selfcare.messaging.broadcasts",subStates:{"selfcare.messaging.broadcasts":{url:"/broadcasts",component:"broadcastComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.messaging.broadcasts",name:"Messaging"}),e.push({state:"selfcare.messaging.broadcasts",name:"Broadcasts"})}],onExit:i},"selfcare.messaging.directMessage":{url:"/direct",component:"directMessageComponent",onEnter:["breadCrumbService",function(e){e.push({state:"selfcare.messaging.directMessage",name:"Messaging"}),e.push({state:"selfcare.messaging.directMessage",name:"Direct Message"})}],onExit:i}}}}}};_.each(o,t)}e.config(t),t.$inject=["$stateProvider"]}(angular.module("selfcare")),function(e){function t(e){e.interceptors.push(n),e.defaults.withCredentials=!0}function n(e,t,n,a){return{request:function(e){return e},requestError:function(e){return e},response:function(e){return e},responseError:function(i){switch(i.status){case-1:"POST"==i.config.method&&a.get("customToastService").noConnection();break;case 403:i.config.url.indexOf("logout")<0&&a.get("customToastService").sessionTimeout(),t.$reset(),n.go("login");break;default:a.get("customToastService").freeText("Something went wrong!",void 0,!0)}return e.reject(null)}}}e.config(t),t.$inject=["$httpProvider"],n.$inject=["$q","$localStorage","$state","$injector"]}(angular.module("selfcare")),function(e){function t(e){var t;e.onBefore({to:"login"},function(e){if(e.injector().get("$localStorage").isLoggedIn>Date.now())return e.router.stateService.target("selfcare.dashboard.apps")}),e.onBefore({to:"selfcare.dashboard.apps"},function(e){var t=e.injector().get("$localStorage");if(t.userRole&&"guest"==t.userRole.logicalName.toLowerCase())return e.router.stateService.target("selfcare.questionnaire.fill")}),e.onBefore({to:"selfcare.**"},function(e){if(t){var n=t;return t=null,n}var a=e.injector().get("$localStorage");if(!a.isLoggedIn||a.isLoggedIn<Date.now())return a.$reset(),t=e.targetState(),t._params=e.params(),e.injector().get("customToastService").sessionTimeout(),e.router.stateService.target("login");a.isLoggedIn=Date.now()+envVars.serverTimeout}),e.onError({to:"selfcare.**"},function(e){3==e._error.type&&e.router.stateService.go("login")})}e.config(t),t.$inject=["$transitionsProvider"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o,r){a.setInstance(i.createInstance()),t.addEventListener("offline",function(){e.$apply(function(){n.noConnection(5e3)}),document.getElementById("selfcare-main-view").style.filter="grayscale(1)"},!1),t.addEventListener("online",function(){e.$apply(function(){n.backOnline()}),document.getElementById("selfcare-main-view").style.filter=""},!1),navigator.onLine||(n.noConnection(5e3),document.getElementById("selfcare-main-view").style.filter="grayscale(100)"),"serviceWorker"in navigator&&!envVars.debugInfo&&navigator.serviceWorker.register("sw.js",{scope:envVars.base+"/"}).then(function(e){"function"==typeof e.update&&e.update(),e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"==t.state&&navigator.serviceWorker.controller&&r.show(r.confirm({title:"New Update Available!",textContent:"A new version of UMANG SelfCare is available. Do you want to reload?",ok:"Yes",cancel:"No",clickOutsideToClose:!1})).then(function(){window.location.reload()})}},console.log("Service Worker registered successfully.")}).catch(function(e){console.log("Service Worker registration failed:",e)})}e.run(t),t.$inject=["$rootScope","$window","customToastService","ngProgressService","ngProgressFactory","commonDataService","$mdDialog"]}(angular.module("selfcare")),angular.module("selfcare").run(["$templateCache",function(e){e.put("resources/app/components/appCategoryComponent/appCategoryComponent.html",'<md-content class="right-content layout-padding" flex> <md-card> <div promise-loader="vm.getCatgoriesPromise" text="Loading Categories.."></div> <md-card-content promise-hider="vm.getCatgoriesPromise"> <div layout="column" layout-align-xs="" layout-xs="column" class="no-padding" layout-margin> <md-input-container flex="100" flex-xs="100" class="padding-b-10"> <h4 class="section-heading">Linked Categories</h4> <md-chips ng-model="vm.linkedCategories" readonly="true"> <md-chip-template layout> <strong flex-order="1" flex-order-gt-sm="0">{{$chip.categoryName}}</strong> <md-icon flex-order="0" flex-order-gt-sm="1" usc-right="editAppCategory" ng-class="{\'spin\': $chip.spinning}" class="cursor-pointer" ng-click="vm.unlinkCategory($chip)">close</md-icon> </md-chip-template> </md-chips> </md-input-container> <md-input-container flex="100" flex-xs="100" class="padding-b-10"> <h4 class="section-heading">Unlinked Categories</h4> <md-chips ng-model="vm.unlinkedCategories" readonly="true"> <md-chip-template layout> <strong flex-order="1" flex-order-gt-sm="0">{{$chip.categoryName}}</strong> <md-icon flex-order="0" flex-order-gt-sm="1" usc-right="editAppCategory" ng-class="{\'spin\': $chip.spinning}" class="cursor-pointer" ng-click="vm.linkCategory($chip)">add</md-icon> </md-chip-template> </md-chips> </md-input-container> </div> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/appKeywordComponent/appKeywordComponent.html",'<md-content class="right-content layout-padding"> <div class="no-padding"> <md-card flex="100"> <div layout="column" layout-align-xs="" layout-xs="column" class="no-padding margin-top-10"> <div layout="column" class="no-padding" layout-margin> <md-input-container flex="100" class="md-icon-float md-block"> <label>Language</label> <md-icon class="grey-icon">translate</md-icon> <md-select ng-model="vm.selectedLanguage" ng-change="vm.fetchKeywords(vm.fetchKeywordRequest)" name="language" md-select-search="true"> <md-option ng-value="languageObj" ng-repeat="languageObj in vm.languages">{{::languageObj.language}}</md-option> </md-select> </md-input-container> </div> <keyword-accordion-component class="no-margin" ng-if="vm.showAccordions" preopen="true" selected-language="vm.selectedLanguage" app="::vm.app"></keyword-accordion-component> <keyword-accordion-component ng-if="vm.showAccordions" usc-right="viewServiceKeywords,editServiceKeywords" class="no-margin" ng-class="::{\'keyword-accordion-border-bottom\': !$last}" selected-language="vm.selectedLanguage" service="::vm.getDetailedService(service)" ng-repeat="service in ::vm.app.services"></keyword-accordion-component> </div> </md-card> </div> </md-content>'),e.put("resources/app/components/appHomeComponent/appHomeComponent.html",'<md-content layout="row" layout-wrap> <div flex-gt-sm="20" flex="50" ng-repeat="tile in vm.tiles" ng-hide="::tile.hide" usc-right="{{::tile.right}}" ui-sref="{{::tile.state}}" class="cursor-pointer"> <md-card style="padding: 20px 0px" class="hoverable"> <div align="center"> <img class="md-card-image" style="height: 128px; width: 128px" ng-src="{{::tile.imageUrl}}"> </div> <md-card-footer layout="row" layout-align="center center"> <span md-truncate>{{::tile.text}}</span> </md-card-footer> </md-card> </div> <div flex="100" ui-sref="selfcare.dashboard.apps" align="center" layout-margin> <md-button class="md-raised custom-blue">Back</md-button> </div> </md-content>'),e.put("resources/app/components/appProfileComponent/appProfileComponent.html",'<md-content layout-padding> <md-card> <md-card-content> <div layout="column" class="no-margin" layout-padding> <div align="center"> <img src="{{vm.app.image}}"> <br> <md-button usc-right="editAppProfile" class="md-raised md-primary" ng-click="vm.editLogo()">Change</md-button> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>Live Since</label> <input readonly="readonly" ng-model="vm.app.liveDate"> </md-input-container> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>App Name</label> <input readonly="readonly" ng-model="vm.app.appname"> </md-input-container> <div usc-right="editAppProfile"> <md-button class="md-raised md-primary" ng-click="vm.requestChange(\'App Name\', vm.app.appname,100)">Request Change</md-button> </div> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>Short Description</label> <textarea readonly="readonly" ng-model="vm.app.shortdesc"></textarea> </md-input-container> <div usc-right="editAppProfile"> <md-button class="md-raised md-primary" ng-click="vm.requestChange(\'Short Description\', vm.app.shortdesc, 60)">Request Change</md-button> </div> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>Long Description</label> <textarea readonly="readonly" ng-model="vm.app.description"></textarea> </md-input-container> <div usc-right="editAppProfile"> <md-button class="md-raised md-primary" ng-click="vm.requestChange(\'Long Description\', vm.app.description, 200)">Request Change</md-button> </div> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>Helpline Numbers</label> <textarea readonly="readonly" ng-model="vm.app.contact"></textarea> </md-input-container> <div usc-right="editAppProfile"> <md-button class="md-raised md-primary" ng-click="vm.editHelpline()">Edit</md-button> </div> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>Email ID</label> <input readonly="readonly" ng-model="vm.app.email"> </md-input-container> <div usc-right="editAppProfile"> <md-button class="md-raised md-primary" ng-click="vm.editEmail()">Edit</md-button> </div> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>Working Hours</label> <input readonly="readonly" ng-model="vm.app.workinghours"> </md-input-container> <div usc-right="editAppProfile"> <md-button class="md-raised md-primary" ng-click="vm.editWorkingHours()">Edit</md-button> </div> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>Website URL</label> <input readonly="readonly" ng-model="vm.app.url"> </md-input-container> <div usc-right="editAppProfile"> <md-button class="md-raised md-primary" ng-click="vm.editWebsite()">Edit</md-button> </div> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>Latitude/Logitude</label> <input readonly="readonly" ng-init="vm.app.latlong=vm.app.lat+\', \'+vm.app.lon" ng-model="vm.app.latlong"> </md-input-container> <div usc-right="editAppProfile"> <md-button class="md-raised md-primary" ng-click="vm.editLatLong()">Edit</md-button> </div> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>Address</label> <textarea readonly="readonly" ng-model="vm.app.address"></textarea> </md-input-container> <div usc-right="editAppProfile"> <md-button class="md-raised md-primary" ng-click="vm.requestChange(\'Address\', vm.app.address)">Request Change</md-button> </div> </div> </div> </md-card-content> </md-card> </md-content> '),e.put("resources/app/components/appServiceOnOffComponent/appServiceOnOffComponent.html",'<md-content layout-padding layout-wrap> <md-card> <md-card-title> <div class="md-title">Activate/Deactivate {{vm.appid?\'App\':\'Service\'}}</div> </md-card-title> <md-card-content> <div> <p ng-show="vm.app && vm.app.status==\'active\'">Deactivating <b>{{::vm.app.appname}}</b> will remove the application and all the services of <b>{{::vm.app.appname}}</b> from UMANG.</p> <p ng-show="vm.app && vm.app.status==\'deactive\'">Activating <b>{{::vm.app.appname}}</b> will bring back the application and all the services of <b>{{::vm.app.appname}}</b> on UMANG.</p> <p ng-show="vm.service && vm.service.status==\'active\'">Deactivating <b>{{::vm.service.servicename}}</b> will remove the service from UMANG.</p> <p ng-show="vm.service && vm.service.status==\'deactive\'">Activating <b>{{::vm.service.servicename}}</b> will bring back the service on UMANG.</p> </div> <div align="center"> <md-button is-busy="vm.promise" ng-show="vm.app && vm.app.status==\'active\'" class="md-raised md-primary" ng-click="vm.activeDeactivate()">Deactivate</md-button> <md-button is-busy="vm.promise" ng-show="vm.app && vm.app.status==\'deactive\'" class="md-raised md-primary" ng-click="vm.activeDeactivate()">Activate</md-button> <md-button is-busy="vm.promise" ng-show="vm.service && vm.service.status==\'active\'" class="md-raised md-primary" ng-click="vm.activeDeactivate()">Deactivate</md-button> <md-button ng-disabled="vm.service.app.status==\'deactive\'" is-busy="vm.promise" ng-show="vm.service && vm.service.status==\'deactive\'" class="md-raised md-primary" ng-click="vm.activeDeactivate()">Activate</md-button> <div ng-show="vm.service.app.status==\'deactive\'" class="small-grey-text">{{vm.service.app.appname}} is deactivated. Please activate the app first to enable service.</div> </div> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/createCategoryComponent/createCategoryComponent.html",'<md-content layout-padding layout-wrap> <md-card> <md-card-title layout="row" layout-align="space-between center"> <div md-truncate class="md-title">Existing Categories</div> <md-button flex="none" class="md-raised md-primary" ng-click="vm.requestNew()"> <md-icon>add_circle</md-icon> Request New <span hide show-gt-sm>Category</span></md-button> </md-card-title> <md-card-content> <div promise-loader="vm.fetchCategoriesPromise" text="Loading Categories.."></div> <md-expansion-panel-group promise-hider="vm.fetchCategoriesPromise" md-component-id="categories"> <md-expansion-panel ng-repeat="category in ::vm.allCategories"> <md-expansion-panel-collapsed class="cursor-pointer" md-ink-ripple ng-click="::vm.activeCategory=category"> <div class="md-title">{{::category.categoryName}}</div> <div class="md-summary"></div> <md-expansion-panel-icon></md-expansion-panel-icon> </md-expansion-panel-collapsed> <md-expansion-panel-expanded> <md-expansion-panel-header class="cursor-pointer" md-ink-ripple ng-click="::$panel.collapse()" md-no-sticky> <div class="md-title" md-truncate>{{::category.categoryName}}</div> <div class="md-summary"></div> <md-expansion-panel-icon></md-expansion-panel-icon> </md-expansion-panel-header> <md-expansion-panel-content> <view-edit-category-component ng-if="vm.activeCategory==category" category="category"></view-edit-category-component> </md-expansion-panel-content> </md-expansion-panel-expanded> </md-expansion-panel> </md-expansion-panel-group> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/loginComponent/allowedDomainsDialog.html",'<md-content layout-wrap> <div layout-padding> <div class="md-headline">Allowed Email Domains</div> <md-chips ng-model="vm.allowedDomains" readonly="true"> <md-chip-template> <strong>{{$chip}}</strong> </md-chip-template> </md-chips> </div> <div align="right"> <md-button class="md-primary" ng-click="vm.$mdDialog.hide()">Okay</md-button> </div> </md-content>'),e.put("resources/app/components/loginComponent/loginComponent.html",'<md-toolbar class="md-theme-indigo top-head" layout="row"> <div align="center" class="md-toolbar-tools breadcrumb"> <span class="md-toolbar-tools logo-bg cursor-pointer"> <img src="resources/assets/images/logo-umang.png" width="152" height="47" alt=""> </span> \x3c!-- <span class="color-white">UMANG Department SelfCare</span> --\x3e </div> </md-toolbar> <md-content style="height:100%;background-image: url(resources/assets/images/loginbg.jpg)"> <div layout-gt-sm="row" layout="column"> <div flex-gt-sm="70" flex="30" layout="column" hide-xs hide-sm> <md-card layout-padding class="flowchart-bg"> <div align="center"><img src="resources/assets/images/process-flow.png" width="480" height="480" alt=""></div> </md-card> </div> <div flex layout="column"> <md-card class="no-padding"> <md-tabs md-dynamic-height md-border-bottom> <md-tab label="Login"> <form name="vm.loginForm" id="vm.loginForm" novalidate> <md-content layout-padding layout="column"> <md-input-container class="no-margin-bottom"> <label>User ID</label> <md-icon>account_circle</md-icon> <input ng-model="vm.user.userid" type="text" name="userId" id="userId" ng-required="true" maxlength="60" autocomplete="off"> <div ng-messages="vm.loginForm.userId.$error"> <div ng-message="required"> User ID / Email is required. </div> </div> </md-input-container> <md-input-container password-autofill-fix class="no-margin-bottom"> <label>Password</label> <md-icon>lock</md-icon> <input ng-model="vm.user.password" type="password" name="password" ng-required="true" id="password" autocomplete="off"> <div ng-messages="vm.loginForm.password.$error"> <div ng-message="required"> Password is required. </div> </div> </md-input-container> <div layout="row" layout-align="space-between center"> <md-input-container flex-offset-gt-sm="60" class="no-margin-top no-margin-bottom"> <md-button ng-click="vm.forgotPassword()" class="md-primary" translate="Forgot password?">Forgot password?</md-button> </md-input-container> </div> <div layout="row" align="center"> <md-button is-busy="vm.loginPromise" flex type="submit" ng-click="vm.login()" class="md-raised md-primary no-margin-top">Login</md-button> </div> </md-content> </form> </md-tab> <md-tab label="Onboard"> <form name="vm.onboardForm"> <md-content layout-padding layout="column"> <md-radio-group ng-init="vm.onboard.state=\'99\'" ng-model="vm.stateRadio" layout="row"> <md-radio-button ng-click="vm.onboard.state=\'99\'" class="md-primary">Central</md-radio-button> <md-radio-button ng-click="vm.onboard.state=\'\'" value="state" class="md-primary">State</md-radio-button> \x3c!--  <md-radio-button ng-click="vm.onboard.all=\'\'" value="all" class="md-primary">All</md-radio-button> --\x3e </md-radio-group> \x3c!-- content for all tab --\x3e \x3c!--  <md-input-container class="no-margin-bottom" ng-if="vm.stateRadio==\'all\'">\n                                    <label>State</label>\n                                    <md-icon>pin_drop</md-icon>\n                                    \n                                    <md-select ng-required="true" placeholder="states" md-on-open="vm.fetchStates1()" md-on-close="vm.searchStates=\'\'" name="states" ng-model="vm.onboard.state" multiple md-select-search="vm.allApps.allStates>5">\n                                        <md-select-header ng-value="states" ng-show="vm.allStates" multiple search="vm.searchStates">\n                                        </md-select-header>\n                                        <md-option ng-value="state.stateid" ng-repeat="state in vm.allStates|filter:vm.searchStates">{{::state.statename}}</md-option>\n                                    </md-select>\n                                    \n                                    <div ng-messages="vm.onboardForm.state.$error">\n                                        <div ng-message="required">State is required.</div>\n                                    </div>\n                                </md-input-container> --\x3e \x3c!-- content for all tab close--\x3e <md-input-container class="no-margin-bottom" ng-if="vm.stateRadio==\'state\'"> <label>State</label> <md-icon>pin_drop</md-icon> <md-select md-on-open="vm.fetchStates()" md-on-close="vm.searchStates=\'\'" ng-required="true" placeholder="State" name="state" ng-model="vm.onboard.state"> <md-select-header ng-show="vm.allStates" search="vm.searchStates"> </md-select-header> <md-option ng-value="state.stateid" ng-repeat="state in vm.allStates|filter:vm.searchStates">{{::state.statename}}</md-option> </md-select> <div ng-messages="vm.onboardForm.state.$error"> <div ng-message="required">State is required.</div> </div> </md-input-container> <md-input-container class="no-margin-bottom"> <label>Name of Organization</label> <md-icon>business</md-icon> <input ng-model="vm.onboard.orgName" type="text" name="orgName" ng-required="true" maxlength="50" autocomplete="off"> <div ng-messages="vm.onboardForm.orgName.$error"> <div ng-message="required"> Organization name is required. </div> </div> </md-input-container> <md-input-container class="no-margin-bottom"> <label>Name of Requestor</label> <md-icon>account_circle</md-icon> <input ng-model="vm.onboard.reqName" ng-pattern="vm.namePattern" type="text" name="reqName" ng-required="true" maxlength="50" autocomplete="off"> <div ng-messages="vm.onboardForm.reqName.$error"> <div ng-message="required"> Requestor name is required. </div> <div ng-message="pattern"> Please enter a valid name. </div> </div> </md-input-container> <md-input-container class="no-margin-bottom"> <label>Email</label> <md-icon>email</md-icon> <input ng-model="vm.onboard.email" type="text" name="email" ng-required="true" minlength="5" maxlength="60" ng-change="vm.validateGovtEmail()" ng-pattern="vm.emailPattern" autocomplete="off"> <div ng-messages="vm.onboardForm.email.$error"> <div ng-message="required"> Email address is required. </div> <div ng-message-exp="[\'minlength\', \'maxlength\', \'pattern\']"> Please enter a valid email. </div> <div ng-message="validatingDomain"> Validating Email Domain... <span class="tiny-spinner asyc-val"></span> </div> <div ng-message="invalidDomain"> Government email address is required. <a ng-click="vm.showAllowedDomains()" href="#">(View Allowed Domains)</a> </div> </div> </md-input-container> <div layout="row" ng-if="vm.onboard.email && vm.onboardForm.email.$valid" layout-align="space-around" layout-wrap> <md-button ng-init="vm.canRequestEmailOTP=true; vm.emailOTPPromise=null" ng-disabled="!vm.canRequestEmailOTP" is-busy="vm.emailOTPPromise" ng-click="vm.requestEmailOTP()" class="md-primary">{{vm.emailOTPPromise==null?\'Request\':\'Resend\'}} OTP</md-button> <md-input-container promise-hider="vm.emailOTPPromise" class="no-margin-bottom emailOTPPromise_btn"> <label>Email OTP</label> <md-icon>phonelink_lock</md-icon> <input clear-on-destroy ng-model="vm.onboard.emailOTP" restrict="reject" mask-validate="false" mask="999999" type="text" name="emailOTP" ng-required="true" autocomplete="off"> <div ng-messages="vm.onboardForm.emailOTP.$error"> <div ng-message="required"> Email OTP is required. </div> </div> </md-input-container> <div class="small-grey-text" ng-if="!vm.canRequestEmailOTP">Didn\'t get OTP? You can re-request in {{vm.emailRemainingSec}} seconds.</div> </div> <md-input-container class="no-margin-bottom"> <label>Mobile Number (Optional)</label> <md-icon>phone</md-icon> <input prefix91="14" ng-model="vm.onboard.mno" type="text" name="mno" ng-required="false" autocomplete="off" ng-maxlength="10" maxlength="10" ng-pattern="vm.mobilePattern"> <div ng-messages="vm.onboardForm.mno.$error"> <div ng-message="required"> Mobile number is required. </div> <div ng-message="pattern"> Please enter a valid mobile number. </div> </div> </md-input-container> <div layout="row" ng-if="vm.onboard.mno" layout-align="space-around" layout-wrap> <md-button ng-init="vm.canRequestMobOTP=true; vm.mnoOTPPromise=null" ng-disabled="!vm.canRequestMobOTP" is-busy="vm.mnoOTPPromise" ng-click="vm.requestMobOTP()" class="md-primary">{{vm.mnoOTPPromise==null?\'Request\':\'Resend\'}} OTP</md-button> <md-input-container promise-hider="vm.mnoOTPPromise" class="no-margin-bottom"> <label>Mobile OTP</label> <md-icon>phonelink_lock</md-icon> <input clear-on-destroy ng-model="vm.onboard.mnoOTP" restrict="reject" mask="999999" mask-validate="false" type="text" name="mnoOTP" ng-required="true" autocomplete="off"> <div ng-messages="vm.onboardForm.mnoOTP.$error"> <div ng-message="required"> Mobile OTP is required. </div> </div> </md-input-container> <div class="small-grey-text" ng-if="!vm.canRequestMobOTP">Didn\'t get OTP? You can re-request in {{vm.mnoRemainingSec}} seconds.</div> </div> <br> <div layout="row"> <md-button is-busy="vm.submitPromise" flex ng-disabled="vm.onboardForm.$invalid" ng-click="vm.submitOnboardForm()" class="md-raised md-primary" type="submit">Submit</md-button> </div> </md-content> </form> </md-tab> </md-tabs> </md-card> </div> </div> </md-content> '),e.put("resources/app/components/headerComponent/headerComponent.html",'<md-toolbar class="md-theme-indigo top-head" layout="row" layout-align="center center"> <span hide show-gt-sm ui-sref="selfcare.dashboard.apps" class="md-toolbar-tools logo-bg cursor-pointer"> <img src="resources/assets/images/logo-umang.png" width="152" height="47" alt=""> </span> <md-button style="z-index:2" ng-click="vm.$mdSidenav(\'mainSidenav\').toggle()" hide-gt-sm class="md-icon-button white-color"> <md-icon>menu</md-icon> </md-button> <div class="hidden-swipe-div" hide-gt-sm md-swipe-right="vm.$mdSidenav(\'mainSidenav\').toggle()"> </div> <span class="md-toolbar-tools breadcrumb"> <div layout="row" class="breadcrumb-section"> <a ui-sref="selfcare.dashboard"> <md-icon class="color-white">home</md-icon> </a> <span ng-repeat="crumb in vm.breadCrumbService.breadCrumbs"> <md-icon class="color-white">chevron_right</md-icon> <a ui-sref="{{crumb.state}}"><span md-truncate ng-class="{\'hover-underline\':!$last,\'default-cursor\':$last}">{{crumb.name}}</span></a> </span> </div> </span> <div layout="row" style="height: 40px" layout-align="center center" class="user-profile"> \x3c!--  <md-button is-busy="vm.logoutPromise" class="md-primary" layout-fill ng-click="vm.userinfo()">\n            <span class="color-white">User Info</span>\n            <md-icon class="color-white">account_circle</md-icon>\n        </md-button> --\x3e <md-menu> <md-button aria-label="Open menu with custom trigger" class="md-icon-button" ng-mouseenter="$mdMenu.open()"> \x3c!-- <md-icon md-menu-origin md-svg-icon="call:textsms"></md-icon> --\x3e <md-icon class="color-white profile_icon">account_circle</md-icon> </md-button> <md-menu-content ng-mouseleave="$mdMenu.close()" class="profile_menupopup"> <p><strong>Email ID:</strong>{{vm.emailId}}</p> <p><strong>Mobile No:</strong>{{vm.mno}}</p> <p><strong>Date of creation:</strong>{{vm.cdate}}</p> <p><strong>Nature:</strong>{{vm.name}}</p> </md-menu-content> </md-menu> <md-button is-busy="vm.logoutPromise" class="md-primary" layout-fill ng-click="vm.logout()"> <span class="color-white">Logout</span> <md-icon class="color-white">exit_to_app</md-icon> </md-button> </div> </md-toolbar>'),e.put("resources/app/components/headerComponent/userinfoshowComponent.html","<h2>user info</h2> <ul> <li>USerId:{{ vm.id}}</li> <li>Status:{{vm.status}}</li> <li>MObile No:{{vm.mno}}</li> <li>EmilId:{{vm.emailId}}</li> <li>CreationDate:{{vm.cdate}}</li> <li>Signature:{{vm.signature}}</li> <li>Nature:{{vm.name}}</li> </ul>"),e.put("resources/app/components/designApiComponent/designApiComponent.html",'<md-content layout-padding> <md-card> <md-card-title> <div class="md-title">Design API</div> </md-card-title> <md-card-content> <p>To design API, WSO2 API Publisher and Store are being used. Please click on one of the following buttons to open in new tab.</p> <div align="center"> <div flex-gt-sm="40" flex="100"> <img image-loader="38" class="wso-img" src="resources/assets/images/wso2.png"> </div> <br> <a target="_blank" href="https://devdept.umang.gov.in/publisher" class="md-button md-raised md-primary"> <md-icon>open_in_new</md-icon> API Publisher</a> <a target="_blank" href="https://devdept.umang.gov.in/store" class="md-button md-raised md-primary"> <md-icon>open_in_new</md-icon> API Store</a> </div> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/manageRequestsComponent/manageRequestsComponent.html",'<md-content layout-padding layout-wrap> <md-card> <md-card-content> <md-tabs md-selected="vm.selectedTabIndex" md-dynamic-height md-border-bottom> <md-tab md-on-select="enabled=true" md-on-deselect="enabled=false" ui-sref-opts="{notify:false}" ui-sref="selfcare.users.requests({status:status})" ng-repeat="status in ::vm.statuses"><md-tab-label> <md-icon style="margin-right: 10px">{{::vm.icons[status]}}</md-icon> {{::status}} </md-tab-label> </md-tab> </md-tabs> <div promise-loader="vm.getRequestsPromise" text="Loading requests.."></div> <div ng-show="vm.requests.length" promise-hider="vm.getRequestsPromise" layout="row" layout-wrap layout-align="center center"> <md-input-container flex="100" flex-gt-sm="50" flex-gt-sm="45"> <label>Start Date</label> <md-datepicker required md-open-on-focus name="startDate" md-max-date="vm.endDate || vm.maxEndDate" md-min-date="vm.minStartDate" flex="100" ng-model="vm.startDate"></md-datepicker> <div ng-messages="vm.dateRangeForm.startDate.$error"> <div ng-message="required"> Start Date is Required. </div> <div ng-message="valid"> Please enter a valid date. </div> <div ng-message="mindate"> Start date cannot be less than {{::vm.minStartDate|date}} </div> <div ng-message="maxdate"> Start date cannot be greater than end Date. </div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="50" flex-gt-sm="45"> <label>End Date</label> <md-datepicker required md-open-on-focus name="endDate" flex="100" md-max-date="vm.maxEndDate" md-min-date="vm.startDate || vm.minStartDate" ng-model="vm.endDate"></md-datepicker> <div ng-messages="vm.dateRangeForm.endDate.$error"> <div ng-message="required"> End Date is Required. </div> <div ng-message="valid"> Please enter a valid date. </div> <div ng-message="mindate"> End date cannot be less than end Date. </div> <div ng-message="maxdate"> End date cannot be greater than {{::vm.maxEndDate|date}} </div> </div> </md-input-container> \x3c!-- <md-input-container flex="100" flex-gt-sm="50" flex-gt-sm="45">\n                    <label>End Date</label>\n                    <md-datepicker date-picker-clear md-open-on-focus ng-model="vm.endDate"></md-datepicker>\n                </md-input-container> --\x3e <div flex="80" class="search-box"> <md-icon style="margin-right: 9px">search</md-icon> <input ng-model="vm.searchText" type="Search" placeholder="Search Organization..."> </div> <md-input-container flex="20"> <label>Sort By</label> <md-select ng-model="vm.sortType" ng-change="vm.sortApps()"> <md-option value="latestFirst">Sort By Latest</md-option> <md-option value="oldestFirst">Sort By Old</md-option> </md-select> </md-input-container> </div> <md-list flex layout-margin> <md-list-item ng-repeat="request in vm.requests | filter : vm.filterRequests"> <md-icon style="font-size: 35px" class="md-avatar">business</md-icon> <p md-truncate highlight-bind="request.organization | vm.searchText"></p> <md-button usc-right="viewQuestionaire" is-busy="request.getUserQuesionnairePromise" ng-disabled="!request.hasSubmitted" hide show-gt-sm ng-show="vm.status==\'approved\'" ng-click="vm.viewQuestionnaire(request)" class="md-raised"> {{request.hasSubmitted?\'View Questionnaire\':\'Not Submitted\'}} </md-button> <a hide show-gt-sm href="mailto:{{request.emailId}}" class="md-button md-raised"> <md-icon style="color: grey">email</md-icon> <span>Contact</span> </a> <md-button ng-click="vm.viewDetails(request)" class="md-raised md-primary"> View Details </md-button> \x3c!--  <md-button hide show-gt-sm md-theme="selfcare" ng-show="vm.status==\'pending\'" ng-click="vm.approveRequest(request)" class="md-raised md-primary">\n                        Approve\n                    </md-button> --\x3e <md-button is-busy="request.getUserPromise" hide show-gt-sm ng-show="vm.status==\'approved\'" ng-click="vm.editUser(request)" class="md-raised md-primary"> Edit </md-button> \x3c!--  <md-button hide show-gt-sm ng-show="vm.status==\'pending\'" ng-click="vm.rejectRequest(request)" class="md-raised md-warn">\n                        Reject\n                    </md-button> --\x3e </md-list-item> </md-list> <div align="center" ng-hide="vm.requests.length" promise-hider="vm.getRequestsPromise"> <h4>No results found!</h4> </div> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/profileDetailsComponent/profileDetailsComponent.html",'<md-content layout-padding> <md-card> <md-card-title> <div class="md-title">My Account</div> </md-card-title> <md-card-content flex class="layout-padding"> <div layout="row" layout-xs="column" class="no-padding no-margin" layout-wrap> <div flex-gt-sm="50" flex="100"> <div layout="row"> <md-input-container flex="90" flex-gt-sm="90" class="padding-b-10"> <label>User Id</label> <md-icon class="material-icons grey-icon">account_circle</md-icon> <input type="text" name="userId" ng-model="vm.userId" readonly="readonly"> </md-input-container> </div> </div> <div flex-gt-sm="50" flex="100"> <div layout="row"> <md-input-container flex="90" flex-gt-sm="90" class="padding-b-10"> <label>Password</label> <md-icon class="material-icons grey-icon">lock</md-icon> <input type="text" name="pwd" ng-init="randomPassword=\'*********\'" ng-model="randomPassword" readonly="readonly"> </md-input-container> <md-button class="md-icon-button margin-top-10" ng-click="vm.changePassword()"> <md-icon>mode_edit</md-icon><md-tooltip md-direction="bottom">Change Password</md-tooltip> </md-button> </div> </div> <div flex-gt-sm="50" flex="100"> <div layout="row"> <md-input-container flex="90" flex-gt-sm="90" class="padding-b-10"> <label>Mobile Number</label> <md-icon class="material-icons grey-icon">phone_iphone</md-icon> <input type="text" name="mno" ng-model="vm.mno" readonly="readonly"> </md-input-container> <md-button class="md-icon-button margin-top-10" ng-click="vm.editMobileNumber()"> <md-icon>mode_edit</md-icon><md-tooltip md-direction="bottom">{{vm.mno?\'Change Mobile Number\':\'Set Mobile Number\'}}</md-tooltip> </md-button> </div> </div> <div flex-gt-sm="50" flex="100"> <div layout="row"> <md-input-container flex="90" flex-gt-sm="90" class="padding-b-10"> <label>Signature</label> <md-icon class="material-icons grey-icon">assignment</md-icon> <textarea type="text" readonly="readonly" name="signature" ng-model="vm.signature"></textarea> </md-input-container> <md-button class="md-icon-button margin-top-10" ng-click="vm.editSignature()"> <md-icon>mode_edit</md-icon><md-tooltip md-direction="bottom">{{vm.signature?\'Change Signature\':\'Set Signature\'}}</md-tooltip> </md-button> </div> </div> </div> <h4 ng-if="::vm.isGuest" align="center">You are a guest user. You will get more SelfCare options once services are onboarded.</h4> <h3 ng-if="vm.userApps.length" class="md-headline">Assigned Apps</h3> <div class="my-account"> <div class="app" ng-repeat="app in vm.userApps"> <span>{{app.appname}}</span> <div class="service" ng-repeat="serv in app.services"> <span>{{serv.servicename}}</span> </div> </div> </div> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/reportingComponent/reportingComponent.html",'<md-content> <div layout="row" layout-wrap> <div flex="100" layout="row" layout-align="center" layout-wrap> <quick-date-range-component flex on-custom="vm.dateSelectorInstance.openSelector" start-date="vm.startDate" end-date="vm.endDate" date-range="vm.dateRange" on-range-change="vm.setDateRange"></quick-date-range-component> </div> <report-card-component date-range="{{vm.dateRange}}" serviceid="vm.serviceid" start-date="vm.startDate" end-date="vm.endDate" for-dashboard="true" appid="vm.appid" flex="100" flex-gt-sm="50"></report-card-component> <md-card flex layout-margin class="dashboard-complaints" layout-padding> <div align="center" class="margin-10"> <h4 class="no-margin" style="color:white">Complaints Summary</h4> </div> <md-card-content> <div ng-click="vm.goToQueries(\'email\')" ng-if="vm.appid" class="container-div"> <div class="md-headline">Emails</div> <div class="md-subhead">Total<span>{{vm.queryCounts.totalEmailCount}}</span> </div> <div class="md-subhead">Pending<span>{{vm.queryCounts.emailPendingCount}}</span></div> <md-divider></md-divider> </div> <div ng-click="vm.goToQueries(\'ivr\')" class="container-div"> <div class="md-headline">IVR</div> <div class="md-subhead">Total<span>{{vm.queryCounts.totalIvrCount}}</span> </div> <div class="md-subhead">Pending<span>{{vm.queryCounts.ivrPendingCount}}</span></div> <md-divider></md-divider> </div> <div ng-click="vm.goToQueries(\'chat\')" class="container-div"> <div class="md-headline">Chat</div> <div class="md-subhead">Total<span>{{vm.queryCounts.totalChatCount}}</span> </div> <div class="md-subhead">Pending<span>{{vm.queryCounts.chatPendingCount}}</span></div> <md-divider></md-divider> </div> <div ng-click="vm.goToQueries(\'all\')" class="container-div"> <div class="md-headline">All Complaints</div> <div class="md-subhead">Total<span>{{vm.queryCounts.totalChatCount+vm.queryCounts.totalIvrCount+vm.queryCounts.totalEmailCount}}</span> </div> <div class="md-subhead">Pending<span>{{vm.queryCounts.chatPendingCount+vm.queryCounts.ivrPendingCount+vm.queryCounts.emailPendingCount}}</span></div> <md-divider></md-divider> </div> </md-card-content> </md-card> <div promise-loader="vm.dashboardDataPromise" flex="100"></div> <div flex="100" layout="row" layout-align="center" promise-hider="vm.dashboardDataPromise" layout-wrap> <md-card flex="100" layout-padding> <md-card-content> <highchart-component json="vm.userDataJSON"></highchart-component> </md-card-content> </md-card> <md-card flex="100" layout-padding> <md-card-content> <highchart-component json="vm.successRateJSON"></highchart-component> </md-card-content> </md-card> <md-card flex="100" layout-padding> <md-card-content> <highchart-component json="vm.reponseTimeJSON"></highchart-component> </md-card-content> </md-card> <md-card flex="100" flex-gt-sm="50" layout-padding> <md-card-content> <highchart-component json="vm.platformJSON"></highchart-component> </md-card-content> </md-card> <md-card flex layout-padding> <md-card-content> <highchart-component json="vm.responseSlabJSON"></highchart-component> </md-card-content> </md-card> </div> </div> </md-content> '),e.put("resources/app/components/ratingAndFeebacksComponent/ratingAndFeebacksComponent.html",'<md-content layout-padding layout-wrap> <md-card> <md-card-content> <section layout="row" layout-gt-sm="row" layout-align="center center"> <md-button usc-right="{{criteria.right}}" flex flex-gt-sm="grow" ng-click="vm.changeCriteria(criteria)" style="padding: 0 10px" class="no-margin middle button-group" ng-class="{\'selected\': vm.selectedCriteria==criteria }" ng-repeat="criteria in ::vm.criterias"> <md-icon style="font-size:22px;margin-right: 3px">{{::criteria.icon}}</md-icon><span hide show-gt-sm style="font-size:14px"> {{::criteria.text}}</span> <md-tooltip hide-gt-sm md-direction="bottom">{{::criteria.text}}</md-tooltip> </md-button> </section> <br> <quick-date-range-component on-range-change="vm.setDateRange" on-custom="vm.dateSelectorInstance.openSelector" start-date="vm.startDate" end-date="vm.endDate" date-range="vm.dateRange" on-range-change="vm.setDateRange"></quick-date-range-component> <dept-feedback-component start-date="vm.startDate" end-date="vm.endDate" ng-if="vm.selectedCriteria.value==\'dept\'"></dept-feedback-component> <app-feedbacks-component start-date="vm.startDate" end-date="vm.endDate" ng-if="vm.selectedCriteria.value==\'app\'"></app-feedbacks-component> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/ratingsComponent/ratingsComponent.html",'<md-content layout-padding> <div class="ratings-component" layout="column" layout-gt-sm="row"> <md-card flex-gt-sm="30"> <md-card-header> <md-card-header-text> <span class="md-title">Ratings</span> </md-card-header-text> </md-card-header> <md-card-content> <div promise-loader="vm.ratingPromise"></div> <div align="center"> <h3><star-rating-component style="color:gold" rating="vm.ratings.avg"></star-rating-component> <span>{{vm.ratings.avg}} ({{vm.ratings.sumOfCounts}})</span></h3> <br> </div> <div layout="row" ng-repeat="count in vm.ratings.counts track by $index" layout-align="center center" class="rating-bar layout-align-center-center layout-row"> <div class="rating-line"> <span>{{::5-$index}} <md-icon>stars</md-icon></span> </div> <div layout="row" layout-align="space-around"> <div class="rat-line"> <div class="color-line" ng-style="{\'width\':count.percent+\'%\'}" ng-class="::{\'green\': $index==0||$index==1, \n                        \'orange\': $index==2||$index==3, \'red\': $last}"></div> </div> <span style="width: 40px">{{::count.value}}</span> </div> </div> </md-card-content> </md-card> <md-card flex-gt-sm="70"> <md-card-header> <md-card-header-text> <span class="md-title">Feedbacks</span> </md-card-header-text> </md-card-header> <md-card-content> <md-tabs md-dynamic-height md-border-bottom class="rating-list-item"> <md-tab ng-click="vm.onTabChange(ratingObj)" label="{{::ratingObj.rating}} Star" ng-repeat="ratingObj in ::vm.allRatings"> <div promise-loader="vm.feedbackPromise"></div> <md-list-item class="md-3-line md-long-text" ng-repeat="feedback in vm.feedbacks"> <md-icon class="md-avatar">comment</md-icon> <div class="md-list-item-text"> <h4>{{::feedback.date|uscDate}}</h4> <p>{{::feedback.comments}}</p> </div> </md-list-item> <div align="center" ng-if="!vm.feedbacks.length" promise-hider="vm.feedbackPromise"> <h4 style="margin: 75px 0">No Feedbacks Found!</h4> </div> <pagination-component ng-show="vm.feedbacks.length" api="ratingObj.paginator" fetch-on-init="ratingObj.rating==5" on-fetch="vm.app?vm.getAppFeedbacks:vm.getServiceFeedbacks"></pagination-component> </md-tab> </md-tabs> </md-card-content> </md-card> </div> </md-content>'),e.put("resources/app/components/reportCardComponent/reportCardComponent.html",'<md-content layout-padding> <md-card class="no-padding"> <md-card-content style="z-index: 1" class="report-card"> <div promise-loader="vm.reportCardPromise" text="Loading Report Card... "></div> <div promise-hider="vm.reportCardPromise" align="center" class="margin-10" ng-show="::vm.forDashboard"> <h4 class="no-margin">Report Card</h4> </div> <div promise-hider="vm.reportCardPromise" layout="row" layout-wrap> <div flex="100" ng-hide="vm.forDashboard" class="margin-10"> <quick-date-range-component on-custom="vm.dateSelectorInstance.openSelector" start-date="vm.startDate" end-date="vm.endDate" date-range="vm.dateRange" on-range-change="vm.setDateRange"></quick-date-range-component> </div> <div flex="100" flex-gt-sm="{{vm.forDashboard?\'100\':\'40\'}}" layout="column"> <md-card md-whiteframe="{{vm.shadow.rating}}" class="pos-rel cursor-pointer hoverable" flex ng-click="vm.changeGraph(\'rating\')"> <div health-value="vm.rating.avgRating" rating class="card-ltr-shade"></div> <md-card-content style="z-index: 1" layout="row"> <div flex> <h4 class="no-margin">Rating : {{::vm.rating.avgRating}} <md-icon class="cursor-pointer info-icon"> <md-tooltip md-direction="bottom">Shows average rating given to the app on UMANG and the number of users who rated it.</md-tooltip>info</md-icon></h4> <span>{{::vm.rating.users|number}} Ratings</span> <br> <star-rating-component rating="vm.rating.avgRating"></star-rating-component> </div> <div flex> <highchart-component no-export="true" height="80" json="vm.rating.sparkline"></highchart-component> </div> </md-card-content> </md-card> <md-card md-whiteframe="{{vm.shadow.art}}" class="pos-rel cursor-pointer hoverable" flex ng-click="vm.changeGraph(\'art\')"> <div health-value="vm.responseTime.responseTime" response-time class="card-ltr-shade"></div> <md-card-content style="z-index: 1" layout="row"> <div flex="60"> <h4 class="no-margin">API Response Time <md-icon class="cursor-pointer info-icon"><md-tooltip md-direction="bottom">Average response time in milliseconds for all requests within date range.</md-tooltip>info</md-icon> </h4> <span>{{vm.responseTime.responseTime}} ms (average)</span> <br><span>{{vm.responseTime.users|number}} Hits</span> </div> <div flex> <highchart-component no-export="true" height="80" json="vm.responseTime.sparkline"></highchart-component> </div> </md-card-content> </md-card> <md-card md-whiteframe="{{vm.shadow.asp}}" class="pos-rel cursor-pointer hoverable" flex ng-click="vm.changeGraph(\'asp\')"> <div class="card-ltr-shade" health-value="vm.averageSuccessPercenatge.successPercentage" percent></div> <md-card-content style="z-index: 1" layout="row"> <div flex="55"> <h4 class="no-margin">Request Success Rate <md-icon class="cursor-pointer info-icon"><md-tooltip md-direction="bottom">Success rate (Response to API hit) of all requests within date range.</md-tooltip>info</md-icon> </h4> <span>{{vm.averageSuccessPercenatge.successPercentage}}%</span> <br><span>{{vm.averageSuccessPercenatge.totalUsers|number}} Requests</span> </div> <div flex> <highchart-component no-export="true" height="80" json="vm.averageSuccessPercenatge.sparkline"></highchart-component> </div> </md-card-content> </md-card> <md-card md-whiteframe="{{vm.shadow.tuv}}" class="pos-rel cursor-pointer hoverable" flex ng-click="vm.changeGraph(\'tuv\')"> <div class="card-ltr-shade" health-value="100" percent></div> <md-card-content style="z-index: 1" layout="row"> <div flex> <h4 class="no-margin">Total API Hits <md-icon class="cursor-pointer info-icon"><md-tooltip md-direction="bottom">Number of users who visited the app within date range.</md-tooltip>info</md-icon> </h4> <br> <span>{{vm.users.users|number}}</span> </div> <div flex> <highchart-component no-export="true" height="80" json="vm.users.sparkline"></highchart-component> </div> </md-card-content> </md-card> <md-card flex hide> <md-card-content style="z-index: 1" layout="row"> <div flex> <h4 class="no-margin">Transactions per Second</h4> <br> </div> <div flex> <highchart-component no-export="true" height="80" json="vm.tpsJSON"></highchart-component> </div> </md-card-content> </md-card> </div> <div flex="100" flex-gt-sm="60" ng-if="!vm.forDashboard" layout="column" layout-align="center center"> <highchart-component json="vm.currentGraphJSON"></highchart-component> </div> </div> </md-card-content> </md-card> </md-content> '),e.put("resources/app/components/selfCareComponent/selfCareComponent.html",'<div layout="column" layout-fill> <header-component></header-component> <div layout="row" flex> <sidenav-component layout="column"></sidenav-component> <ui-view id="mainContent" class="pos-rel" layout="column" class="fade-up" flex></ui-view> </div> </div> '),e.put("resources/app/components/serviceHomeComponent/serviceHomeComponent.html",'<md-content layout="row" layout-wrap> <div flex-gt-sm="20" flex="50" ng-repeat="tile in vm.tiles" ng-hide="::tile.hide" usc-right="{{::tile.right}}" ui-sref="{{::tile.state}}" class="cursor-pointer"> <md-card style="padding: 20px 0px" class="hoverable"> <div align="center"> <img class="md-card-image" style="height: 128px; width: 128px" ng-src="{{::tile.imageUrl}}"> </div> <md-card-footer layout="row" layout-align="center center"> <span md-truncate>{{::tile.text}}</span> </md-card-footer> </md-card> </div> <div flex="100" ui-sref="selfcare.dashboard.services" align="center" layout-margin> <md-button class="md-raised custom-blue">Back</md-button> </div> </md-content>'),e.put("resources/app/components/roleComponents/createRoleComponentSaveAs.html",'<md-content> <md-card layout-padding> <form layout="row" name="vm.createRoleForm" layout-wrap="" class="ng-pristine ng-valid layout-wrap layout-row ng-valid-required ng-valid-maxlength" style=""> <md-input-container flex="100" class="md-icon-float md-block md-icon-left flex-100 md-input-has-value"> <label class="md-required" for="input_17">Role Name</label> <md-icon class="material-icons" role="img" aria-label="security">security</md-icon> <input required="" ng-model="vm.roleName" name="roleName" type="text" maxlength="50" class="ng-pristine ng-untouched ng-valid md-input ng-not-empty ng-valid-required ng-valid-maxlength" id="input_17" aria-invalid="false" style=""><div class="md-errors-spacer"></div> <div ng-messages="vm.createRoleForm.roleName.$error" class="md-input-messages-animation md-auto-hide ng-inactive" aria-live="assertive"> \x3c!-- ngMessage: required --\x3e </div> </md-input-container> <div flex="100" align="center" layout-margin="" class="layout-margin flex-100"> <button class="md-raised md-button ng-scope md-ink-ripple" type="button" ng-click="vm.saveAs()" style="background-color:rgb(63,81,181)"><span class="md-raised md-primary">Save</span></button> </div> </form> </md-card> </md-content>'),e.put("resources/app/components/serviceProfileComponent/serviceProfileComponent.html",'<md-content layout-padding> <md-card> <md-card-content> <div layout="column" class="no-margin" layout-padding layout-wrap> <div align="center"> <img src="{{::vm.service.image}}"> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>Live Since</label> <input readonly="readonly" ng-model="vm.service.liveDate"> </md-input-container> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>Service Name</label> <input readonly="readonly" ng-model="vm.service.servicename"> </md-input-container> <div usc-right="editServiceProfile"> <md-button class="md-raised md-primary" ng-click="vm.requestChange(\'Service Name\', vm.service.servicename)">Request Change</md-button> </div> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>Short Description</label> <textarea readonly="readonly" ng-model="vm.service.shortdesc"></textarea> </md-input-container> <div usc-right="editServiceProfile"> <md-button class="md-raised md-primary" ng-click="vm.requestChange(\'Short Description\', vm.service.shortdesc, 60)">Request Change</md-button> </div> </div> <div layout="row"> <md-input-container flex class="padding-b-10"> <label>Long Description</label> <textarea readonly="readonly" ng-model="vm.service.description"></textarea> </md-input-container> <div usc-right="editServiceProfile"> <md-button class="md-raised md-primary" ng-click="vm.requestChange(\'Long Description\', vm.service.description, 200)">Request Change</md-button> </div> </div> </div> </md-card-content> </md-card> </md-content> '),e.put("resources/app/components/serviceKeywordComponent/serviceKeywordComponent.html",'<md-content class="right-content layout-padding"> <div class="no-padding"> <md-card flex="100"> <div layout="column" layout-align-xs="" layout-xs="column" class="no-padding margin-top-10"> <div layout="column" class="no-padding" layout-margin> <md-input-container flex="100" class="md-icon-float md-block"> <label>Language</label> <md-icon class="grey-icon">translate</md-icon> <md-select ng-model="vm.selectedLanguage" ng-change="vm.fetchKeywords(vm.fetchKeywordRequest)" name="language" md-select-search="true"> <md-option ng-value="languageObj" ng-repeat="languageObj in vm.languages">{{::languageObj.language}}</md-option> </md-select> </md-input-container> </div> <keyword-accordion-component ng-if="vm.showAccordions" class="no-margin" preopen="true" selected-language="vm.selectedLanguage" service="vm.service"></keyword-accordion-component> </div> </md-card> </div> </md-content> '),e.put("resources/app/components/umangFaqComponent/umangFaqComponent.html",'<md-content layout-padding layout-wrap> <md-card> <md-card-title> <div class="md-title">UMANG FAQ</div> </md-card-title> <md-card-content> \x3c!--  <p>To request change in UMANG FAQ, an email is required to be sent to concerened UMANG team. Click the button below to invoke email client.</p> --\x3e <p style="color: red; text-align: center" class="small-grey-text">Requests for change of FAQ are temporarily disabled.</p> \x3c!--   <div align="center">\n                <a class="md-button md-primary md-raised" href="{{::vm.mailTo}}"><md-icon>email</md-icon>  Open Email Client</a>\n            </div> --\x3e </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/sidenavComponent/sidenavComponent.html",'<md-sidenav layout="column" flex class="md-sidenav-left" md-component-id="mainSidenav" md-is-locked-open="vm.$mdSidenav.uscSidebarLocked&&vm.$mdMedia(\'gt-sm\')" md-whiteframe="2"> <md-content class="left-nav-content"> <span hide-gt-sm ui-sref="selfcare.dashboard.apps" class="md-toolbar-tools logo-bg cursor-pointer margin-top-bottom-10"> <img src="resources/assets/images/logo-umang.png" width="152" height="47" alt=""> </span> <div usc-right="{{navigation.right}}" ng-repeat="navigation in ::vm.navigations track by navigation.state"> <md-list-item style="padding:0" ui-sref-active="{{!navigation.children?\'parent-active\':\'\'}}" ui-sref="{{::navigation.state}}" class="accordion parent secondary-button-padding" ng-click="::vm.toggleAccordion(navigation)"> <md-icon ng-bind="::navigation.icon" style="margin-right: 8px" class="no-margin color-white"></md-icon> <span class="padding-10">{{::navigation.name}}</span> <md-icon ng-if="::navigation.children" ng-class="{\'open\':((navigation.state | includedByState)||navigation.override)}" ui-sref="{{::navigation.state}}" ng-click="::vm.toggleAccordion(navigation)" class="color-white arrow">chevron_right</md-icon> </md-list-item> <div usc-right="{{childNav.right}}" ng-repeat="childNav in ::navigation.children track by childNav.state" class="animate-show-hide" ng-show="(navigation.state | includedByState)||navigation.override"> <md-list-item ui-sref-active="active" ng-click="::vm.$mdSidenav(\'mainSidenav\').toggle()" ui-sref="{{::childNav.state}}"> <md-icon ng-bind="::childNav.icon" style="margin-right: -15px;margin-left: 18px;margin-top: 8px;margin-bottom: 8px" class="color-white"></md-icon> <span style="margin-left: 28px">{{::childNav.name}}</span> <div class="counthere" ng-show="vm.testLen">{{vm.testLen}}</div> </md-list-item> </div> </div> </md-content> </md-sidenav>'),e.put("resources/app/components/userQueryComponent/userQueryComponent.html",'<md-content flex class="right-content" layout-padding> <div layout="row" class="no-padding" layout-xs="column"> <div flex="100" flex-xs="100" layout="column"> <md-card layout-padding class="no-padding-bottom"> <form name="vm.userQueryForm"> <md-card-content layout="row" layout-wrap layout-align="space-around"> <md-input-container ng-hide="vm.forService" flex="100" flex-gt-sm="30" class="md-icon-float md-block"> <label>Service</label> <md-icon class="grey-icon">question_answer</md-icon> <md-select ng-model="vm.selectedService" ng-change="vm.serviceFilterChange()"> <md-option ng-value="item.value" ng-repeat="item in ::vm.servicesFilters">{{::item.displayName}}</md-option> </md-select> </md-input-container> <md-input-container flex="100" flex-gt-sm="{{vm.forService?\'45\':\'30\'}}" class="md-icon-float md-block"> <label>Type</label> <md-icon class="grey-icon">question_answer</md-icon> <md-select ng-model="vm.selectedFilter" ng-change="vm.paginator.goToPage(1)"> <md-option ng-value="filter" ng-repeat="filter in vm.filterOptions">{{::filter.displayName}}</md-option> </md-select> </md-input-container> <md-input-container flex="100" flex-gt-sm="{{vm.forService?\'45\':\'30\'}}" class="md-icon-float md-block"> <label>Status</label> <md-icon class="grey-icon">done_all</md-icon> <md-select ng-model="vm.selectedStatus" ng-change="vm.paginator.goToPage(1)"> <md-option ng-value="option" ng-repeat="option in vm.statusOptions">{{::option.displayName}}</md-option> </md-select> </md-input-container> <md-input-container flex="100" flex-gt-sm="45"> <label>Start Date</label> <md-datepicker date-picker-clear md-open-on-focus ng-change="vm.paginator.goToPage(1)" ng-model="vm.startDate"></md-datepicker> </md-input-container> <md-input-container flex="100" flex-gt-sm="45"> <label>End Date</label> <md-datepicker date-picker-clear md-open-on-focus ng-change="vm.paginator.goToPage(1)" md-max-date="vm.maxEndDate" md-min-date="vm.startDate || vm.minStartDate" ng-model="vm.endDate"></md-datepicker> </md-input-container> </md-card-content> </form> </md-card> </div> </div> <div ng-if="vm.queries.length" layout="column" class="no-padding-bottom"> <div layout="row" layout-align="space-around center" style="background: white"> <md-input-container flex="100" class="padding-b-10"> <label>Search...</label> <md-icon class="grey-icon">search</md-icon> <input type="text" ng-model="vm.searchFilter"> </md-input-container> <md-button flex="noshrink" class="md-icon-button md-primary rotate-90" ng-click="vm.queries.reverse()"> <md-icon class="grey-icon">compare_arrows</md-icon> </md-button> </div> <md-divider></md-divider> <md-list class="inbox-list md-cyan-theme jlist no-padding" role="list"> <md-list-item ng-repeat="item in vm.queries|filter:vm.searchFilter"> <div ng-click="vm.showExpandedView(item)" class="md-button md-no-style boxbtn"> <div class="md-list-item-inner"> <md-icon style="font-size: 38px" ng-bind="item.icon"></md-icon> <div class="md-list-item-text layout-column" layout="column"> <h3 class="topLeftElement"> <span class="md-caption status blue">Ref Id__: <span highlight-bind="item.ticket_id | vm.searchFilter"></span> </span> <span style="margin-top:25px" ng-class="vm.getStatusClass(item.status)" class="md-caption status"> <span highlight-bind="vm.getStatusDisplay(item.status) | vm.searchFilter"></span> </span> {{::item.log_time|uscDate}} <span style="float: right" highlight-bind="item.servicename | vm.searchFilter" class="remarks" ng-init="vm.getSerivceName(item)"></span></h3> <h4 highlight-bind="item.user_name | vm.searchFilter"></h4> <p class="remarks" highlight-bind="item.query | vm.searchFilter"></p> </div> <md-divider></md-divider> </div> </div> <md-button usc-right="takeQueryAction" ng-disabled="vm.statusForm.$invalid" type="submit" class="btn btn-info btn-sm viewattachment_btn" ng-click="vm.showExpandedView1(item)">View Attachment</md-button> </md-list-item> </md-list> </div> <md-card class="no-padding-top no-margin-top" ng-show="vm.queries.length && !vm.isLoading"> <pagination-component fetch-on-init="true" api="vm.paginator" on-fetch="vm.searchQuery"></pagination-component> </md-card> <div align="center" ng-show="!vm.queries.length && !vm.isLoading"> <h4>No Results Found.</h4> </div> \x3c!--     <div align="center" layout-margin>\n        <a ng-hide="vm.forService" ui-sref="selfcare.dashboard.app.home">\n            <md-button class="md-raised custom-blue">Back</md-button>\n        </a>\n        <a ng-show="vm.forService" ui-sref="selfcare.dashboard.service.home">\n            <md-button class="md-raised custom-blue">Back</md-button>\n        </a>\n    </div> --\x3e </md-content> '),e.put("resources/app/directives/imageFileDirective/imageFile.html",'<div layout="column" class="no-padding" align="{{::vm.align}}"> <h4>{{::vm.title}}</h4> <div> <label ng-if="!vm.imageFile" for="{{vm.id}}" md-ink-ripple="true" class="md-fab custom-green md-button md-ink-ripple md-container-ignore md-no-float"> <md-tooltip md-direction="bottom" md-visible="tooltipVisible">Attach Image</md-tooltip> <md-icon style="color: white">attach_file</md-icon> </label> </div> <div> <label ng-if="vm.imageFile" ng-click="vm.removeFile()" md-ink-ripple="true" class="md-fab md-warn md-button md-ink-ripple md-container-ignore md-no-float"> <md-tooltip md-direction="bottom" md-visible="tooltipVisible">Remove Image</md-tooltip> <md-icon>close</md-icon> </label> </div> <input accept="image/*" type="file" id="{{vm.id}}" file-model ng-model="vm.imageFile" ng-change="vm.imageSelectChange()" class="file-input-fab"> </div> <div ng-if="vm.imageFile" align="{{::vm.align}}"> <h5 class="margin-10">Image Preview: {{vm.imageFile.name}} ({{vm.imageFile.size|number}} bytes)</h5> <img ng-if="::vm.noPreview" class="file-upload-preview" ng-src="{{vm.selectedFileDataURL}}"> <img ng-if="::!vm.noPreview" preview-image class="file-upload-preview" ng-src="{{vm.selectedFileDataURL}}"> </div>'),e.put("resources/app/directives/userTreeDirective/userTreeDirective.html",'<li> <a ng-class="{\'light-blue-back\': user.selected,\'light-blue-back\': userSearch(user.userid,searchuser) }"><span>{{user.userid}} </span><md-menu ng-if="::user.apps.length"><md-button class="md-icon-button" ng-click="getUserDetails(user.userid,$mdOpenMenu,$event)"> <md-icon>info</md-icon> </md-button> <md-menu-content width="4"> <div layout="row" layout-align="space-around center" flex="100" class="treemenu_maintop"> <label flex="100">Mobile Number</label> <big flex="100">{{userdetail.mno}}</big> </div> <div layout="row" layout-align="space-around center" flex="100" class="treemenu_maintop"> <label flex="100">Email ID</label> <big flex="100">{{userdetail.email}}</big> </div> <div layout="row" layout-align="space-around center" flex="100" class="treemenu_maintop"> <label flex="100">User Status</label> <big flex="100">{{userdetail.status}}</big> </div> \x3c!-- <div layout="row" layout-align="space-around center"  flex="100" class="treemenu_maintop" >\t\n<label flex="100">Nature</label> \n<big flex="100">{{stateRadio}}</big>\n</div> --\x3e \x3c!-- <div layout="row" layout-align="space-around center"  flex="100" class="treemenu_maintop" >\n<label flex="100">Category</label> \n<big flex="100">{{userdetail.catagories}}</big>\n</div> --\x3e  <div layout="row" layout-align="space-around center" flex="100" class="treemenu_maintop"> <label flex="100">Creation Date/Time</label> <big flex="100">{{userdetail.cdate}}</big> </div> <md-menu-item class="tree-li" ng-repeat="app in user.apps"> <div layout="column" flex="100"> <p><big>{{::app.appname}}</big> <br> {{::app.services}}</p> </div> </md-menu-item> </md-menu-content></md-menu> </a> <ul class="no-padding-bottom" ng-if="user.children.length"> <user-tree-directive searchuser="searchuser" user="child" ng-repeat="child in user.children"></user-tree-directive> </ul> </li> '),e.put("resources/app/components/analyticsComponents/analyticsDeptsComponent/analyticsDeptsComponent.html",'<section layout="row" layout-wrap layout-gt-sm="row" layout-align="center center"> <md-button flex flex-gt-sm="noshrink" ng-click="vm.changeCriteria(criteria)" style="padding: 0 10px" class="no-margin middle button-group" ng-class="{\'selected\': vm.selectedCriteria==criteria }" ng-repeat="criteria in ::vm.criterias"> <md-icon style="font-size:22px;margin-right: 3px">{{::criteria.icon}}</md-icon><span hide show-gt-sm style="font-size:14px"> {{::criteria.text}}</span> <md-tooltip hide-gt-sm md-direction="bottom">{{::criteria.text}}</md-tooltip> </md-button> </section> <div layout-gt-sm="row" layout="column"> <md-card flex-gt-sm="20"> <div class="search-box in-card"> <md-icon style="margin-right: 9px">search</md-icon> <input ng-model="vm.search" type="Search" placeholder="Search..."> </div> <div layout="column"> <md-button flex class="md-raised md-primary" ng-click="vm.showFilterComp()">{{vm.hasFilters?\'Modify Filters\':\'Filter\'}}</md-button> <md-button class="md-raised" ng-show="vm.hasFilters" ng-click="vm.clearFilters()">Clear Filters</md-button> </div> <md-content style="max-height: 300px"> <md-list> <md-list-item ng-class="{\'box-bg1\': vm.selectedApp==app}" title="{{::app.appname}}" ng-click="vm.selectApp(app)" ng-repeat="app in vm.allApps|filter:{\'appname\': vm.search}"> <p md-truncate> {{ app.appname }} </p> </md-list-item> </md-list> </md-content> <h4 align="center" ng-show="!vm.allApps.length">No Results Found!</h4> </md-card> <md-card flex-gt-sm layout="column" layout-wrap> <div layout="row" layout-align="center center" class="margin-10" ng-hide="vm.selectedApp"> <h4>Please select a department to view its performance.</h4> </div> <div layout-align="center center" layout="row" ng-show="vm.graphForItems.length"> <label><strong>Graph for : </strong></label> <md-input-container flex="none"> <md-select ng-change="vm.getData()" ng-model="vm.graphFor"> <md-option ng-value="item" ng-repeat="item in vm.graphForItems">{{::item.name}}</md-option> </md-select> </md-input-container> </div> <div promise-loader="vm.getDataPromise" error-text="No Data Found!" text="Loading Data.."></div> <highchart-component sortable="vm.selectedCriteria.value!=\'temporal\'" on-series-click="vm.onSeriesClick" promise-hider="vm.getDataPromise" for-analytics="true" fullscreen-button="true" json="vm.json"></highchart-component> <div promise-loader="vm.getSubDataPromise" ng-show="vm.getSubDataPromise" error-text="No Data Found!" text="Loading Data.."></div> <div promise-hider="vm.getSubDataPromise"> <highchart-component sortable="true" fullscreen-button="true" for-analytics="true" ng-show="vm.sub.ageJson" json="vm.sub.ageJson"></highchart-component> <highchart-component sortable="true" fullscreen-button="true" for-analytics="true" ng-show="vm.sub.genderJson" json="vm.sub.genderJson"></highchart-component> <highchart-component sortable="true" fullscreen-button="true" for-analytics="true" ng-show="vm.sub.qualJson" json="vm.sub.qualJson"></highchart-component> <highchart-component sortable="true" fullscreen-button="true" for-analytics="true" ng-show="vm.sub.occupJson" json="vm.sub.occupJson"></highchart-component> <highchart-component sortable="true" fullscreen-button="true" for-analytics="true" ng-show="vm.sub.districtJson" json="vm.sub.districtJson"></highchart-component> </div> <br> </md-card> </div>'),e.put("resources/app/components/analyticsComponents/analyticsDashboardComponent/analyticsDashboardComponent.html",'<div layout="row" layout-wrap> <div class="analytics-dashboard-title" style="line-height: 38px">Total Registration Attempts</div> <div promise-hider="vm.getDataPromise" class="analytics-dashboard-sum"><span ng-show="vm.regAttemptsTotal"> - </span>{{vm.regAttemptsTotal|number}}</div> <div flex="100" promise-loader="vm.getDataPromise" text="Loading Data.." error-text="No Data Found!"></div> <div flex="100" layout="row" promise-hider="vm.getDataPromise" layout-wrap layout-align="center"> <div flex="100" flex-gt-sm="50" ng-repeat="status in vm.statuses"> <md-card class="cursor-pointer hoverable" ui-sref="{{status.state}}"> <md-card-content style="z-index: 1" layout="row"> <div> <h3 class="no-margin"> {{::status.display}} <md-icon class="cursor-pointer info-icon"><md-tooltip md-direction="bottom">{{::status.tooltip}}</md-tooltip>info</md-icon></h3> <br> <span style="font-size:24px">{{(vm.jsons[status.value].totalUsers || \'0\')|number}}</span> </div> <div flex> <highchart-component no-export="true" height="80" json="vm.jsons[status.value].sparkline"></highchart-component> </div> </md-card-content> </md-card> </div> </div> <div class="analytics-dashboard-title">Registration Mode</div> <div flex="100" promise-loader="vm.getDataPromise" text="Loading Data.." error-text="No Data Found!"></div> <div flex="100" layout="row" layout-wrap promise-hider="vm.getDataPromise" layout-align="center"> <div flex="100" flex-gt-sm="{{vm.modeFlex}}" ng-repeat="mode in vm.regModes"> <md-card ng-show="vm.regModesJson[mode.value].totalUsers"> <md-card-content style="z-index: 1" layout="row"> <div> <h3 class="no-margin"> {{::mode.display}} <md-icon class="cursor-pointer info-icon"><md-tooltip md-direction="bottom">{{::mode.tooltip}}</md-tooltip>info</md-icon></h3> <br> <span style="font-size:24px">{{(vm.regModesJson[mode.value].totalUsers || \'0\')|number}}</span> </div> <div flex> <highchart-component no-export="true" height="80" json="vm.regModesJson[mode.value].sparkline"></highchart-component> </div> </md-card-content> </md-card> </div> </div> <div class="analytics-dashboard-title">Registration Channel</div> <div flex="100" promise-loader="vm.getDataPromise" text="Loading Data.." error-text="No Data Found!"></div> <div flex="100" layout="row" promise-hider="vm.getDataPromise" layout-wrap layout-align="center"> <div flex="100" flex-gt-sm="50" ng-repeat="channel in vm.regChannels"> <md-card> <md-card-content style="z-index: 1" layout="row"> <div> <h3 class="no-margin"> {{::channel.display}} <md-icon class="cursor-pointer info-icon"><md-tooltip md-direction="bottom">{{::channel.tooltip}}</md-tooltip>info</md-icon></h3> <br> <span style="font-size:24px">{{(vm.regChannelsJson[channel.value].totalUsers || \'0\')|number}}</span> </div> <div flex> <highchart-component no-export="true" height="80" json="vm.regChannelsJson[channel.value].sparkline"></highchart-component> </div> </md-card-content> </md-card> </div> </div> </div>'),e.put("resources/app/components/analyticsComponents/analyticsfilterAppsComponent/analyticsfilterAppsComponent.html",'<md-content layout-padding layout-wrap> <form name="vm.form" layout="column"> <md-radio-group class="margin-10" flex ng-model="vm.filters.selected.stateRadio" layout="row" layout-align="center center"> <md-radio-button ng-click="vm.filters.selected.state=\'all\'" value="all" class="md-primary">All</md-radio-button> <md-radio-button ng-click="vm.filters.selected.state=\'99\'" value="central" class="md-primary">Central</md-radio-button> <md-radio-button ng-click="vm.filters.selected.state=\'\'" value="state" class="md-primary">State</md-radio-button> </md-radio-group> <md-input-container flex class="no-margin-bottom" ng-if="vm.filters.selected.stateRadio==\'state\'"> <label>State</label> <md-icon>pin_drop</md-icon> <md-select md-on-open="vm.fetchStates()" placeholder="State" ng-required="vm.filters.selected.state==\'\'" name="state" ng-model="vm.filters.selected.state" md-select-search="vm.filters.master.allStates.length>5"> <md-option ng-value="state.stateid" ng-repeat="state in vm.filters.master.allStates">{{::state.statename}}</md-option> </md-select> </md-input-container> <md-input-container flex> <label>Category</label> <md-icon>bubble_chart</md-icon> <md-select md-on-open="vm.fetchCategories()" placeholder="Category" name="category" ng-model="vm.filters.selected.category" md-select-search="vm.filters.master.allCategories.length>5"> <md-option ng-value="category.categoryId" ng-repeat="category in vm.filters.master.allCategories">{{::category.categoryName}}</md-option> </md-select> </md-input-container> <div align="center"> <md-button ng-click="vm.submit()" ng-disabled="vm.form.$invalid" class="md-raised md-primary">Submit</md-button> </div> </form> </md-content>'),e.put("resources/app/components/analyticsComponents/analyticsParentComponent/analyticsParentComponent.html",'<md-content id="analyticsComponent" layout-padding layout-wrap> <md-card> <md-card-content> <quick-date-range-component on-custom="vm.dateSelectorInstance.openSelector" start-date="vm.startDate" end-date="vm.endDate" date-range="vm.dateRange" on-range-change="vm.setDateRange"></quick-date-range-component> <br> <md-tabs style="border-bottom: 1px solid hotpink" md-center-tabs md-selected="vm.selectedIndex"> <md-tab ng-repeat="comp in vm.components" ng-click="vm.changeComponent(comp.name)" id="tab5"> <md-tab-label> <md-icon style="margin-right: 10px">{{::comp.icon}}</md-icon> {{::comp.display}} </md-tab-label> </md-tab> </md-tabs> <br> <analytics-dashboard-component ng-if="vm.currentComponent == \'dashboard\'" start-date="vm.startDate" end-date="vm.endDate"></analytics-dashboard-component> <analytics-temporal-component status="vm.status" ng-if="vm.currentComponent == \'temporal\'" start-date="vm.startDate" end-date="vm.endDate"> </analytics-temporal-component> <analytics-depts-component ng-if="vm.currentComponent == \'department\'" start-date="vm.startDate" end-date="vm.endDate"></analytics-depts-component> <analytics-demog-component ng-if="vm.currentComponent == \'demographic\'" start-date="vm.startDate" end-date="vm.endDate"></analytics-demog-component> <g-analytics-component start-date="vm.startDate" end-date="vm.endDate" ng-if="vm.currentComponent == \'gAnalytics\'"></g-analytics-component> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/analyticsComponents/analyticsDemogComponent/analyticsDemogComponent.html",'<div> <section layout="row" layout-wrap layout-gt-sm="row" layout-align="center center"> <md-button flex flex-gt-sm="15" ng-click="vm.changeCriteria(criteria)" style="padding: 0 10px" class="no-margin middle button-group" ng-class="{\'selected\': vm.selectedCriteria==criteria }" ng-repeat="criteria in ::vm.criterias"><md-icon style="font-size:22px;margin-right: 3px">{{::criteria.icon}}</md-icon><span hide show-gt-sm style="font-size:14px"> {{::criteria.text}}</span><md-tooltip hide-gt-sm md-direction="bottom">{{::criteria.text}}</md-tooltip></md-button> </section> <br> <div promise-loader="vm.getDataPromise" error-text="No Data Found!" text="Loading Data.."></div> <div promise-hider="vm.getDataPromise"> <highchart-component sortable="true" on-series-click="vm.onSeriesClick" fullscreen-button="true" for-analytics="true" json="vm.json"></highchart-component> <div promise-loader="vm.getSubDataPromise" ng-show="vm.getSubDataPromise" error-text="No Data Found!" text="Loading Data.."></div> <div promise-hider="vm.getSubDataPromise"> <highchart-component sortable="true" fullscreen-button="true" for-analytics="true" ng-show="vm.sub.ageJson" json="vm.sub.ageJson"></highchart-component> <highchart-component sortable="true" fullscreen-button="true" for-analytics="true" ng-show="vm.sub.genderJson" json="vm.sub.genderJson"></highchart-component> <highchart-component sortable="true" fullscreen-button="true" for-analytics="true" ng-show="vm.sub.qualJson" json="vm.sub.qualJson"></highchart-component> <highchart-component sortable="true" fullscreen-button="true" for-analytics="true" ng-show="vm.sub.occupJson" json="vm.sub.occupJson"></highchart-component> <highchart-component sortable="true" fullscreen-button="true" for-analytics="true" ng-show="vm.sub.districtJson" json="vm.sub.districtJson"></highchart-component> </div> </div> </div>'),e.put("resources/app/components/analyticsComponents/analyticsTemporalComponent/analyticsTemporalComponent.html",'<div> <div promise-loader="vm.getDataPromise" text="Loading Data.." error-text="No Data Found!"></div> <div promise-hider="vm.getDataPromise"> <highchart-component fullscreen-button="true" for-analytics="true" json="vm.jsons.daily"></highchart-component> <highchart-component fullscreen-button="true" for-analytics="true" json="vm.jsons.weekly"></highchart-component> <highchart-component fullscreen-button="true" for-analytics="true" json="vm.jsons.monthly"></highchart-component> </div> </div>'),e.put("resources/app/components/analyticsComponents/gAnalyticsComponent/gAnalyticsComponent.html",'<div promise-loader="vm.checkingGAStatusPromise" text="Loading Google Analytics.."></div> <div promise-hider="vm.checkingGAStatusPromise" layout-align="center" layout="row" layout-wrap ng-show="!vm.isLoggedInGoogle"> <p flex="100" layout="row" layout-align="center">To View Google Analytics, you need to sign in to Google account linked with UMANG analytics.</p> <md-button flex="none" is-busy="vm.loginToGooglePromise" ng-click="vm.loginGoogle()" class="md-raised md-primary"> <md-icon class="fa fa-google"></md-icon> Login and Authorize</md-button> </div> <div promise-hider="vm.checkingGAStatusPromise" ng-show="vm.isLoggedInGoogle"> <section layout="row" layout-wrap layout-gt-sm="row" layout-align="center center"> <md-button flex flex-gt-sm="none" ng-click="vm.changeView(view)" style="padding: 0 10px" class="no-margin middle button-group" ng-class="{\'selected\': vm.selectedView==view }" ng-repeat="view in ::vm.views"> <md-icon style="font-size:20px;margin-right: 3px" class="fa {{::view.icon}}"></md-icon><span hide show-gt-sm style="font-size:14px"> {{::view.text}}</span> <md-tooltip hide-gt-sm md-direction="bottom">{{::view.text}}</md-tooltip> </md-button> </section> <br> <section layout="row" layout-wrap layout-gt-sm="row" layout-align="center center"> <md-button flex flex-gt-sm="15" ng-click="vm.changeCriteria(criteria)" style="padding: 0 10px" class="no-margin middle button-group" ng-class="{\'selected\': vm.selectedCriteria==criteria }" ng-repeat="criteria in ::vm.criterias"> <md-icon style="font-size:22px;margin-right: 3px">{{::criteria.icon}}</md-icon><span hide show-gt-sm style="font-size:14px"> {{::criteria.text}}</span> <md-tooltip hide-gt-sm md-direction="bottom">{{::criteria.text}}</md-tooltip> </md-button> </section> <br> <div promise-loader="vm.getDataPromise" error-text="No Data Found!" text="Loading Data.."></div> <div ng-show="vm.selectedCriteria.value==\'state\'" promise-hider="vm.getDataPromise"> <highchart-component sortable="true" on-series-click="vm.getCityData" fullscreen-button="true" for-analytics="true" json="vm.json"></highchart-component> <div promise-loader="vm.getSubDataPromise" error-text="No Data Found!" text="Loading Data.."></div> <highchart-component sortable="true" ng-if="vm.subJson" fullscreen-button="true" for-analytics="true" json="vm.subJson"></highchart-component> </div> <div ng-show="vm.selectedCriteria.value==\'screen\'" promise-hider="vm.getDataPromise"> <analytics-table-component export-name="Screen-Distribution" export="true" table="vm.screenTable"></analytics-table-component> </div> <div ng-show="vm.selectedCriteria.value==\'device\'" promise-hider="vm.getDataPromise"> <analytics-table-component export-name="Device-Distribution" export="true" table="vm.deviceTable"></analytics-table-component> </div> </div>'),e.put("resources/app/components/analyticsComponents/analyticsTableComponent/analyticsTableComponent.html",'<div> <table class="table table-striped"> <thead> <tr> <th ng-repeat="column in vm.table.columns track by $index"> <strong>{{column}}</strong> <md-icon style="float:right; cursor: pointer" ng-click="vm.exportToCSV()" ng-if="vm.export && $last">file_download<md-tooltip md-direction="bottom" md-visible="tooltipVisible">Export to CSV</md-tooltip></md-icon> </th> </tr> </thead> <tbody> <tr ng-repeat="row in vm.table.rows track by $index"> <td ng-repeat="columnValue in row track by $index">{{columnValue}}</td> </tr> </tbody> </table> </div>'),e.put("resources/app/components/appProfileComponent/latLongComponent/latLongComponent.html",'<md-content layout-padding layout-wrap> <form name="vm.latLongForm" layout="column" layout-align="center"> <md-input-container> <label>Latitude</label> <md-icon>explore</md-icon> <input focus-on-init type="text" name="lat" ng-required="true" ng-model="vm.lat" maxlength="20" md-maxlength="20"> <div ng-messages="vm.latLongForm.lat.$error"> <div ng-message="required">Latitude is required.</div> </div> </md-input-container> <md-input-container> <label>Longitude</label> <md-icon style="transform: scaleX(-1)">explore</md-icon> <input type="text" name="long" ng-required="true" ng-model="vm.long" maxlength="20" md-maxlength="20"> <div ng-messages="vm.latLongForm.long.$error"> <div ng-message="required">Latitude is required.</div> </div> </md-input-container> <div align="center"> <md-button class="md-raised" ng-click="vm.cancelAction()">Cancel</md-button> <md-button type="submit" is-busy="vm.submitPromise" ng-disabled="vm.latLongForm.$invalid || (vm.latInit==vm.lat && vm.longInit==vm.long)" ng-click="vm.submitAction()" class="md-raised md-primary">Save</md-button> </div> </form> </md-content>'),e.put("resources/app/components/appProfileComponent/logoChangeComponent/logoChangeComponent.html",'<md-content layout-padding layout-wrap> <form name="vm.logoChangeForm" layout="column" layout-align="center"> <div ng-hide="vm.showUploader" align="center" class="margin-10"> <div style="margin: 15px" class="md-headline">Change {{vm.app.appname}} Logo</div> <p class="small-grey-text">Before changing the logo, we recommend you to download the current logo if new logo doesn\'t fit well.</p> <md-button class="md-raised" ng-click="vm.cancelAction()">Cancel</md-button> <md-button class="md-button md-raised md-primary" md-theme="selfcare" is-busy="vm.downloadPromise" ng-click="vm.downloadLogo()">Download and Change</md-button> </div> <md-input-container ng-show="vm.showUploader" class="no-margin-top"> <image-file align="center" ng-change="vm.validateImage()" no-preview="true" title="Attach New {{vm.app.appname}} Logo" name="logo" ng-required="true" ng-model="vm.logo"></image-file> <div align="center" ng-messages="vm.logoChangeForm.logo.$error" ng-show="vm.logoChangeForm.logo.$dirty"> <div ng-message="required">New Logo is required.</div> <div ng-message="notImage">Please select an Image File (Only {{::vm.allowedFileExtns.join(\' or \')}}).</div> <div ng-message="dimensions">Image dimensions are not correct.</div> <div ng-message="size">Image file size greater than {{::vm.maxFileSize}} KB.</div> </div> </md-input-container> <div align="center" ng-show="vm.showUploader"> <p class="small-grey-text">Required Image Dimensions: <b>{{::vm.imageWidth}} x {{::vm.imageHeight}}</b> pixels. Max Size: <b>{{::vm.maxFileSize}} KB</b></p> <md-button class="md-raised" ng-click="vm.cancelAction()">Cancel</md-button> <md-button type="submit" is-busy="vm.submitPromise" ng-disabled="vm.logoChangeForm.$invalid" ng-click="vm.submitAction()" class="md-raised md-primary">Save</md-button> </div> </form> </md-content> '),e.put("resources/app/components/attentionScreenComponents/attScreenComponent/attScreenComponent.html",'<md-card ng-if="::vm.screen" flex> <img image-loader="33" preview-image class="md-card-image" ng-src="{{vm.screen.imageUrl}}"> <md-card-content flex> <h2 align="center">{{::vm.screen.title}}</h2> <p>{{::vm.screen.description}}</p> </md-card-content> <div class="md-actions" layout="row" layout-align="center center"> <md-button class="md-raised" ng-disabled="true">{{::vm.screen.buttonText}}</md-button> </div> <md-divider></md-divider> <div align="center"> <h4 ng-show="vm.active">{{vm.date|date}}</h4> <md-button class="md-primary md-raised" ng-if="::vm.active" is-busy="vm.deactivatePromise" ng-click="vm.deactivateScreen()"><md-icon>timer_off</md-icon> Deactivate</md-button> <md-button class="md-primary md-raised" ng-if="::!vm.active" is-busy="vm.schedulePromise" ng-click="vm.scheduleScreen()"><md-icon>access_time</md-icon> Schedule</md-button> </div> </md-card> <md-card ng-if="!vm.screen" layout-padding flex layout-align="center center"> <h4 align="center">No Screen active on {{vm.date|date}}</h4> </md-card>'),e.put("resources/app/components/appProfileComponent/workingHoursComponent/workingHoursComponent.html",'<md-content layout-padding layout-wrap> <div style="margin: 10px" class="md-headline">{{::vm.title}}</div> <form name="vm.whForm" layout="row" layout-wrap> <div layout="row" layout-align="space-around" flex="100" layout-wrap> <md-input-container flex="100" flex-gt-sm="45"> <label>Start Day</label> <md-icon>today</md-icon> <md-select ng-required="true" placeholder="Start Day" name="startDay" ng-model="vm.wh.startDay"> <md-option ng-value="$index" ng-repeat="day in vm.days">{{::day}}</md-option> </md-select> <div ng-messages="vm.whForm.startDay.$error"> <div ng-message="required">Start Day is required.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="45"> <label>End Day</label> <md-icon style="transform: scaleX(-1)">today</md-icon> <md-select ng-required="true" placeholder="End Day" ng-change="vm.validateEndDay()" name="endDay" ng-model="vm.wh.endDay"> <md-option ng-value="$index" ng-repeat="day in vm.days">{{::day}}</md-option> </md-select> <div ng-messages="vm.whForm.endDay.$error"> <div ng-message="required">End Day is required.</div> <div ng-message="sameDay">End Day cannot be same as Start Day.</div> </div> </md-input-container> </div> <div layout="row" layout-align="space-around" flex="100" layout-wrap> <md-input-container flex="100" flex-gt-sm="45"> <label>Start Time</label> <md-icon style="transform: rotate(-95deg)">access_time</md-icon> <input type="text" ng-pattern="vm.timePattern" ng-model="vm.wh.startTime" name="startTime" required> <div ng-messages="vm.whForm.startTime.$error"> <div ng-message="required">Start Time is required!</div> <div ng-message="pattern">Please enter time in valid format!</div> </div> <div style="padding-top: 10px;font-size: 14px;color: grey">HH:MM (24 Hours)</div> </md-input-container> <md-input-container flex="100" flex-gt-sm="45"> <label>End Time</label> <md-icon style="transform: rotate(-181deg)">access_time</md-icon> <input type="text" ng-pattern="vm.timePattern" ng-model="vm.wh.endTime" name="endTime" required> <div ng-messages="vm.whForm.endTime.$error"> <div ng-message="required">End Time is required!</div> <div ng-message="pattern">Please enter time in valid format!</div> </div> <div style="padding-top: 10px;font-size: 14px;color: grey">HH:MM (24 Hours)</div> </md-input-container> </div> <div align="center" flex="100"> <md-button class="md-raised" ng-click="vm.cancelAction()">Cancel</md-button> <md-button type="submit" is-busy="vm.submitPromise" ng-disabled="vm.whForm.$invalid" ng-click="vm.submitAction()" class="md-raised md-primary">{{::vm.ok}}</md-button> </div> </form> </md-content>'),e.put("resources/app/components/attentionScreenComponents/viewAttScreensComponent/viewAttScreensComponent.html",'<md-content layout-padding layout-wrap> <md-card> <md-card-title> <div class="md-title" md-truncate><md-icon>playlist_play</md-icon> Active Attention Screens</div> </md-card-title> <md-card-content> <div promise-loader="vm.fetchActivePromise" text="Loading Active Attention Screens.."></div> <div promise-hider="vm.fetchActivePromise" layout="column" layout-gt-sm="row"> <att-screen-component on-schedule="vm.fetchActiveScreens" layout="colmun" flex="100" active="true" date="item.date" screen="item.screen" ng-repeat="item in vm.activeScreens"></att-screen-component> </div> <div layout="row" layout-align="space-between"> <md-button class="md-primary" ng-click="vm.changeDates(false)" ng-disabled="vm.disableButtons || vm.disablePrevious"> <md-icon>navigate_before</md-icon> <span>Previous 3 Dates</span> </md-button> <md-button class="md-primary" ng-disabled="vm.disableButtons" ng-click="vm.changeDates(true)"> <span>Next 3 Dates</span> <md-icon>navigate_next</md-icon> </md-button> </div> </md-card-content> </md-card> <md-card> <md-card-title layout="row" layout-align="space-between center"> <div class="md-title" md-truncate><md-icon>playlist_add_check</md-icon> Uploaded Attention Screens</div> <md-button flex="none" class="md-raised md-primary" ui-sref="selfcare.attention.upload"><md-icon>cloud_upload</md-icon> Upload New</md-button> </md-card-title> <md-card-content> <div promise-loader="vm.fetchScreensPromise" text="Loading Uploaded Attention Screens.."></div> <div promise-hider="vm.fetchScreensPromise" layout="column" layout-gt-sm="row"> <att-screen-component on-schedule="vm.fetchActiveScreens" layout="column" flex="100" screen="screen" ng-repeat="screen in vm.screens"></att-screen-component> </div> <pagination-component fetch-on-init="true" hide-page-size="true" hide-page-num="true" default-page-size="3" on-fetch="vm.fetchAllScreens"></pagination-component> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/attentionScreenComponents/uploadAttScreenComponent/uploadAttScreenComponent.html",'<md-content layout-padding layout-wrap layout-padding> <md-card> <md-card-title> <div class="md-title">Upload Attention Screen</div> </md-card-title> <md-card-content> <form name="vm.uploadForm" layout="row" layout-wrap> \x3c!-- <md-input-container flex="100">\n                    <label>Screen Name</label>\n                    <md-icon>short_text</md-icon>\n                    <input type="text" ng-model="vm.comment" name="screenName" required>\n                    <div ng-messages="vm.uploadForm.screenName.$error">\n                        <div ng-message="required">Screen name is required.</div>\n                    </div>\n                </md-input-container> --\x3e <md-input-container flex="100" class="no-margin-bottom"> <label>Title</label> <md-icon>short_text</md-icon> <input md-maxlength="60" type="text" ng-model="vm.title" name="title" required> <div ng-messages="vm.uploadForm.title.$error"> <div ng-message="required">Screen title is required.</div> <div ng-message="md-maxlength">Screen title can not be more than 60 characters.</div> </div> </md-input-container> <md-input-container flex="100" class="no-margin-bottom"> <label>Description</label> <md-icon>description</md-icon> <textarea md-maxlength="250" type="text" ng-model="vm.description" name="description" rows="1" required></textarea> <div ng-messages="vm.uploadForm.description.$error"> <div ng-message="required">Screen description is required.</div> <div ng-message="md-maxlength">Screen description can not be more than 250 characters.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>Action on Button Click <md-tooltip md-direction="bottom">This action will be performed when user clicks on Action Button.</md-tooltip></label> <md-icon>touch_app</md-icon> <md-select ng-model="vm.actionType" name="actionType" ng-init="vm.actionType=\'noAction\'"> <md-option value="noAction">No Action</md-option> <md-option value="browser">Open Browser</md-option> <md-option value="service">Redirect to App</md-option> </md-select> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>Action Button Text</label> <md-icon>text_fields</md-icon> <input type="text" ng-model="vm.buttonText" name="buttonText" required> <div ng-messages="vm.uploadForm.buttonText.$error"> <div ng-message="required">Action button text is required.</div> </div> </md-input-container> <md-input-container flex="100" ng-if="vm.actionType==\'browser\'"> <label>Redirect URL</label> <md-icon>link</md-icon> <input clear-on-destroy type="text" ng-model="vm.redirectUrl" required name="redirectUrl" ng-pattern="vm.urlPattern"> <div ng-messages="vm.uploadForm.redirectUrl.$error"> <div ng-message="required">Redirect URL is required.</div> <div ng-message="ng-pattern">Please enter a valid URL.</div> </div> </md-input-container> <md-input-container flex="100" ng-if="vm.actionType==\'service\'"> <label>Redirect to App</label> <md-icon>link</md-icon> <md-select clear-on-destroy required ng-model="vm.redirectApp" md-select-search="vm.allApps.length>5" name="redirectApp"> <md-option ng-value="app" ng-repeat="app in vm.allApps">{{::app.appname}}</md-option> </md-select> <div ng-messages="vm.uploadForm.redirectApp.$error"> <div ng-message="required">Redirect App is required.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="70" class="no-margin"> <image-file ng-change="vm.validateImage()" title="Attach Attention Screen Image" name="image" ng-required="true" ng-model="vm.image"></image-file> <p ng-hide="vm.uploadForm.image.$valid" class="small-grey-text">Required Image Dimensions: <b>{{::vm.imageDimensions.minWidth}} x {{::vm.imageDimensions.minHeight}}</b> pixels to <b>{{::vm.imageDimensions.maxWidth}} x {{::vm.imageDimensions.maxHeight}}</b> pixels. Max Size: <b>{{::vm.maxFileSize}} KB</b></p> <div ng-messages="vm.uploadForm.image.$error" ng-show="vm.uploadForm.image.$dirty"> <div ng-message="required">Image is required.</div> <div ng-message="notImage">Please select an Image File (Only {{::vm.allowedFileExtns.join(\' or \')}}).</div> <div ng-message="dimensions">Image dimensions are not correct.</div> <div ng-message="size">Image file size greater than {{::vm.maxFileSize}} KB.</div> </div> </md-input-container> <div flex="100" flex-gt-sm="30" align="center"> <div class="small-grey-text">Attention Screen Help</div> <img style="box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2)" src="resources/assets/images/attScreen.jpg" height="200px" preview-image> </div> <div align="center" flex="100"> <md-button is-busy="vm.uploadPromise" type="submit" ng-click="vm.upload()" ng-disabled="vm.uploadForm.$invalid" class="md-raised md-primary"> <md-icon>cloud_upload</md-icon> Upload</md-button> </div> </form> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/bannerComponents/approveBannersComponent/approveBannersComponent.html",'<md-content> <div layout-align="center center" ng-show="vm.state" layout="row" layout-wrap flex-gt-sm="100"> <md-radio-group flex="100" class="margin-10" ng-change="vm.getAllBanners()" flex ng-model="vm.stateRadio" layout="row" layout-align="center center"> <md-radio-button ng-click="vm.state=\'99\'" value="central" class="md-primary">Central</md-radio-button> <md-radio-button ng-click="vm.state=\'\'" value="state" class="md-primary">State</md-radio-button> </md-radio-group> <md-input-container flex="nogrow" ng-if="vm.stateRadio==\'state\'"> <label>State</label> <md-icon>pin_drop</md-icon> <md-select md-on-open="vm.fetchStates()" ng-change="vm.getAllBanners()" placeholder="State" ng-required="vm.stateRadio==\'state\'" name="state" ng-model="vm.state" md-select-search="vm.allStates.length>5"> <md-option ng-value="state.stateid" ng-repeat="state in vm.allStates">{{::state.statename}}</md-option> </md-select> </md-input-container> </div> <div promise-loader="vm.getAllBannersPromise" text="Loading Banners.."></div> <div layout="row" layout-wrap> <div promise-hider="vm.getAllBannersPromise" layout-gt-sm="row" flex="100" layout="column"> <md-card flex-gt-sm="100" layout-padding> <div> <div>Active Banners <md-icon class="cursor-pointer info-icon"> <md-tooltip md-direction="bottom">Maximum 5 can be a active at a time.</md-tooltip>info</md-icon> </div> <br> <md-divider></md-divider> </div> <md-card-content class="no-padding"> <div ng-hide="vm.activeBanners.length" align="center" class="small-grey-text">No Active Banners!</div> <md-card ng-repeat="banner in vm.activeBanners"> <img image-loader="25" ng-src="{{banner.bannerURL}}" preview-image width="100%" class=""> <md-card-content layout="row" layout-align="center center"> <md-button is-busy="banner.moveUpPromise" ng-click="vm.changePriority($index, $index-1)" ng-disabled="$first" class="md-fab md-mini md-primary"> <md-tooltip md-direction="bottom">Move Up</md-tooltip> <md-icon>keyboard_arrow_up</md-icon> </md-button> <md-button is-busy="banner.moveDownPromise" ng-click="vm.changePriority($index, $index+1)" ng-disabled="$last" class="md-fab md-mini md-primary"> <md-tooltip md-direction="bottom">Move Down</md-tooltip> <md-icon>keyboard_arrow_down</md-icon> </md-button> <md-button is-busy="banner.removePromise" ng-click="vm.removeFromActive(banner)" class="md-fab md-mini md-warn"> <md-tooltip md-direction="bottom">Remove from Active</md-tooltip> <md-icon>remove</md-icon> </md-button> <md-button is-busy="banner.viewDetailsPromise" ng-click="vm.viewDetails(banner)" class="md-fab md-mini md-primary"> <md-tooltip md-direction="bottom">View Details</md-tooltip> <md-icon>list</md-icon> </md-button> </md-card-content> </md-card> </md-card-content> </md-card> <md-card flex-gt-sm="100" layout-padding> <div> <div>Inactive Banners <md-icon class="cursor-pointer info-icon"> <md-tooltip md-direction="bottom">These banners were active in past. Can be moved to active if less than 5 are active.</md-tooltip>info</md-icon> </div> <br> <md-divider></md-divider> </div> <md-card-content> <div ng-hide="vm.inactiveBanners.length" align="center" class="small-grey-text">No Inactive Banners!</div> <md-card ng-repeat="banner in vm.inactiveBanners"> <img image-loader="25" ng-src="{{banner.bannerURL}}" preview-image width="100%" class=""> <md-card-content layout="row" layout-align="center center"> <md-button is-busy="banner.addingPromise" ng-click="vm.addToActive(banner)" ng-disabled="vm.activeBanners.length>4" class="md-fab md-mini custom-green"> <md-tooltip md-direction="bottom">Add to Active</md-tooltip> <md-icon>add</md-icon> </md-button> <md-button is-busy="banner.viewDetailsPromise" ng-click="vm.viewDetails(banner)" class="md-fab md-mini md-primary"> <md-tooltip md-direction="bottom">View Details</md-tooltip> <md-icon>list</md-icon> </md-button> </md-card-content> </md-card> </md-card-content> </md-card> <md-card flex-gt-sm="100" layout-padding> <div> <div>Requested Banners <md-icon class="cursor-pointer info-icon"> <md-tooltip md-direction="bottom">These banners are requested by users. Can be moved to active if less than 5 are active.</md-tooltip>info</md-icon> </div> <br> <md-divider></md-divider> </div> <md-card-content> <div ng-hide="vm.requestedBanners.length" align="center" class="small-grey-text">No Requested Banners!</div> <md-card ng-repeat="banner in vm.requestedBanners"> <img image-loader="25" ng-src="{{banner.bannerURL}}" preview-image width="100%" class=""> <md-card-content layout="row" layout-align="center center"> <md-button is-busy="banner.addingPromise" ng-disabled="vm.activeBanners.length>4" ng-click="vm.addToActive(banner)" class="md-fab md-mini custom-green"> <md-tooltip md-direction="bottom">Add to Active</md-tooltip> <md-icon>add</md-icon> </md-button> <md-button ng-click="vm.viewUploaderComment(banner)" class="md-fab md-mini md-primary"> <md-tooltip md-direction="bottom">View Uploader\'s Comment</md-tooltip> <md-icon>comment</md-icon> </md-button> <md-button ng-click="vm.rejectBanner(banner)" class="md-fab md-mini md-warn"> <md-tooltip md-direction="bottom">Reject Banner</md-tooltip> <md-icon>close</md-icon> </md-button> <md-button is-busy="banner.viewDetailsPromise" ng-click="vm.viewDetails(banner)" class="md-fab md-mini md-primary"> <md-tooltip md-direction="bottom">View Details</md-tooltip> <md-icon>list</md-icon> </md-button> </md-card-content> </md-card> </md-card-content> </md-card> </div> </div> </md-content>'),e.put("resources/app/components/bannerComponents/viewAllLangBannersComponent/viewAllLangBannersComponent.html",'<md-content layout-padding layout-wrap> <md-card ng-repeat="banner in vm.banners" class="no-padding" layout-wrap layout="column"> <img image-loader="25" ng-src="{{banner.bannerURL}}" preview-image> <md-card-content> <div align="center"> <span>{{::banner.langaugeObj.language}}</span> </div> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/bannerComponents/uploadBannerComponent/uploadBannerComponent.html",'<md-content layout-padding> <md-card> <md-card-title> <div class="md-title">Upload Banners</div> </md-card-title> <md-card-content> <form name="vm.uploadForm" layout="column"> <md-radio-group ng-show="vm.stateRadio" class="margin-10" flex ng-model="vm.stateRadio" layout="row" layout-align="center center"> <md-radio-button ng-click="vm.state=\'99\'" value="central" class="md-primary">Central</md-radio-button> <md-radio-button ng-click="vm.state=\'\'" value="state" class="md-primary">State</md-radio-button> </md-radio-group> <md-input-container ng-show="vm.stateRadio" flex ng-if="vm.stateRadio==\'state\'"> <label>State</label> <md-icon>pin_drop</md-icon> <md-select md-on-open="vm.fetchStates()" placeholder="State" ng-required="vm.stateRadio==\'state\'" name="state" ng-model="vm.state" md-select-search="vm.allStates.length>5"> <md-option ng-value="state.stateid" ng-repeat="state in vm.allStates">{{::state.statename}}</md-option> </md-select> <div ng-messages="vm.uploadForm.state.$error"> <div ng-message="required">State is required.</div> </div> </md-input-container> <md-input-container> <label>Banner Name</label> <md-icon>short_text</md-icon> <input type="text" ng-model="vm.bannerName" name="bannerName" required> <div ng-messages="vm.uploadForm.bannerName.$error"> <div ng-message="required">Banner name is required.</div> </div> </md-input-container> <md-input-container> <label>Comment</label> <md-icon>description</md-icon> <input type="text" ng-model="vm.comment" name="comment" required> <div ng-messages="vm.uploadForm.comment.$error"> <div ng-message="required">Banner comment is required.</div> </div> </md-input-container> <md-input-container> <label>Action on Banner Click <md-tooltip md-direction="bottom">This action will be performed when user clicks on banner.</md-tooltip> </label> <md-icon>touch_app</md-icon> <md-select ng-model="vm.actionType" name="actionType"> <md-option value="noAction">No Action</md-option> <md-option value="browser">Open Browser</md-option> <md-option value="service">Redirect to App</md-option> </md-select> </md-input-container> <md-input-container ng-if="vm.actionType==\'browser\'"> <label>Redirect URL</label> <md-icon>link</md-icon> <input clear-on-destroy type="text" ng-model="vm.redirectUrl" required name="redirectUrl" ng-pattern="vm.urlPattern"> <div ng-messages="vm.uploadForm.redirectUrl.$error"> <div ng-message="required">Redirect URL is required.</div> <div ng-message="pattern">Please enter a valid URL.</div> </div> </md-input-container> <md-input-container ng-if="vm.actionType==\'service\'"> <label>Redirect to App</label> <md-icon>apps</md-icon> <md-select clear-on-destroy required ng-model="vm.redirectApp" md-on-close="vm.appFilter=\'\'" name="redirectApp"> <md-select-header ng-if="vm.allApps.length>5" search="vm.appFilter"> </md-select-header> <md-option ng-value="app" ng-repeat="app in vm.allApps |\n              filter:vm.appFilter">{{::app.appname}}</md-option> </md-select> <div ng-messages="vm.uploadForm.redirectApp.$error"> <div ng-message="required">Redirect App is required.</div> </div> </md-input-container> <div ng-repeat="lang in vm.bannerLanguages"> <md-input-container> <image-file ng-change="vm.validateImage(lang.langBanner, vm.uploadForm[lang.id])" title="Attach Banner for {{lang.language}}" name="{{lang.id}}" ng-required="true" ng-model="lang.langBanner"></image-file> <p ng-hide="vm.uploadForm[lang.id].$valid" class="small-grey-text">Required Image Dimensions: <b>{{::vm.imageWidth}} x {{::vm.imageHeight}}</b> pixels. Max Size: <b>{{::vm.maxFileSize}} KB</b></p> <div ng-messages="vm.uploadForm[lang.id].$error" ng-show="vm.uploadForm[lang.id].$dirty"> <div ng-message="required">Image is required.</div> <div ng-message="notImage">Please select an Image File (Only {{::vm.allowedFileExtns.join(\' or \')}}).</div> <div ng-message="dimensions">Image dimensions are not correct.</div> <div ng-message="size">Image file size greater than {{::vm.maxFileSize}} KB.</div> </div> </md-input-container> </div> <div layout="column" layout-align-gt-sm="start center" layout-gt-sm="row" layout-wrap ng-show="vm.allLanguages.length"> <md-button class="md-raised md-primary" ng-click="vm.attachAnotherBanner()" ng-disabled="!vm.selectedLanguage"> <md-icon>add_circle</md-icon> Add another banner in </md-button> <md-input-container flex="none"> <label>Select Language</label> <md-select ng-model="vm.selectedLanguage"> <md-option ng-value="lang" ng-repeat="lang in vm.allLanguages">{{ lang.language }}</md-option> </md-select> </md-input-container> </div> <div align="center" class="margin-10"> <md-checkbox ng-model="variable" required name="acceptance"> We Approve Banner </md-checkbox> </div> <div align="center"> <md-button is-busy="vm.uploadPromise" type="submit" ng-click="vm.uploadnRequest()" ng-disabled="vm.uploadForm.$invalid" class="md-raised md-primary"> <md-icon>cloud_upload</md-icon> Upload & Request</md-button> </div> </form> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/bannerComponents/viewMyBannersComponent/viewMyBannersComponent.html",'<md-content> <div layout-align="center center" ng-show="vm.stateRadio" layout="row" layout-wrap flex-gt-sm="100"> <md-radio-group flex="100" class="margin-10" ng-change="vm.getMyBanners()" flex ng-model="vm.stateRadio" layout="row" layout-align="center center"> <md-radio-button ng-click="vm.state=\'99\'" value="central" class="md-primary">Central</md-radio-button> <md-radio-button ng-click="vm.state=\'\'" value="state" class="md-primary">State</md-radio-button> </md-radio-group> <md-input-container flex="nogrow" ng-if="vm.stateRadio==\'state\'"> <label>State</label> <md-icon>pin_drop</md-icon> <md-select md-on-open="vm.fetchStates()" ng-change="vm.getMyBanners()" placeholder="State" ng-required="vm.stateRadio==\'state\'" name="state" ng-model="vm.state" md-select-search="vm.allStates.length>5"> <md-option ng-value="state.stateid" ng-repeat="state in vm.allStates">{{::state.statename}}</md-option> </md-select> </md-input-container> </div> <div class="margin-10" promise-loader="vm.getBannersPromise" text="Loading your banners.."></div> <div promise-hider="vm.getBannersPromise" layout-gt-sm="row" flex="100" layout="column"> <md-card flex-gt-sm="100" layout-padding> <div> <div>Active Banners <md-icon class="cursor-pointer info-icon"> <md-tooltip md-direction="bottom">Banners that are active on UMANG.</md-tooltip>info</md-icon> </div> <br> <md-divider></md-divider> </div> <md-card-content class="no-padding"> <div ng-hide="vm.activeBanners.length" align="center" class="small-grey-text">No Active Banners!</div> <md-card ng-repeat="banner in vm.activeBanners"> <img image-loader="25" ng-src="{{banner.bannerURL}}" preview-image width="100%"> <md-card-content layout="row" layout-align="center center"> <md-button is-busy="banner.viewDetailsPromise" ng-click="vm.viewDetails(banner)" class="md-fab md-mini md-primary"> <md-tooltip md-direction="bottom">View Details</md-tooltip> <md-icon>list</md-icon> </md-button> </md-card-content> </md-card> </md-card-content> </md-card> <md-card flex-gt-sm="100" layout-padding> <div> <div>Inactive Banners <md-icon class="cursor-pointer info-icon"> <md-tooltip md-direction="bottom">These banners were active in past.</md-tooltip>info</md-icon> </div> <br> <md-divider></md-divider> </div> <md-card-content> <div ng-hide="vm.inactiveBanners.length" align="center" class="small-grey-text">No Inactive Banners!</div> <md-card ng-repeat="banner in vm.inactiveBanners"> <img image-loader="25" ng-src="{{banner.bannerURL}}" preview-image width="100%"> <md-card-content layout="row" layout-align="center center"> <md-button is-busy="banner.deletePromise" ng-click="vm.deleteBanner(vm.inactiveBanners, banner)" class="md-fab md-mini md-warn"> <md-tooltip md-direction="bottom">Delete Banner</md-tooltip> <md-icon>delete</md-icon> </md-button> <md-button ng-click="vm.reRequestBanner(banner)" class="md-fab md-mini md-primary"> <md-tooltip md-direction="bottom">Re-request Banner</md-tooltip> <md-icon>autorenew</md-icon> </md-button> <md-button is-busy="banner.viewDetailsPromise" ng-click="vm.viewDetails(banner)" class="md-fab md-mini md-primary"> <md-tooltip md-direction="bottom">View Details</md-tooltip> <md-icon>list</md-icon> </md-button> </md-card-content> </md-card> </md-card-content> </md-card> <md-card flex-gt-sm="100" layout-padding> <div> <div>Requested Banners <md-icon class="cursor-pointer info-icon"> <md-tooltip md-direction="bottom">Banners on which admin action is pending.</md-tooltip>info</md-icon> </div> <br> <md-divider></md-divider> </div> <md-card-content> <div ng-hide="vm.requestedBanners.length" align="center" class="small-grey-text">No Requested Banners!</div> <md-card ng-repeat="banner in vm.requestedBanners"> <img image-loader="25" ng-src="{{banner.bannerURL}}" preview-image width="100%"> <md-card-content layout="row" layout-align="center center"> <md-button is-busy="banner.deletePromise" ng-click="vm.deleteBanner(vm.requestedBanners, banner)" class="md-fab md-mini md-warn"> <md-tooltip md-direction="bottom">Delete Banner</md-tooltip> <md-icon>delete</md-icon> </md-button> <md-button is-busy="banner.viewDetailsPromise" ng-click="vm.viewDetails(banner)" class="md-fab md-mini md-primary"> <md-tooltip md-direction="bottom">View Details</md-tooltip> <md-icon>list</md-icon> </md-button> </md-card-content> </md-card> </md-card-content> </md-card> <md-card flex-gt-sm="100" layout-padding> <div> <div>Rejected Banners <md-icon class="cursor-pointer info-icon"> <md-tooltip md-direction="bottom">These banners have been rejected by admin.</md-tooltip>info</md-icon> </div> <br> <md-divider></md-divider> </div> <md-card-content> <div ng-hide="vm.rejectedBanners.length" align="center" class="small-grey-text">No Rejected Banners!</div> <md-card ng-repeat="banner in vm.rejectedBanners"> <img image-loader="25" ng-src="{{banner.bannerURL}}" preview-image width="100%"> <md-card-content layout="row" layout-align="center center"> <md-button is-busy="banner.deletePromise" ng-click="vm.deleteBanner(vm.rejectedBanners, banner)" class="md-fab md-mini md-warn"> <md-tooltip md-direction="bottom">Delete Banner</md-tooltip> <md-icon>delete</md-icon> </md-button> <md-button ng-click="vm.viewAdminCommnet(banner)" class="md-fab md-mini md-primary"> <md-tooltip md-direction="bottom">View Admin Comment</md-tooltip> <md-icon>comment</md-icon> </md-button> <md-button is-busy="banner.viewDetailsPromise" ng-click="vm.viewDetails(banner)" class="md-fab md-mini md-primary"> <md-tooltip md-direction="bottom">View Details</md-tooltip> <md-icon>list</md-icon> </md-button> </md-card-content> </md-card> </md-card-content> </md-card> </div> </md-content>'),e.put("resources/app/components/campaignComponents/campaignEditorComponent/campaignEditorComponent.html",'<form name="vm.campaignForm" layout="row" layout-wrap layout-padding> <div layout="row" flex="100" layout-wrap layout-align="space-around"> <div flex="95"> <h4><span>Notification Type <md-icon class="cursor-pointer info-icon"><md-tooltip md-direction="bottom">Send notifications on the basis of user\'s app profile using "Profile Mode" or upload file containing mobile number in "File Mode" </md-tooltip> info</md-icon></span> </h4> <md-radio-group ng-disabled="::vm.readOnly" ng-model="vm.extractType" layout="row"> <md-radio-button value="extract" class="md-primary"> Profile Based </md-radio-button> <md-radio-button value="file" class="md-primary"> File Based </md-radio-button> </md-radio-group> <br> </div> <div ng-show="vm.readOnly && vm.extractType==\'file\'"> <md-button ng-click="vm.downloadFile()" is-busy="vm.downloadFilePromise" class="md-fab md-mini custom-green"> <md-tooltip md-direction="bottom">Download File</md-tooltip> <md-icon>file_download</md-icon> </md-button> </div> <div flex="95" ng-hide="::vm.readOnly" ng-if="vm.extractType==\'file\'"> <div layout="column" class="no-padding"> <div layout="row"> <h4>Attach file</h4> <h5 style="padding-left: 10px"><a href="#" ng-click="vm.downloadSample()">(Download Sample File)</a></h5> </div> <span class="small-grey-text">Notifications will be sent only if user is registered on UMANG and is logged in.</span> <label ng-if="!vm.campaignModel.extractFile" for="file" md-ink-ripple="true" class="md-fab calender-bg md-button md-ink-ripple md-container-ignore md-no-float"> <md-tooltip md-direction="bottom" md-visible="tooltipVisible">Attach File</md-tooltip> <md-icon style="color:white">attach_file</md-icon> </label> <label ng-if="vm.campaignModel.extractFile" ng-click="vm.campaignModel.extractFile=\'\'" md-ink-ripple="true" class="md-fab md-warn md-button md-ink-ripple md-container-ignore md-no-float"> <md-tooltip md-direction="bottom" md-visible="tooltipVisible">Remove File</md-tooltip> <md-icon>close</md-icon> </label> <md-input-container class="no-margin" flex="100"> <input accept=".csv" clear-on-destroy type="file" name="extractFile" id="file" file-model ng-model="vm.campaignModel.extractFile" ng-change="vm.selectedFileChange()" required class="file-input-fab"> <div ng-messages="vm.campaignForm.extractFile.$error"> <div ng-message="required"> Extract File is required. </div> <div ng-message="notCSV"> Only .CSV file can be uploaded. </div> </div> </md-input-container> <div ng-if="vm.campaignModel.extractFile && vm.campaignForm.extractFile.$valid"> <h5 class="no-margin-top">Selected File: {{vm.campaignModel.extractFile.name}} ({{vm.campaignModel.extractFile.size/1024|number}} KB)</h5> </div> </div> </div> <md-input-container flex="95"> <label>Notification Title</label> <md-icon class="grey-icon">title</md-icon> <input ng-disabled="::vm.readOnly" md-maxlength="150" maxlength="150" required autocomplete="off" type="text" ng-model="vm.campaignModel.campaignTitle" name="campaignTitle"> <div ng-messages="vm.campaignForm.campaignTitle.$error"> <div ng-message="required"> Notifications Title is required. </div> <div ng-message="md-maxlength"> Maximum allowed title length is 150. </div> </div> </md-input-container> <md-input-container ng-if="vm.extractType!=\'file\'" flex="95"> <label>Message</label> <md-icon class="grey-icon">subtitles</md-icon> <input ng-disabled="::vm.readOnly" clear-on-destroy md-maxlength="500" maxlength="500" required autocomplete="off" type="text" ng-model="vm.campaignModel.campaignSubTitle" name="campaignSubTitle"> <div ng-messages="vm.campaignForm.campaignSubTitle.$error"> <div ng-message="required"> Message is required. </div> <div ng-message="md-maxlength"> Maximum allowed message length is 500. </div> </div> </md-input-container> <div flex="95" layout="row" layout-wrap style="margin-bottom:18px"> <md-input-container flex="100"> <label>Action on Notification Click <md-tooltip md-direction="bottom">This action will be performed when user clicks on notification.</md-tooltip> </label> <md-icon class="grey-icon">touch_app</md-icon> <md-select ng-disabled="::vm.readOnly" ng-model="vm.campaignModel.selectedNotificationType"> <md-option ng-repeat="type in vm.notificationTypes" ng-value="type"> {{::type.name}} </md-option> </md-select> </md-input-container> <md-input-container ng-if="vm.campaignModel.selectedNotificationType.value==\'openAppWithDialog\'" flex="100"> <label>Dialog Description</label> <md-icon class="grey-icon">subtitles</md-icon> <textarea ng-disabled="::vm.readOnly" clear-on-destroy md-maxlength="500" maxlength="500" required autocomplete="off" type="text" ng-model="vm.campaignModel.longDescription" name="longDescription"></textarea> <div ng-messages="vm.campaignForm.longDescription.$error"> <div ng-message="required"> Dialog Description is required. </div> <div ng-message="md-maxlength"> Maximum allowed dialog description length is 500. </div> </div> </md-input-container> <md-input-container ng-if="vm.campaignModel.selectedNotificationType.value==\'browser\' || vm.campaignModel.selectedNotificationType.value==\'webview\'" flex="100"> <label>Redirect URL</label> <md-icon class="grey-icon">link</md-icon> <input ng-disabled="::vm.readOnly" clear-on-destroy required autocomplete="off" type="url" ng-model="vm.campaignModel.redirectUrl" name="redirectUrl"> <div ng-messages="vm.campaignForm.redirectUrl.$error"> <div ng-message="required"> Redirect URL is required. </div> <div ng-message="url"> Please enter a valid URL. </div> </div> </md-input-container> <md-input-container ng-if="vm.campaignModel.selectedNotificationType.value==\'webview\'" flex="100"> <label>WebView Title</label> <md-icon class="grey-icon">title</md-icon> <input ng-disabled="::vm.readOnly" clear-on-destroy required autocomplete="off" type="text" ng-model="vm.campaignModel.webViewTitle" name="webViewTitle"> <div ng-messages="vm.campaignForm.webViewTitle.$error"> <div ng-message="required"> WebViewT itle is required. </div> </div> </md-input-container> <md-input-container ng-if="vm.campaignModel.selectedNotificationType.value==\'service\'" flex="100"> <label>App to redirect to</label> <md-icon class="grey-icon">apps</md-icon> <md-select ng-disabled="::vm.readOnly" md-select-search="vm.allApps.length>5" clear-on-destroy required ng-model="vm.campaignModel.redirectApp" name="redirectApp"> <md-option ng-value="app.appid" ng-repeat="app in vm.allApps">{{::app.appname}}</md-option> </md-select> <div ng-messages="vm.campaignForm.redirectApp.$error"> <div ng-message="required">Redirect App is required.</div> </div> </md-input-container> </div> </div> <div layout="column" flex="100" ng-if="vm.extractType!=\'file\'"> <div layout="row" layout-align="space-around" style="margin-top: -25px" layout-wrap> <md-input-container flex="45"> <h4>Operating System</h4> <md-checkbox ng-disabled="::vm.readOnly" ng-change="vm.validateOS()" name="oses" ng-model="os.selected" class="md-primary" ng-repeat="os in vm.campaignModel.oses">{{os.name}}</md-checkbox> <div ng-messages="vm.campaignForm.oses.$error" ng-show="vm.campaignForm.oses.$dirty"> <div ng-message="atleastOne">Please select atleast one OS!</div> </div> </md-input-container> <md-input-container flex="45"> <h4>Gender</h4> <md-checkbox ng-disabled="::vm.readOnly" ng-change="vm.validateGender()" name="genders" ng-model="gender.selected" class="md-primary" ng-repeat="gender in vm.campaignModel.genders">{{gender.name}}</md-checkbox> <div ng-messages="vm.campaignForm.genders.$error" ng-show="vm.campaignForm.genders.$dirty"> <div ng-message="atleastOne">Please select atleast one gender!</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="45"> <label>Qualifications ({{vm.campaignModel.selectedQualifications.length}} Selected)</label> <md-icon class="grey-icon">school</md-icon> <md-select ng-required="::false && !vm.readOnly" multiple="multiple" class="capitalize" ng-model="vm.campaignModel.selectedQualifications" md-on-close="vm.qualificationFilter=\'\'" placeholder="Qualifications" name="selectedQualifications"> <md-select-header ng-hide="::vm.readOnly" ng-if="vm.allQualifications.length>5" search="vm.qualificationFilter" select-all="vm.allQualifications|vm.campaignModel.selectedQualifications"> </md-select-header> <md-option ng-disabled="::vm.readOnly" ng-value="qualification" ng-repeat="qualification in vm.allQualifications |\n              filter:vm.qualificationFilter" class="capitalize">{{::qualification.qualName}}</md-option> </md-select> <div ng-messages="vm.campaignForm.selectedQualifications.$error"> <div ng-message="required">Atleast one Qualification is required!</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="45"> <label>Occupations ({{vm.campaignModel.selectedOccupations.length}} Selected)</label> <md-icon class="grey-icon">business_center</md-icon> <md-select ng-required="::false && !vm.readOnly" multiple="multiple" class="capitalize" ng-model="vm.campaignModel.selectedOccupations" md-on-close="vm.occFilter=\'\'" placeholder="Occupations" name="selectedOccupations"> <md-select-header ng-hide="::vm.readOnly" ng-if="vm.allOccupations.length>5" search="vm.occFilter" select-all="vm.allOccupations|vm.campaignModel.selectedOccupations"> </md-select-header> <md-option ng-disabled="::vm.readOnly" ng-value="occupation" ng-repeat="occupation in vm.allOccupations |\n              filter:vm.occFilter" class="capitalize">{{::occupation.occuName}}</md-option> </md-select> <div ng-messages="vm.campaignForm.selectedOccupations.$error"> <div ng-message="required">Atleast one occupation is required!</div> </div> </md-input-container> <md-input-container flex="95"> <label>States ({{vm.campaignModel.selectedStates.length}} Selected)</label> <md-icon class="grey-icon">pin_drop</md-icon> <md-select ng-required="::false && !vm.readOnly" multiple="multiple" class="capitalize" ng-model="vm.campaignModel.selectedStates" md-on-close="vm.statesFilter=\'\'" placeholder="States" name="selectedStates"> <md-select-header ng-hide="::vm.readOnly" ng-if="vm.allStates.length>5" search="vm.statesFilter" select-all="vm.allStates|vm.campaignModel.selectedStates"> </md-select-header> <md-option ng-disabled="::vm.readOnly" ng-value="state" ng-repeat="state in vm.allStates |\n              filter:vm.statesFilter" class="capitalize">{{::state.statename}}</md-option> </md-select> <div ng-messages="vm.campaignForm.selectedStates.$error"> <div ng-message="required">Atleast one state is required!</div> </div> </md-input-container> <md-input-container flex="95"> <label>Favourite Apps ({{vm.campaignModel.selectedApps.length}} Selected)</label> <md-icon class="grey-icon">apps</md-icon> <md-select multiple="multiple" class="capitalize" ng-model="vm.campaignModel.selectedApps" md-on-close="vm.appFilter=\'\'" placeholder="Favourite Apps" name="favApps"> <md-select-header ng-hide="::vm.readOnly" ng-if="vm.allApps.length>5" search="vm.appFilter" select-all="vm.allApps|vm.campaignModel.selectedApps"> </md-select-header> <md-option ng-disabled="::vm.readOnly" ng-value="app" ng-repeat="app in vm.allApps |\n              filter:vm.appFilter" class="capitalize">{{::app.appname}}</md-option> </md-select> </md-input-container> <md-input-container flex="45"> <label>Start Age</label> <md-icon class="grey-icon">timelapse</md-icon> <input ng-disabled="::vm.readOnly" ng-required="vm.campaignModel.age[1]" type="number" max="120" ng-model="vm.campaignModel.age[0]" min="1" name="startAge"> <div ng-messages="vm.campaignForm.startAge.$error"> <div ng-message="required"> Start Age is required if end age is mentioned! </div> <div ng-message="max"> Age can\'t be more than 120! </div> <div ng-message="min"> Min Age can\'t be less than 1! </div> </div> </md-input-container> <md-input-container flex="45"> <label>End Age</label> <md-icon class="grey-icon">timelapse</md-icon> <input ng-disabled="::vm.readOnly" ng-required="vm.campaignModel.age[0]" type="number" ng-model="vm.campaignModel.age[1]" min="{{vm.campaignModel.age[0]?vm.campaignModel.age[0]:1}}" max="120" name="endAge"> <div ng-messages="vm.campaignForm.endAge.$error"> <div ng-message="required"> End Age is required if Start age is mentioned! </div> <div ng-message="max"> Age can\'t be more than 120! </div> <div ng-message="min"> Max Age can\'t be less than Start Age! </div> </div> </md-input-container> </div> </div> <div layout="row" layout-wrap flex="100" layout-align="space-around"> <md-input-container flex="100" flex-gt-sm="45"> <label>Schedule Date</label> <md-datepicker ng-disabled="::vm.readOnly" md-open-on-focus name="campaignDate" required flex="100" md-min-date="vm.minCampaignDate" md-max-date="vm.maxCampaignDate" ng-model="vm.campaignModel.campaignDate" ng-change="vm.checkFutureDateTime()"></md-datepicker> <div ng-messages="vm.campaignForm.campaignDate.$error"> <div ng-message="valid">Notification date is not valid!</div> <div ng-message="required">Notification date is required!</div> <div ng-message="futureDate">Notification date should be in future!</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="45"> <label>Schedule Time</label> <md-icon class="grey-icon">access_time</md-icon> \x3c!-- <input ng-disabled="::vm.readOnly" type="time" ng-model="vm.campaignModel.campaignDate" ng-change="vm.checkFutureDateTime()" name="campaignTime" required />\n            <div ng-messages="vm.campaignForm.campaignTime.$error">\n                <div ng-message="futureTime">Campaign time should be atleast 15 minutes from now!</div>\n                <div ng-message="required">Campaign time is required!</div>\n            </div> --\x3e <input type="text" ng-disabled="::vm.readOnly" ng-pattern="vm.timePattern" ng-model="vm.campaignModel.campaignTime" ng-change="vm.checkFutureDateTime()" name="campaignTime" required> <div ng-messages="vm.campaignForm.campaignTime.$error"> <div ng-message="pattern">Please enter time in valid format!</div> <div ng-message="futureTime">Notification time should be atleast 15 minutes from now!</div> <div ng-message="required">Notification time is required!</div> </div> <div style="padding-top: 10px;font-size: 14px;color: grey">HH:MM (24 Hours)</div> </md-input-container> </div> <div ng-if="::vm.readOnly" layout="row" flex="100" layout-align="space-around"> <md-input-container flex="45"> <label>Success Count</label> <md-icon class="grey-icon">done_all</md-icon> <input ng-disabled="true" type="text" ng-model="vm.campaignModel.successcount"> </md-input-container> <md-input-container flex="45"> <label>Failure Count</label> <md-icon class="grey-icon">warning</md-icon> <input ng-disabled="true" type="text" ng-model="vm.campaignModel.failurecount"> </md-input-container> </div> <div align="center" flex="100" layout-margin ng-hide="::vm.readOnly"> <md-button is-busy="vm.submitPromise" class="md-raised custom-green" type="submit" ng-click="vm.submitForm()" ng-disabled="!vm.campaignForm.$valid">Schedule</md-button> <md-button class="md-raised custom-red" ng-click="vm.resetForm()">Reset</md-button> </div> </form>'),e.put("resources/app/components/createCategoryComponent/viewEditCategoryComponent/viewEditCategoryComponent.html",'<md-content layout-padding layout-wrap style="background: white"> \x3c!-- <div align="center" class="md-title">{{vm.category.categoryName}}</div> --\x3e <div layout="column" layout-align-xs="" layout-xs="column" class="no-padding" layout-margin> <md-input-container flex="100" flex-xs="100" class="padding-b-10"> <h4 class="section-heading">Linked Apps</h4> <md-chips ng-model="vm.linkedApps" readonly="true"> <md-chip-template layout> <md-icon flex-order="0" flex-order-gt-sm="1" ng-class="{\'spin\': $chip.spinning}" class="cursor-pointer" ng-click="vm.unlinkApp($chip)">close</md-icon> <strong flex-order="1" flex-order-gt-sm="0" ng-class="{\'new-chip-animate\':vm.newlyAdded==$chip}">{{$chip.appname}}</strong> </md-chip-template> </md-chips> </md-input-container> <md-input-container flex="100" flex-xs="100" class="padding-b-10"> <h4 class="section-heading">Unlinked Apps</h4> <md-chips ng-model="vm.unlinkedApps" readonly="true"> <md-chip-template layout> <md-icon flex-order="0" flex-order-gt-sm="1" ng-class="{\'spin\': $chip.spinning}" class="cursor-pointer" ng-click="vm.linkApp($chip)">add</md-icon> <strong flex-order="1" flex-order-gt-sm="0" ng-class="{\'new-chip-animate\':vm.newlyAdded==$chip}">{{$chip.appname}}</strong> </md-chip-template> </md-chips> </md-input-container> </div> </md-content>'),e.put("resources/app/components/campaignComponents/scheduleCampaignComponent/scheduleCampaignComponent.html",'<md-content flex class="right-content"> <md-card> <md-card-content> <campaign-editor-component on-submit="vm.scheduleCampaign"></campaign-editor-component> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/campaignComponents/viewCampaignsComponent/viewCampaignsComponent.html",'<md-content flex class="right-content"> <md-tabs md-selected="vm.selectedTabIndex" md-dynamic-height md-border-bottom> <md-tab md-on-select="enabled=true" md-on-deselect="enabled=false" ui-sref-opts="{notify:false}" ui-sref="selfcare.campaigns.view({status:status})" ng-repeat="status in ::vm.statuses"> <md-tab-label> <md-icon style="margin-right: 10px">{{::vm.statusIcons[status]}}</md-icon> {{::status}} </md-tab-label> </md-tab> </md-tabs> <md-content class="md-padding"> <div align="center"> <span class="small-grey-text">{{vm.statusDesc[vm.status]}}</span> </div> <div promise-loader="vm.fetchingPromise"></div> <div ng-if="vm.campaigns && !vm.campaigns.length" layout="row" layout-align="center center"> <h3>No records found!</h3> </div> <md-card ng-repeat="campaign in vm.campaigns|filter:vm.filter"> <md-card-content> <div layout="row"> <div flex layout="row" layout-wrap> <div flex-gt-sm="70" flex="100"><strong style="line-height: 40px"><md-icon>access_time</md-icon> Scheduled Date/Time: {{::campaign.scheduletime|uscDate}}</strong></div> <div flex-gt-sm="15" flex="50" flex-order-gt-sm="0" flex-order="1"> <md-button ng-click="vm.viewCampaignDetails(campaign)" class="md-primary"> <md-icon>info</md-icon> <span>View Details</span> </md-button> </div> <div ng-if="::vm.buttonName" flex-gt-sm="15" flex="50" flex-order-gt-sm="0" flex-order="1"> <md-button is-busy="campaign.cancelPromise" ng-click="vm.stopOrCancel(campaign)" class="md-warn"> <md-icon>cancel</md-icon> <span>{{vm.buttonName}}</span> </md-button> </div> <p flex="100"> <md-icon>title</md-icon><strong> Title: </strong> {{::campaign.title}} </p> <div ng-show="campaign.message" class="divider"></div> <p ng-show="campaign.message" flex="100"> <md-icon>subtitles</md-icon><strong> Message: </strong> {{::campaign.message}}</p> </div> </div> </md-card-content> </md-card> </md-content> </md-content>'),e.put("resources/app/components/dashboardComponent/appsServicesFilterComponent/appsServicesFilterComponent.html",'<md-content layout-padding layout-wrap> <div align="center"> <p ng-show="vm.forService" class="no-margin-top md-title">Filter Services</p> <p ng-hide="vm.forService" class="no-margin-top md-title">Filter Apps</p> </div> <form layout="row" layout-wrap name="vm.filterForm" layout-align="space-around center"> <md-radio-group flex="100" style="padding-left: 18px; padding-bottom: 10px" ng-model="vm.filters.stateRadio" layout="row" layout-align="center" ng-change="vm.stateCentralChange()"> <md-radio-button value="all" class="md-primary">All</md-radio-button> <md-radio-button value="central" class="md-primary">Central</md-radio-button> <md-radio-button value="state" class="md-primary">State</md-radio-button> </md-radio-group> <md-input-container flex="100" flex-gt-sm="95" ng-if="vm.filters.stateRadio==\'state\'"> <label>State</label> <md-icon>pin_drop</md-icon> <md-select ng-required="true" ng-change="vm.stateChange()" placeholder="State" name="state" ng-model-options="{trackBy: \'$value.stateid\'}" ng-model="vm.filters.state" md-select-search="vm.allStates.length>5"> <md-option ng-value="state" ng-repeat="state in vm.allStates">{{::state.statename}}</md-option> </md-select> <div ng-messages="vm.filterForm.state.$error"> <div ng-message="required">Please select a state.</div> </div> </md-input-container> <md-input-container flex="100" ng-if="vm.showMinistries" flex-gt-sm="{{::vm.dropDownFlex}}" class="md-icon-float md-block"> <label>Ministry</label> <md-icon class="grey-icon">business_center</md-icon> <md-select md-on-open="vm.fetchMinistries()" ng-model="vm.filters.selectedMinistry"> <md-option ng-value="ministry" ng-repeat="ministry in vm.filters.allMinistries">{{::ministry.ministryName}}</md-option> </md-select> </md-input-container> <md-input-container flex="100" flex-gt-sm="45" class="md-icon-float md-block Category_question_answer"> <label>Category</label> <md-icon class="grey-icon">question_answer</md-icon> <md-select md-on-open="vm.fetchCategories()" ng-model="vm.filters.selectedCategory" md-select-search="vm.filters.allCategories.length>5"> <md-option ng-value="category" ng-repeat="category in vm.filters.allCategories">{{::category.categoryName}}</md-option> </md-select> </md-input-container> <md-input-container flex="100" flex-gt-sm="50" class="Category_question_answer"> <label>Status</label> <md-icon>power_settings_new</md-icon> <md-select placeholder="Status" name="status" ng-init="vm.filters.status=vm.filters.status||\'all\'" ng-model="vm.filters.status"> <md-option value="all">All</md-option> <md-option value="active">Activated</md-option> <md-option value="deactive">Deactivated</md-option> </md-select> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>Onboarding Start Date</label> <md-datepicker date-picker-clear md-open-on-focus md-max-date="vm.dateToday" ng-model="vm.filters.startDate"></md-datepicker> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>Onboarding End Date</label> <md-datepicker date-picker-clear md-open-on-focus md-min-date="vm.filters.startDate" ng-model="vm.filters.endDate"></md-datepicker> </md-input-container> <md-slider-container flex="100" flex-gt-sm="50" style="padding-left: 18px" layout="row"> <span flex="30" class="md-body-1">Rating Start</span> <md-slider class="md-primary" md-discrete ng-model="vm.filters.startRating" step="1" min="1" max="5"> </md-slider> <span>{{vm.filters.startRating}}</span> </md-slider-container> <md-slider-container flex="100" flex-gt-sm="50" style="padding-left: 18px" layout="row"> <span flex="30" class="md-body-1">Rating End</span> <md-slider class="md-primary" ng-disabled="!vm.filters.startRating" md-discrete ng-model="vm.filters.endRating" step="1" min="{{vm.filters.startRating}}" max="5"> </md-slider> <span>{{vm.filters.endRating}}</span> </md-slider-container> <div align="center"> <md-button ng-click="vm.cancel()" class="md-raised">Cancel</md-button> <md-button ng-click="vm.reset()" class="md-raised md-warn">Reset</md-button> <md-button type="submit" ng-disabled="vm.filterForm.$invalid" ng-click="vm.submit()" class="md-raised md-primary">Submit</md-button> </div> </form> </md-content>'),e.put("resources/app/components/dashboardComponent/dashboardAppsComponent/dashboardAppsComponent.html",'<div class="expand-apps animate-show-hide" ng-click="vm.showApps()" ng-show="(\'selfcare.dashboard.apps.performance\' | isState) && !vm.areAppsVisible" layout="row" layout-align="center center"> <md-icon style="color:white">keyboard_arrow_down</md-icon> <span>Show all Apps</span> <md-icon style="color:white">keyboard_arrow_down</md-icon> </div> <md-content id="appsContent" class="md-padding"> <div ng-if="(\'selfcare.dashboard.apps\' | isState) || vm.areAppsVisible" class="animate-if"> <div ng-init="vm.$onInit()" class="no-padding" layout="row" style="margin-top: -10px;margin-bottom: -10px"> <md-input-container flex="100" style="margin-top: 14px"> <input type="text" placeholder="Search Apps.." ng-model="vm.appFilter"> </md-input-container> <md-input-container flex="noshrink"> <label>Sort By</label> <md-select ng-model="vm.sortType" ng-change="vm.sortApps()"> <md-option value="latestFirst">Newly added</md-option> <md-option value="oldestFirst">Oldest</md-option> <md-option value="aToZ">A to Z</md-option> <md-option value="zToA">Z to A</md-option> </md-select> </md-input-container> <div layout="row" flex="noshrink"> <md-button class="md-fab md-mini md-primary" ng-click="vm.openFilterDialog()"> <md-tooltip md-direction="bottom">Filter Apps</md-tooltip> <md-icon md-menu-origin>filter_list</md-icon> </md-button> <md-button ng-show="vm.hasFilters" class="md-fab md-mini md-warn" ng-click="vm.clearFilters()"> <md-tooltip md-direction="bottom">Clear Filters</md-tooltip> <md-icon md-menu-origin>close</md-icon> </md-button> </div> </div> <div class="dashboard-app-cards" scroll-horizontal="apps" layout="row" layout-align="start center" ng-if="vm.allApps.length>0"> <md-card class="cursor-pointer hoverable" ui-sref-opts="{notify:false}" ng-click="vm.areAppsVisible=false" ui-sref="selfcare.dashboard.apps.performance({appid:app.appid})" ng-repeat="app in vm.allApps|filter:vm.appFilter"> <div align="center"> <img class="md-card-image" ng-src="{{::app.image}}"> </div> <md-card-footer align="center"> <div title="{{::app.appname}}" class="app-name" md-truncate>{{::app.appname}}</div> </md-card-footer> <div class="visit-app" ui-sref="selfcare.dashboard.app.home({appid:app.appid})" ng-click="$event.stopPropagation()">Visit Settings</div> </md-card> </div> <div align="center" ng-if="!vm.allApps.length"> <h4>No apps found in selected criteria.</h4> </div> </div> <div align="center" ng-if="(\'selfcare.dashboard.apps\' | isState) && vm.allApps.length"> <br> <h4>Please click on any of the above service to view its performance.</h4> </div> <ui-view class="fade-up"></ui-view> </md-content>'),e.put("resources/app/components/dashboardComponent/dashboardServicesComponent/dashboardServicesComponent.html",'<div class="expand-apps animate-show-hide" ng-click="vm.showServices()" ng-show="(\'selfcare.dashboard.services.performance\' | isState) && !vm.areServicesVisible" layout="row" layout-align="center center"> <md-icon style="color:white">keyboard_arrow_down</md-icon> <span>Show all Services</span> <md-icon style="color:white">keyboard_arrow_down</md-icon> </div> <md-content id="servicesContent" class="md-padding"> <div ng-if="(\'selfcare.dashboard.services\' | isState) || vm.areServicesVisible" class="animate-if"> <div ng-init="vm.$onInit()" class="no-padding" layout="row" style="margin-top: -10px;margin-bottom: -10px"> <md-input-container flex="100" style="margin-top: 14px"> <input type="text" placeholder="Search Services.." ng-model="vm.serviceFilter"> </md-input-container> <md-input-container flex="noshrink"> <label>Sort By</label> <md-select ng-model="vm.sortType" ng-change="vm.sortServices()"> <md-option value="latestFirst">Newly added</md-option> <md-option value="oldestFirst">Oldest</md-option> <md-option value="aToZ">A to Z (by service name)</md-option> <md-option value="zToA">Z to A (by service name)</md-option> <md-option value="appLatestFirst">Newly added (by app)</md-option> <md-option value="appOldestFirst">Oldest (by app)</md-option> <md-option value="appAToZ">A to Z (by app name)</md-option> <md-option value="appZToA">Z to A (by app name)</md-option> </md-select> </md-input-container> <div layout="row" flex="noshrink"> <md-button class="md-fab md-mini md-primary" ng-click="vm.openFilterDialog()"> <md-tooltip md-direction="bottom">Filter Services</md-tooltip> <md-icon md-menu-origin>filter_list</md-icon> </md-button> <md-button ng-show="vm.hasFilters" class="md-fab md-mini md-warn" ng-click="vm.clearFilters()"> <md-tooltip md-direction="bottom">Clear Filters</md-tooltip> <md-icon md-menu-origin>close</md-icon> </md-button> </div> </div> <div class="dashboard-app-cards" scroll-horizontal="services" layout="row" layout-align="start center" ng-if="vm.allServices.length>0"> <md-card class="cursor-pointer hoverable" ui-sref-opts="{notify:false}" ng-click="vm.areServicesVisible=false" ui-sref="selfcare.dashboard.services.performance({serviceid:service.serviceid})" ng-repeat="service in vm.allServices|filter:vm.serviceFilter"> <div align="center"> <img class="md-card-image" ng-src="{{::service.image}}"> </div> <md-card-footer align="center"> <div title="{{::service.servicename}}" class="app-name" md-truncate>{{::service.servicename}}</div> </md-card-footer> <div class="visit-app" ui-sref="selfcare.dashboard.service.home({serviceid:service.serviceid})" ng-click="$event.stopPropagation()">Visit Settings</div> </md-card> </div> <div align="center" ng-if="!vm.allServices.length"> <h4>No apps found in selected criteria.</h4> </div> </div> <div align="center" ng-if="(\'selfcare.dashboard.services\' | isState) && vm.allServices.length"> <br> <h4>Please click on any above service to view its performance.</h4> </div> <ui-view class="fade-up"></ui-view> </md-content>'),e.put("resources/app/components/directoryComponents/deptEditorComponent/deptEditorComponent.html",'<md-content layout-padding layout-wrap> <md-card> <md-card-title> <div class="md-title">{{::vm.title}}</div> </md-card-title> <md-card-content> <form name="vm.form" layout="row" layout-wrap> <md-input-container flex="100"> <label>Department Name</label> <md-icon>short_text</md-icon> <input type="text" ng-model="vm.deptModel.deptName" name="deptName" required> <div ng-messages="vm.form.deptName.$error"> <div ng-message="required">Department name is required.</div> </div> </md-input-container> <md-input-container flex="100"> <label>Department Description</label> <md-icon>description</md-icon> <textarea md-maxlength="250" type="text" ng-model="vm.deptModel.deptDescription" name="deptDescription" rows="1" required></textarea> <div ng-messages="vm.form.deptDescription.$error"> <div ng-message="required">Department description is required.</div> <div ng-message="md-maxlength">Department description can not be more than 250 characters.</div> </div> </md-input-container> <md-input-container flex="100"> <label>Address</label> <md-icon>location_city</md-icon> <textarea md-maxlength="250" type="text" ng-model="vm.deptModel.address" name="address" rows="1" required></textarea> <div ng-messages="vm.form.address.$error"> <div ng-message="required">Department address is required.</div> <div ng-message="md-maxlength">Department address can not be more than 250 characters.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>Latitude</label> <md-icon>explore</md-icon> <input type="text" ng-model="vm.deptModel.latitude" name="latitude" ng-required="vm.deptModel.longitude"> <div ng-messages="vm.form.latitude.$error"> <div ng-message="required">Latitude is required.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>Longitude</label> <md-icon style="transform: scaleX(-1)">explore</md-icon> <input type="text" ng-model="vm.deptModel.longitude" name="longitude" ng-required="vm.deptModel.latitude"> <div ng-messages="vm.form.longitude.$error"> <div ng-message="required">Longitude is required.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>Website</label> <md-icon>link</md-icon> <input type="text" ng-model="vm.deptModel.website" name="website" ng-required="false" ng-pattern=" vm.urlPattern"> <div ng-messages="vm.form.website.$error"> <div ng-message="required">Website is required.</div> <div ng-message="pattern">Please enter a valid website.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>Email</label> <md-icon>mail</md-icon> <input type="text" ng-pattern="vm.emailPattern" ng-model="vm.deptModel.email" name="email" ng-required="false"> <div ng-messages="vm.form.email.$error"> <div ng-message="required">Email is required.</div> <div ng-message="pattern">Please enter a valid email address.</div> </div> </md-input-container> <md-input-container flex="100"> <label>Helpdesk Number</label> <md-icon>phone</md-icon> <input type="text" ng-pattern="vm.mutipleHelplinePattern" ng-model="vm.deptModel.helpline" name="helpline" ng-required="false"> <div ng-messages="vm.form.helpline.$error"> <div ng-message="required">Helpline is required.</div> <div ng-message="pattern">Please enter a valid number.</div> </div> <div style="padding-top: 10px;font-size: 14px;color: grey">You can enter comma separated numbers</div> </md-input-container> <md-input-container flex="100"> <label>Working Hours</label> <md-icon>timelapse</md-icon> <input type="text" readonly="true" class="cursor-pointer" ng-click="vm.editWorkingHours()" ng-model="vm.deptModel.workingHours" name="workingHours" ng-required="false"> <div ng-messages="vm.form.workingHours.$error"> <div ng-message="required">Working Hours are required.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="40"> <label>Android App Name</label> <md-icon>short_text</md-icon> <input type="text" ng-model="vm.deptModel.androidAppName" name="androidAppName" ng-required="vm.deptModel.androidAppUrl"> <div ng-messages="vm.form.androidAppName.$error"> <div ng-message="required">Android App Name is required.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="60"> <label>Android App URL</label> <md-icon class="fa fa-android"></md-icon> <input type="text" ng-model="vm.deptModel.androidAppUrl" name="androidAppUrl" ng-required="vm.deptModel.androidAppName"> <div ng-messages="vm.form.androidAppUrl.$error"> <div ng-message="required">Android App URL is required.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="40"> <label>iOS App Name</label> <md-icon>short_text</md-icon> <input type="text" ng-model="vm.deptModel.iOSAppName" name="iOSAppName" ng-required="vm.deptModel.iOSAppUrl"> <div ng-messages="vm.form.iOSAppName.$error"> <div ng-message="required">iOS App Name is required.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="60"> <label>iOS App URL</label> <md-icon class="fa fa-apple"></md-icon> <input type="text" ng-model="vm.deptModel.iOSAppUrl" name="iOSAppUrl" ng-required="vm.deptModel.iOSAppName"> <div ng-messages="vm.form.iOSAppUrl.$error"> <div ng-message="required">iOS App URL is required.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="40"> <label>Windows App Name</label> <md-icon>short_text</md-icon> <input type="text" ng-model="vm.deptModel.wpAppName" name="wpAppName" ng-required="vm.deptModel.wpAppUrl"> <div ng-messages="vm.form.wpAppName.$error"> <div ng-message="required">Windows App Name is required.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="60"> <label>Windows App URL</label> <md-icon class="fa fa-windows"></md-icon> <input type="text" ng-model="vm.deptModel.wpAppUrl" name="wpAppUrl" ng-required="vm.deptModel.wpAppName"> <div ng-messages="vm.form.wpAppUrl.$error"> <div ng-message="required">Windows App URL is required.</div> </div> </md-input-container> <div align="center" flex="100"> <md-button ng-click="vm.cancel()" class="md-raised">Cancel</md-button> <md-button is-busy="vm.savePromise" ng-disabled="vm.form.$invalid" ng-click="vm.saveDept()" class="md-raised md-primary">Save</md-button> </div> </form> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/directoryComponents/viewDirectoryComponent/viewDirectoryComponent.html",'<div class="expand-apps animate-show-hide" ng-click="vm.editor.triggerCancel()" ng-show="vm.editing" layout="row" layout-align="center center"> <md-tooltip md-direction="bottom" md-visible="tooltipVisible">Department being edited will be closed</md-tooltip> <md-icon style="color:white">keyboard_arrow_down</md-icon> <span>Show all Departments</span> <md-icon style="color:white">keyboard_arrow_down</md-icon> </div> <md-content layout-padding layout-wrap id="directoryView"> <md-card ng-hide="vm.editing"> <md-card-title layout="row" layout-align="space-between center"> <div md-truncate class="md-title">Directory Departments</div> <md-button flex="none" class="md-raised md-primary" ui-sref="selfcare.directory.createNew"> <md-icon>add_circle</md-icon> Add New</md-button> </md-card-title> <md-card-content> <div promise-loader="vm.fetchDeptPromise" text="Loading directory..."></div> <div promise-hider="vm.fetchDeptPromise"> <div ng-if="!vm.depts.length"> <h4 align="center">No results found!</h4> </div> <div ng-if="vm.depts.length" class="search-box"> <md-icon style="margin-right: 9px">search</md-icon> <input ng-model="vm.search" type="Search" placeholder="Search..."> </div> <md-list> <md-list-item ng-repeat="dept in vm.depts|filter:{deptName: vm.search} track by dept.deptId"> <md-icon>fiber_manual_record</md-icon> <p md-truncate highlight-bind="dept.deptName | vm.search"></p> <md-button flex="none" class="md-icon-button md-primary" is-busy="dept.deletePromise" ng-disabled="::dept.onUmang" ng-click="vm.deleteDept(dept)"> <md-icon>close</md-icon> <md-tooltip md-direction="bottom" md-visible="tooltipVisible">Delete</md-tooltip> </md-button> <md-button flex="none" class="md-icon-button md-primary" ng-disabled="::dept.onUmang" ng-click="vm.editDept(dept)"> <md-icon>edit</md-icon> <md-tooltip md-direction="bottom" md-visible="tooltipVisible">Edit</md-tooltip> </md-button> </md-list-item> </md-list> </div> </md-card-content> </md-card> <dept-editor-component api="vm.editor" class="no-padding" ng-if="vm.editing" edit-mode="true" on-cancel="vm.onCancelEdit" after-save="vm.afterSaveDept" dept-model="vm.currentlyEditing"></dept-editor-component> </md-content>'),e.put("resources/app/components/loginComponent/forgotPasswordComponent/forgotPasswordComponent.html",'<md-content layout-padding layout-wrap> <form name="vm.forgotPasswordForm" layout="column"> <div align="center"> <h3 class="md-headline">Forgot Password</h3> </div> <md-input-container> <label>User Id</label> <md-icon>account_circle</md-icon> <input ng-model="vm.userId" type="text" required name="userId"> <div ng-messages="vm.forgotPasswordForm.userId.$error"> <div ng-message="required"> User Id is required. </div> </div> </md-input-container> <div layout="column" ng-if="vm.userId" layout-align="space-around"> <div align="center"> <md-button ng-init="vm.canRequestOTP=true; vm.otpPromise=null" ng-disabled="!vm.canRequestOTP" is-busy="vm.otpPromise" ng-click="vm.requestOTP()" class="md-primary margin-bottom-20">{{vm.otpPromise==null?\'Request\':\'Resend\'}} OTP</md-button> </div> <div align="center" ng-if="!vm.canRequestOTP"> <span class="small-grey-text">Didn\'t get OTP? You can re-request in {{vm.timeLeft}} seconds.</span> </div> <md-input-container promise-hider="vm.otpPromise"> <label>OTP</label> <md-icon>phonelink_lock</md-icon> <input ng-model="vm.otp" type="text" restrict="reject" mask-validate="false" mask="999999" name="otp" ng-required="true" autocomplete="off"> <div ng-messages="vm.forgotPasswordForm.otp.$error"> <div ng-message="required"> OTP is required. </div> </div> </md-input-container> </div> <div ng-if="vm.otp"> <md-input-container> <label>New Password</label> <md-icon>lock</md-icon> <input ng-model="vm.password" type="password" required name="password" maxlength="16" minlength="8"> <div ng-messages="vm.forgotPasswordForm.password.$error"> <div ng-message-exp="[\'required\',\'minlength\']">New password should be atleast 8 characters long.</div> </div> </md-input-container> <md-input-container> <label>Confirm Password</label> <md-icon>lock</md-icon> <input ng-model="vm.confirmPassword" type="password" maxlength="16" required name="confirmPassword" equals="vm.password"> <div ng-messages="vm.forgotPasswordForm.confirmPassword.$error"> <div ng-message="required">Please confirm password.</div> <div ng-message="equals">Password doesn\'t match.</div> </div> </md-input-container> </div> <div align="center"> <md-button ng-click="vm.cancel()" class="md-raised">Cancel</md-button> <md-button type="submit" is-busy="vm.changePwdPromise" ng-click="vm.changePassword()" ng-disabled="!vm.forgotPasswordForm.$valid" class="md-raised md-primary">Save</md-button> </div> </form> </md-content> '),e.put("resources/app/components/manageRequestsComponent/viewOnboardingRequestComponent/viewOnboardingRequestComponent.html",'<md-content layout-padding layout-wrap> <form name="vm.onboardForm"> <div layout-padding layout="row" layout-wrap> <md-radio-group flex="100" ng-model="vm.request.stateCentral" layout="row" ng-if="vm.request.stateCentral==\'99\'"> <md-radio-button ng-disabled="true" value="99" class="md-primary">Central</md-radio-button> <md-radio-button ng-disabled="true" value="" class="md-primary">State</md-radio-button> </md-radio-group> <md-input-container flex="100" class="no-margin-bottom" ng-if="vm.request.stateCentral!=\'99\'"> <label>State</label> <md-icon class="grey-icon">pin_drop</md-icon> <input ng-readonly="true" ng-model="vm.request.stateName" type="text" name="orgName"> </md-input-container> <md-input-container flex="100" class="no-margin-bottom"> <label>Request Date</label> <md-icon class="grey-icon">date_range</md-icon> <input ng-readonly="true" type="text" ng-init="vm.request.cdate = (vm.request.cdate)" ng-model="vm.request.cdate"> </md-input-container> <md-input-container flex="100" class="no-margin-bottom"> <label>Name of Organization</label> <md-icon class="grey-icon">business</md-icon> <input ng-readonly="true" ng-model="vm.request.organization" type="text" name="orgName"> </md-input-container> <md-input-container flex="100" class="no-margin-bottom"> <label>Name of Requestor</label> <md-icon class="grey-icon">account_circle</md-icon> <input ng-readonly="true" ng-model="vm.request.name" type="text" name="reqName"> </md-input-container> <md-input-container flex="100" flex-gt-sm="50" class="no-margin-bottom"> <label>Email</label> <md-icon class="grey-icon">email</md-icon> <input ng-readonly="true" ng-model="vm.request.emailId" type="text" name="email"> </md-input-container> <md-input-container flex="100" flex-gt-sm="50" class="no-margin-bottom"> <label>Mobile Number</label> <md-icon class="grey-icon">phone</md-icon> <input ng-readonly="true" ng-model="vm.request.mno" type="text" name="mno"> </md-input-container> </div> </form> <div layout="row" layout-wrap layout-align="center"> <md-input-container flex="100"> <label>Comment (Optional)</label> <md-icon>comment</md-icon> <input ng-readonly="::vm.readOnly" ng-model="vm.request.comments" type="text"><br> \x3c!--  <p>Note:you Can edit the user from the <a href="#"  ng-click="vm.editUser()"> Edit User section.</a></p> --\x3e </md-input-container> <md-button ng-click="vm.cancel()" class="md-raised">Cancel</md-button> <md-button ng-hide="::vm.readOnly" is-busy="vm.rejectPromise" ng-click="vm.reject()" class="md-raised md-warn">Reject</md-button> <md-button ng-hide="::vm.readOnly" is-busy="vm.approvePromise" ng-click="vm.approve()" md-theme="selfcare" class="md-raised md-primary">Approve</md-button> </div> </md-content> '),e.put("resources/app/components/messagingComponents/composeBroadcastComponent/composeBroadcastComponent.html",'<md-content layout-padding layout-wrap> <form name="vm.composeForm" layout="column"> <h4>Broadcast message based on: </h4> <md-radio-group layout="row" layout-align="space-around" name="baseType" ng-init="vm.baseType=\'users\'" ng-model="vm.baseType"> <md-radio-button value="users" class="md-primary">Users</md-radio-button> <md-radio-button value="apps" class="md-primary">Apps</md-radio-button> <md-radio-button value="categories" class="md-primary">App Categories</md-radio-button> </md-radio-group> <br> <md-input-container ng-if="vm.baseType==\'users\'"> <label>Users ({{vm.selectedUsers.length}} Selected)</label> <md-icon>account_circle</md-icon> <md-select ng-required="true" placeholder="Users" name="selectedUsers" clear-on-destroy ng-model="vm.selectedUsers" multiple="multiple" md-select-search="vm.subUsers.length>5"> <md-option ng-value="user" ng-repeat="user in vm.subUsers">{{::user.userId}}</md-option> </md-select> <div ng-messages="vm.composeForm.selectedUsers.$error"> <div ng-message="required">Please select at least one user.</div> </div> </md-input-container> <md-input-container ng-if="vm.baseType==\'apps\'"> <label>Apps ({{vm.selectedApps.length}} Selected)</label> <md-icon>dashboard</md-icon> <md-select ng-required="true" placeholder="Apps" name="selectedApps" clear-on-destroy ng-model="vm.selectedApps" multiple="multiple" md-select-search="vm.allApps.length>5"> <md-option ng-value="app" ng-repeat="app in vm.allApps">{{::app.appname}}</md-option> </md-select> <div ng-messages="vm.composeForm.selectedApps.$error"> <div ng-message="required">Please select at least one app.</div> </div> </md-input-container> <md-input-container ng-if="vm.baseType==\'categories\'"> <label>App Categories ({{vm.selectedCategories.length}} Selected)</label> <md-icon>bubble_chart</md-icon> <md-select ng-required="true" placeholder="App Categories" md-on-open="vm.getCategories()" name="selectedCategories" clear-on-destroy ng-model="vm.selectedCategories" multiple="multiple" md-select-search="vm.allCategories>5"> <md-option ng-value="category" ng-repeat="category in vm.allCategories">{{::category.categoryName}}</md-option> </md-select> <div ng-messages="vm.composeForm.selectedCategories.$error"> <div ng-message="required">Please select at least one category.</div> </div> </md-input-container> <md-input-container> <label>Broadcast Message</label> <textarea maxlength="400" md-maxlength="400" type="text" required ng-model="vm.message" name="message" rows="2"></textarea> <div ng-messages="vm.composeForm.message.$error"> <div ng-message="required">Message is required.</div> </div> </md-input-container> <div align="center"> <md-checkbox ng-model="vm.toSubusers" class="md-primary" name="subusers"> Also send to subusers </md-checkbox> </div> <div align="center"> <md-button class="md-raised" ng-click="vm.cancel()">Cancel</md-button> <md-button ng-disabled="vm.composeForm.$invalid" is-busy="vm.broadcastPromise" class="md-raised md-primary" ng-click="vm.broadcast()">Broadcast</md-button> </div> </form> </md-content>'),e.put("resources/app/components/messagingComponents/broadcastComponent/broadcastComponent.html",'<md-content layout-padding layout-wrap> <md-card class="no-padding"> <md-card-content class="no-padding" layout-gt-sm="row" layout="column"> <div flex-gt-sm="50" flex> <md-toolbar layout="row" class="md-hue-3"> <div class="md-toolbar-tools"> <span flex>Inbox</span> <md-button is-busy="vm.composePromise" ng-click="vm.composeBroadcast()" class="md-raised"><md-icon>add_circle</md-icon> Compose New</md-button> </div> </md-toolbar> <md-content> <md-list flex> <md-subheader class="md-no-sticky">Messages broadcasted by senior users..</md-subheader> <md-divider></md-divider> <div promise-loader="vm.inboxPromise"></div> <div align="center" ng-hide="vm.inboxBroadcasts.length"> <h4 promise-hider="vm.inboxPromise">No broadcasts found!</h4> </div> <md-expansion-panel-group md-component-id="inboxBroadcastsGroup"> <md-expansion-panel ng-repeat="item in vm.inboxBroadcasts"> <md-expansion-panel-collapsed layout="row" layout-wrap class="cursor-pointer" md-ink-ripple> <div class="md-title" flex="65">{{::item.from}}</div> <div class="md-summary" flex style="text-align: right">{{::item.date}}</div> <div flex="100" class="md-summary message-preview-text">{{item.msg}}</div> </md-expansion-panel-collapsed> <md-expansion-panel-expanded> <md-expansion-panel-header class="cursor-pointer" md-ink-ripple ng-click="::$panel.collapse()" md-no-sticky> <div class="md-title" style="max-width: 210px" flex>{{::item.from}}</div> <div class="md-summary" style="text-align: right">{{::item.date}}</div> </md-expansion-panel-header> <md-expansion-panel-content> <p>{{::item.msg}}</p> </md-expansion-panel-content> </md-expansion-panel-expanded> </md-expansion-panel> </md-expansion-panel-group> <pagination-component default-page-size="5" fetch-on-init="true" on-fetch="vm.getBroadcastInbox"></pagination-component> <md-divider></md-divider> </md-list> </md-content> </div> <md-divider></md-divider> <div flex-gt-sm="50" flex> <md-toolbar layout="row" class="md-hue-3"> <div layout="row" class="md-toolbar-tools"> <span flex>Outbox</span> \x3c!--  <md-input-container flex="20" style="margin-top: 22px;">\n                <label>Sort By</label>\n                <md-select ng-model="vm.sortType" ng-change="vm.sortApps()">\n                    <md-option value="latestFirst" selected>Sort by latest</md-option>\n                    <md-option value="oldestFirst">Sort by old</md-option>   \n                </md-select>\n            </md-input-container>  --\x3e </div> </md-toolbar> <md-content> <md-list flex> <md-subheader class="md-no-sticky">Messages broadcasted by you..</md-subheader> <md-divider></md-divider> <div promise-loader="vm.outboxPromise"></div> <div align="center" ng-hide="vm.outboxBroadcasts.length"> <h4 promise-hider="vm.outboxPromise">No broadcasts sent by you!</h4> </div> <md-expansion-panel-group md-component-id="outboxBroadcastsGroup"> <md-expansion-panel ng-repeat="item in vm.outboxBroadcasts"> <md-expansion-panel-collapsed layout="row" layout-wrap class="cursor-pointer" md-ink-ripple> <div class="md-title" flex="65">{{::item.toSplitted}}</div> <div class="md-summary" flex style="text-align: right">{{::item.date}}</div> <div flex="100" class="md-summary message-preview-text">{{item.msg}}</div> </md-expansion-panel-collapsed> <md-expansion-panel-expanded> <md-expansion-panel-header class="cursor-pointer" md-ink-ripple ng-click="::$panel.collapse()" md-no-sticky> <div class="md-title" style="max-width: 230px" flex>{{::item.toSplitted}}</div> <div class="md-summary" style="text-align: right">{{::item.date}}</div> </md-expansion-panel-header> <md-expansion-panel-content> <p>Broadcast sent to:</p> <md-chips ng-model="item.to" readonly="true"> <md-chip-template> <strong>{{$chip}}</strong> </md-chip-template> </md-chips> <p>{{::item.msg}}</p> </md-expansion-panel-content> </md-expansion-panel-expanded> </md-expansion-panel> </md-expansion-panel-group> <pagination-component api="vm.outboxPaginator" default-page-size="5" fetch-on-init="true" on-fetch="vm.getBroadcastOutbox"></pagination-component> <md-divider></md-divider> </md-list> </md-content> </div> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/messagingComponents/directMessageComponent/directMessageComponent.html",'<md-content layout-padding layout-wrap> <md-card class="no-padding"> <md-card-content class="no-padding" layout-gt-sm="row" layout="column"> <div flex-gt-sm="50" flex> <md-toolbar layout="row" class="md-hue-3"> <div layout="row" class="md-toolbar-tools"> <span flex>Inbox</span> <md-button is-busy="vm.composePromise" ng-click="vm.composeDirectMsg()" class="md-raised"> <md-icon>add_circle</md-icon> Compose New</md-button> </div> </md-toolbar> <md-content> <md-list flex> \x3c!-- <md-subheader class="md-no-sticky">Messages broadcasted by senior users..</md-subheader> --\x3e <md-divider></md-divider> <div promise-loader="vm.inboxPromise"></div> <div align="center" ng-hide="vm.inboxMessages.length"> <h4 promise-hider="vm.inboxPromise">No messages found!</h4> </div> <md-expansion-panel-group md-component-id="inboxMessagesGroup"> <md-expansion-panel ng-repeat="item in vm.inboxMessages"> <md-expansion-panel-collapsed layout="row" layout-wrap class="cursor-pointer" md-ink-ripple> <div class="md-title" flex="65">{{::item.from}}</div> <div class="md-summary" flex style="text-align: right">{{::item.message.date}}</div> <div flex="100" class="md-summary message-preview-text">{{item.message.text}}</div> </md-expansion-panel-collapsed> <md-expansion-panel-expanded> <md-expansion-panel-header class="cursor-pointer" md-ink-ripple ng-click="::$panel.collapse()" md-no-sticky> <div class="md-title" style="max-width: 210px" flex>{{::item.from}}</div> <div class="md-summary" style="text-align: right">{{::item.message.date}}</div> </md-expansion-panel-header> <md-expansion-panel-content> <p>{{::item.message.text}}</p> </md-expansion-panel-content> <md-expansion-panel-footer> <div ng-if="!item.replyTo" align="right" flex> <md-button ng-click="vm.reply(item)" class="md-primary"> <md-icon>reply</md-icon> Reply</md-button> </div> <div ng-if="item.replyTo"> <span style="text-decoration: underline">{{item.isOriginal?\'Already replied with: \':\'In response to: \'}}</span> <p style="margin-top: -18px;font-size: 14px">{{::item.replyTo.text}}</p> </div> </md-expansion-panel-footer> </md-expansion-panel-expanded> </md-expansion-panel> </md-expansion-panel-group> <pagination-component default-page-size="5" fetch-on-init="true" on-fetch="vm.getInbox"></pagination-component> <md-divider></md-divider> </md-list> </md-content> </div> <md-divider></md-divider> <div flex-gt-sm="50" flex> <md-toolbar layout="row" class="md-hue-3"> <div layout="row" class="md-toolbar-tools"> <span flex>Outbox</span> </div> </md-toolbar> <md-content> <md-list flex> \x3c!-- <md-subheader class="md-no-sticky">Messages broadcasted by you..</md-subheader> --\x3e <md-divider></md-divider> <div promise-loader="vm.outboxPromise"></div> <div align="center" ng-hide="vm.outboxMessages.length"> <h4 promise-hider="vm.outboxPromise">No messages sent by you!</h4> </div> <md-expansion-panel-group md-component-id="outboxMessagesGroup"> <md-expansion-panel ng-repeat="item in vm.outboxMessages"> <md-expansion-panel-collapsed layout="row" layout-wrap class="cursor-pointer" md-ink-ripple> <div class="md-title" flex="65">{{::item.to}}</div> <div class="md-summary" flex style="text-align: right">{{::item.message.date}}</div> <div flex="100" class="md-summary message-preview-text">{{item.message.text}}</div> </md-expansion-panel-collapsed> <md-expansion-panel-expanded> <md-expansion-panel-header class="cursor-pointer" md-ink-ripple ng-click="::$panel.collapse()" md-no-sticky> <div class="md-title" style="max-width: 230px" flex>{{::item.to}}</div> <div class="md-summary" style="text-align: right">{{::item.message.date}}</div> </md-expansion-panel-header> <md-expansion-panel-content> <p>{{::item.message.text}}</p> </md-expansion-panel-content> <md-expansion-panel-footer ng-if="::item.replyTo"> <div> <span style="text-decoration: underline">In response to: </span> <p style="margin-top: -18px;font-size: 14px">{{::item.replyTo.text}}</p> </div> </md-expansion-panel-footer> </md-expansion-panel-expanded> </md-expansion-panel> </md-expansion-panel-group> <pagination-component api="vm.outboxPaginator" default-page-size="5" fetch-on-init="true" on-fetch="vm.getOutbox"></pagination-component> <md-divider></md-divider> </md-list> </md-content> </div> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/profileDetailsComponent/mobEmailEditComponent/mobEmailEditComponent.html",'<md-content layout-padding layout-wrap layout-margin> <div class="md-title">Update Mobile Number</div> <div> <form name="vm.fieldEditForm" autocomplete="off"> <div layout="row"> <md-input-container flex="100" flex-gt-sm="100" class="padding-b-10"> <label>New Mobile Number</label> <md-icon class="material-icons grey-icon">phone_iphone</md-icon> <input prefix91 type="text" ng-pattern="vm.mobilePattern" ng-required="true" name="mno" ng-maxlength="10" maxlength="10" ng-model="vm.mno"> <div ng-messages="vm.fieldEditForm.mno.$error"> <div ng-message="required">Mobile number is required.</div> <div ng-message="pattern">Please enter a valid mobile number.</div> </div> </md-input-container> </div> <div align="center"> <md-button ng-hide="vm.otpPromise" class="md-raised" ng-click="vm.cancel()">Cancel</md-button> <md-button class="md-raised md-primary" ng-click="vm.requestOTP()" ng-init="vm.canRequestOTP=true; vm.otpPromise=null" ng-disabled="!vm.canRequestOTP || !vm.mno" is-busy="vm.otpPromise">{{vm.otpPromise==null?\'Request\':\'Resend\'}} OTP</md-button> </div> <div align="center" class="margin-10" ng-if="!vm.canRequestOTP"> <span class="small-grey-text">Didn\'t get OTP? You can re-request in {{vm.timeLeft}} seconds.</span> </div> <div layout="row" promise-hider="vm.otpPromise"> <md-input-container flex="100" flex-gt-sm="100" class="padding-b-10"> <label>OTP</label> <md-icon class="material-icons grey-icon">phonelink_lock</md-icon> <input type="text" restrict="reject" mask="999999" mask-validate="false" ng-required="true" name="otp" ng-model="vm.otp"> <div ng-messages="vm.fieldEditForm.otp.$error"> <div ng-message="required">OTP is required.</div> </div> </md-input-container> </div> <div align="center"> <md-button promise-hider="vm.otpPromise" class="md-raised" ng-click="vm.cancel()">Cancel</md-button> <md-button ng-if="vm.otp" type="submit" class="md-raised md-primary" ng-click="vm.submit()" is-busy="vm.submitPromise" ng-disabled="!vm.fieldEditForm.$valid">Save Mobile Number</md-button> </div> </form> </div> </md-content> '),e.put("resources/app/components/questionnaireComponents/buildQuestionnaireComponent/buildQuestionnaireComponent.html",'<md-content layout-padding layout-wrap> <div promise-loader="vm.masterFormPromise" text="Loading Questionnaire Builder.."></div> <div promise-hider="vm.masterFormPromise"> <mw-form-builder ng-if="vm.masterForm" read-only="false" api="vm.formBuilder" form-data="vm.masterForm" options="vm.builderOptions"></mw-form-builder> <div align="center"> <md-button class="md-raised md-primary" is-busy="vm.saveFormPromise" ng-click="vm.saveForm()">Save Questionnaire Form</md-button> </div> </div> </md-content>'),e.put("resources/app/components/questionnaireComponents/previewQuestionnaireComponent/previewQuestionnaireComponent.html",'<md-content layout-padding layout-wrap> <div class="no-padding" promise-loader="vm.masterFormPromise" text="Loading Questionnaire Form.."></div> <div class="no-padding" promise-hider="vm.masterFormPromise"> <mw-form-viewer read-only="vm.readOnly" ng-if="vm.isForm" options="vm.previewOptions" form-data="vm.masterJson" response-data="vm.responseJson" on-submit="vm.saveResponse()"></mw-form-viewer> </div> <div promise-hider="vm.masterFormPromise" align="center" ng-hide="vm.isForm"> <h4>You have not created questionnaire yet!</h4> <md-button ui-sref="selfcare.questionnaire.build" class="md-raised md-primary"> <md-icon>assignment</md-icon> Create Questionnaire </md-button> </div> <div align="center" ng-if="vm.readOnly"> <md-button class="md-raised" ng-click="vm.cancel()">Cancel</md-button> <md-button class="md-raised md-primary" ng-click="vm.exportQuestionnaire()">Export as PDF</md-button> </div> </md-content>'),e.put("resources/app/components/questionnaireComponents/fillQuestionnaireComponent/fillQuestionnaireComponent.html",'<md-content layout-padding layout-wrap> <md-card> <md-card-content> <div promise-loader="vm.masterFormPromise" text="Loading Questionnaire.."></div> <div align="center" ng-show="vm.isSubmitted"> <h4>You have already submitted the Questionnaire. You can view it in read-only mode.</h4> </div> <div promise-hider="vm.masterFormPromise"> <mw-form-viewer read-only="vm.isSubmitted" ng-if="vm.isForm" options="vm.previewOptions" form-data="vm.masterForm" response-data="vm.responseData" on-submit="vm.saveDraft(1)"></mw-form-viewer> </div> <div align="center" ng-if="vm.isForm && !vm.isSubmitted"> <md-button is-busy="vm.saveDraftPromise" ng-click="vm.saveDraft()" class="md-raised md-primary">Save Draft</md-button> </div> <div promise-hider="vm.masterFormPromise" align="center" ng-hide="vm.isForm"> <h4>Admin has not created Questionnaire yet. Please come back later!</h4> </div> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/messagingComponents/composeDirectMsgComponent/composeDirectMsgComponent.html",'<md-content layout-padding layout-wrap> <form name="vm.composeForm" layout="column"> <md-input-container> <label>User</label> <md-icon>account_circle</md-icon> <md-select ng-required="true" placeholder="User" name="selectedUser" ng-model="vm.selectedUser" md-select-search="vm.subUsers.length>5"> <md-option ng-value="user" ng-repeat="user in vm.subUsers">{{::user.userId + (user.isAdmin?\' (Admin)\':\'\')}}</md-option> </md-select> <div ng-messages="vm.composeForm.selectedUser.$error"> <div ng-message="required">Please select at least one user.</div> </div> </md-input-container> <md-input-container> <label>Message</label> <textarea type="text" maxlength="400" md-maxlength="400" required ng-model="vm.message" name="message" rows="2"></textarea> <div ng-messages="vm.composeForm.message.$error"> <div ng-message="required">Message is required.</div> </div> </md-input-container> <div align="center"> <md-button class="md-raised" ng-click="vm.cancel()">Cancel</md-button> <md-button ng-disabled="vm.composeForm.$invalid" is-busy="vm.sendPromise" class="md-raised md-primary" ng-click="vm.send()">Send</md-button> </div> </form> </md-content>'),e.put("resources/app/components/questionnaireComponents/viewQsnrSubmissionsComponent/viewQsnrSubmissionsComponent.html",'<md-content layout-padding layout-wrap> <md-card> <md-card-content> <div promise-loader="vm.getsubmittedUsersPromise" text="Loading submissions..."></div> <div layout="row" ng-show="vm.submittedUsers.length" promise-hider="vm.getsubmittedUsersPromise" layout-wrap> <md-input-container flex="100"> <label>Search Users..</label> <md-icon>search</md-icon> <input type="text" ng-model="vm.searchFilter"> </md-input-container> <md-list flex layout-margin> <md-list-item layout="row" ng-repeat="user in vm.submittedUsers|filter:vm.searchFilter"> <md-icon style="font-size: 35px" class="md-avatar">account_circle</md-icon> <p md-truncate highlight-bind="user.organizationName + \' (\' + user.userId + \')\'| vm.searchFilter"></p> <md-button flex="none" is-busy="user.getUserQuesionnairePromise" ng-click="vm.getUserQuesionnaire(user)" class="md-raised"> View Questionnaire </md-button> </md-list-item> </md-list> </div> <div promise-hider="vm.getsubmittedUsersPromise" ng-hide="vm.submittedUsers.length" align="center"> <h4>None of the onboarded users have submitted Questionnaire!</h4> </div> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/ratingAndFeebacksComponent/deptFeedbackComponent/deptFeedbackComponent.html",'<br> <div> <form layout="row" layout-wrap name="vm.deptFeedbacksForm"> <md-radio-group ng-required="true" flex="100" style="padding-left: 18px; padding-bottom: 10px" ng-model="vm.stateRadio" layout="row" layout-align="center" ng-change="vm.stateCentralChange()"> <md-radio-button ng-click="vm.all=\'\'" value="all" class="md-primary">All</md-radio-button> <md-radio-button ng-click="vm.state=\'99\'" value="central" class="md-primary">Central</md-radio-button> <md-radio-button ng-click="vm.state=\'\'" value="state" class="md-primary">State</md-radio-button> </md-radio-group> <md-input-container flex="100" flex-gt-sm="100" ng-if="vm.stateRadio==\'state\'"> <label>State</label> <md-icon>pin_drop</md-icon> <md-select ng-required="true" md-on-open="vm.stateChange()" placeholder="State" name="state" ng-model-options="{trackBy: \'$value.stateid\'}" ng-model="vm.state" multiple="multiple" md-select-search="true"> <md-option ng-value="state" ng-repeat="state in vm.allStates">{{::state.statename}}</md-option> </md-select> <div ng-messages="vm.filterForm.state.$error"> <div ng-message="required">Please select a state.</div> </div> </md-input-container> <div flex="100" flex-gt-sm="100" layout="row" layout-align="start center"> <md-input-container flex="50" flex-gt-sm="50" class="input-margins" flex="auto"> <label>Platform</label> <md-icon class="grey-icon">devices</md-icon> <md-select md-select-search="true" ng-change="vm.refreshResults(\'os\')" ng-model="vm.deptFeedbacksFilters.os" name="os"> <md-option ng-value="os" ng-repeat="os in vm.opSystemsList">{{::os.name}}</md-option> </md-select> </md-input-container> <md-input-container flex="50" flex-gt-sm="50" flex-gt-sm="{{::vm.dropDownFlex}}" class="md-icon-float"> <label>Category</label> <md-icon class="grey-icon">question_answer</md-icon> <md-select multiple="multiple" md-on-open="vm.fetchCategories()" ng-model="vm.category"> <md-option ng-value="category" ng-repeat="category in vm.catagories ">{{::category}}</md-option> </md-select> </md-input-container> </div> <div flex="100" flex-gt-sm="100" layout="row" layout-align="start center"> <md-input-container class="input-margins" flex="auto" flex="50" flex-gt-sm="50"> <label>Departments/Apps</label> <md-icon class="grey-icon">apps</md-icon> <md-select multiple="multiple" md-select-search="true" ng-change="vm.refreshResults(\'app\')" ng-model="vm.deptFeedbacksFilters.apps" name="apps"> <md-option ng-value="app" ng-repeat="app in vm.allApps">{{::app.appname}}</md-option> </md-select> </md-input-container> <md-input-container class="input-margins" flex="50" flex-gt-sm="50"> <label>Filter By</label> <md-icon class="grey-icon">filter_list</md-icon> <md-select multiple="multiple" md-select-search="true" ng-change="vm.refreshResults(\'rating\')" ng-model="vm.deptFeedbacksFilters.filterBy" name="filterBy"> <md-option ng-value="filter" ng-repeat="filter in vm.filterByList">{{::filter.name}}</md-option> </md-select> </md-input-container> </div> \x3c!-- div flex="100" layout="row" layout-align="center center">\n            <md-button ng-click="vm.filterDepartments()" class="md-raised md-primary">\n                <md-icon>filter_list</md-icon> Filter Apps</md-button>\n            <md-button ng-show="vm.hasDeptFilters" ng-click="vm.clearDepartmentsFilter()" class="md-raised md-warn">\n                <md-icon>clear_all</md-icon> Clear Apps Filter</md-button>\n        </div --\x3e <div flex="100" flex-gt-sm="100" layout="row" layout-align="start center"> <md-input-container class="input-margins" flex="50" flex-gt-sm="50"> <label>Language</label> <md-icon class="grey-icon">translate</md-icon> <md-select multiple="multiple" md-select-search="true" ng-change="vm.refreshResults(\'lang\')" ng-model="vm.deptFeedbacksFilters.langs" name="langs"> <md-option ng-value="lang" ng-repeat="lang in vm.langsList">{{::lang.language}}</md-option> </md-select> </md-input-container> <md-input-container class="input-margins" flex="auto" flex="50" flex-gt-sm="50"> <label>Services</label> <md-icon class="grey-icon">dashboard</md-icon> <md-select multiple="multiple" md-select-search="true" ng-change="vm.refreshResults(\'service\')" ng-model="vm.deptFeedbacksFilters.services" name="services"> <md-option ng-value="service" ng-repeat="service in vm.allServices">{{::service.servicename}}</md-option> </md-select> </md-input-container> </div> <div flex="100" layout="row" layout-align="center center"> <md-button ng-show="vm.hasFilters()" class="md-raised md-warn" ng-click="vm.clearFilters()"> <md-icon>clear_all</md-icon> Clear All Filters</md-button> </div> </form> <div promise-loader="vm.getResultsPromise" text="Loading feedbacks..."></div> <div promise-hider="vm.getResultsPromise"> <md-card ng-repeat="feedback in vm.feedbacks"> <md-card-content> <div layout="row" layout-align="space-between"> <star-rating-component style="color:gold" rating="feedback.rating"></star-rating-component> <h5 class="no-margin">{{feedback.os}}</h5> <h5 class="no-margin">{{feedback.serviceName}}</h5> <h5 class="no-margin">{{feedback.dateTime | uscDate}}</h5> </div> <div layout="row" layout-align="space-between"> <p>{{feedback.comments}}</p> <div ng-show="feedback.profileId" layout="column" layout-align="center center"> <md-button is-busy="feedback.showProfilePromise" ng-click="vm.showProfileInfo(feedback)" class="md-primary">Profile Info</md-button> </div> </div> </md-card-content> </md-card> <pagination-component api="vm.paginator" on-fetch="vm.getResults" fetch-on-init="true" ng-show="vm.feedbacks.length"></pagination-component> </div> </div>'),e.put("resources/app/components/ratingAndFeebacksComponent/appFeedbacksComponent/appFeedbacksComponent.html",'<br> <div> \x3c!-- form layout="row" layout-wrap name="vm.appFeedbacksForm">\n      <md-input-container class="input-margins" flex="100">\n          <label>Filter By</label>\n          <md-icon class="grey-icon">filter_list</md-icon>\n          <md-select multiple md-select-search="true" ng-change="vm.refreshResults()" ng-model="vm.appFeedbacksFilters.filterBy" name="filterBy">\n              <md-option ng-value="filter" ng-repeat="filter in vm.filterByList">{{::filter.name}}</md-option>\n          </md-select>\n      </md-input-container>\n      <md-input-container class="input-margins" flex="auto">\n          <label>Platform</label>\n          <md-icon class="grey-icon">devices</md-icon>\n          <md-select multiple md-select-search="true" ng-change="vm.refreshResults()" ng-model="vm.appFeedbacksFilters.os" name="os">\n              <md-option ng-value="os" ng-repeat="os in vm.opSystemsList">{{::os.name}}</md-option>\n          </md-select>\n      </md-input-container>\n      <md-input-container class="input-margins" flex="auto">\n          <label>Language</label>\n          <md-icon class="grey-icon">translate</md-icon>\n          <md-select multiple md-select-search="true" ng-change="vm.refreshResults()" ng-model="vm.appFeedbacksFilters.langs" name="langs">\n              <md-option ng-value="lang" ng-repeat="lang in vm.langsList">{{::lang.language}}</md-option>\n          </md-select>\n      </md-input-container>\n      <div flex="100" layout="row" layout-align="center center">\n          <md-button class="md-raised md-warn" ng-show="vm.hasFilters()" ng-click="vm.clearFilters()"> <md-icon>clear_all</md-icon> Clear Filters</md-button>\n      </div>\n      </form --\x3e <div promise-loader="vm.getResultsPromise" text="Loading feedbacks..."></div> <div class="ratings-component" promise-hider="vm.getResultsPromise"> <div layout-align="center center" layout-wrap layout="row"> <div flex="100" flex-gt-sm="100" align="left" layout="row" layout-align="center center"> <div flex="50" flex-gt-sm="50" align="left"> <h2> Ratings: <star-rating-component style="color:gold" rating="vm.results.avgRating"></star-rating-component> <span>{{vm.results.avgRating}}</span> </h2> </div> <div flex="50" flex-gt-sm="50" align="left"> <md-input-container class="input-margins" flex="auto" style="width:97%"> <label>Operating system</label> <md-icon class="grey-icon">devices</md-icon> <md-select md-select-search="true" ng-change="vm.refreshResults()" ng-model="vm.appFeedbacksFilters.osAvgFeedback" name="os"> <md-option ng-value="os" ng-repeat="os in vm.opSystemsList">{{::os.name}}</md-option> </md-select> </md-input-container> </div> </div> <div flex="100" flex-gt-sm="100"> <md-card class="no-margin" layout-padding> <div flex="100" flex-gt-sm="100" layout="row" layout-align="start start" class="no_padding margin_btm_20"> <div flex-gt-sm="7" layout="row" layout-align="start center"> <md-icon style="font-size: 50px;float: left;margin: 0px;width: 100%;color: #005C9D;line-height: 30px">person</md-icon> </div> <div flex-gt-sm="50" class="Total_Usersmain"> <h4 class="no-margin">Total Users: {{vm.results.totalUsers}}</h4> <h4 class="no-margin">Feedback Received: {{vm.results.totalFeedbacks}}</h4> </div> </div> <div layout="row" ng-repeat="count in vm.results.ratingCounts track by $index" layout-align="start center" class="rating-bar rating-bar_newdata layout-row"> <div class="rating-line full_widthstar"> <span> {{::5-$index}} <star-rating-component blank-star="true" style="color:gold" rating="::5-$index"></star-rating-component> </span> <span> {{count}} </span> </div> \x3c!-- div layout="row" layout-align="space-around">\n                     <div class="rat-line">\n                         <div class="color-line" ng-style="{\'width\':count.percent+\'%\'}" ng-class="::{\'green\': $index==0||$index==1, \n                     \'orange\': $index==2||$index==3, \'red\': $last}"></div>\n                     </div--\x3e <span style="width: 40px">{{::count.value}}</span> </div> </md-card></div>  </div> <br> <div layout-align="center center" layout-wrap layout="row"> <div flex-gt-sm="100" class="Total_Usersmain_second"> <md-card class="no-margin" layout-wrap layout="row" flex="100" flex-gt-sm="100" flex-gt-sm="100"> <md-input-container class="input-margins" flex="100" flex-gt-sm="100" flex-gt-sm="100"> <label>Filter By</label> <md-icon class="grey-icon">filter_list</md-icon> <md-select multiple="multiple" md-select-search="true" ng-change="vm.refreshResults()" ng-model="vm.appFeedbacksFilters.filterBy" name="filterBy"> <md-option ng-value="filter" ng-repeat="filter in vm.filterByList"> <span ng-if="::filter.star"> <span>{{::filter.value}}</span> <star-rating-component blank-star="true" rating="filter.value"></star-rating-component> </span> <span ng-if="::!filter.star">{{::filter.name}}</span> </md-option> </md-select> </md-input-container> </md-card></div>  </div> <br> <div layout-align="center center" layout-wrap layout="row"> <div flex="100" flex-gt-sm="100"> <md-card class="no-margin" layout-wrap layout="row" flex="100" flex-gt-sm="100" flex-gt-sm="100"> <div layout="row" layout-align="space-around center" flex="100" flex-gt-sm="100"> <md-input-container class="input-margins" flex="auto"> <label>Platform</label> <md-icon class="grey-icon">devices</md-icon> <md-select md-select-search="true" ng-change="vm.refreshResults()" ng-model="vm.appFeedbacksFilters.os" name="os"> <md-option ng-value="os" ng-repeat="os in vm.opSystemsList">{{::os.name}}</md-option> </md-select> </md-input-container> <md-input-container class="input-margins" flex="auto"> <label>Language</label> <md-icon class="grey-icon">translate</md-icon> <md-select multiple="multiple" md-select-search="true" ng-change="vm.refreshResults()" ng-model="vm.appFeedbacksFilters.langs" name="langs"> <md-option ng-value="lang" ng-repeat="lang in vm.langsList">{{::lang.language}}</md-option> </md-select> </md-input-container> </div> <div flex="100" layout="row" layout-align="center center"> <md-button class="md-raised md-warn" ng-show="vm.hasFilters()" ng-click="vm.clearFilters()"> <md-icon>clear_all</md-icon> Clear Filters</md-button> </div> </md-card> </div> </div> <br> \x3c!--div layout-align="center center" layout-wrap layout="row">\n         <div flex="100" flex-gt-sm="100">\n            <md-card class="no-margin" layout-wrap layout="row"  flex="100" flex-gt-sm="100" flex-gt-sm="100">\n               <div layout="row" layout-align="space-around center" flex="100" flex-gt-sm="100">\n                  \x3c!-- md-input-container class="input-margins"  flex="33" flex-gt-sm="33" flex-gt-sm="33" >\n                     <label>Filter By</label>\n                     <md-icon class="grey-icon">filter_list</md-icon>\n                     <md-select multiple md-select-search="true" ng-change="vm.refreshResults()" ng-model="vm.appFeedbacksFilters.filterBy" name="filterBy">\n                        <md-option ng-value="filter" ng-repeat="filter in vm.filterByList">\n                           <span ng-if="::filter.star">\n                              <span>{{::filter.value}}</span>\n                              <star-rating-component blank-star="true" rating="filter.value"></star-rating-component>\n                           </span>\n                           <span ng-if="::!filter.star">{{::filter.name}}</span>\n                        </md-option>\n                     </md-select>\n                  </md-input-container\n                  <md-input-container class="input-margins" flex="50" flex-gt-sm="50" flex-gt-sm="50">\n                     <label>Start Date</label>\n                     <md-datepicker date-picker-clear md-open-on-focus ng-model="vm.startDate"></md-datepicker>\n                  </md-input-container>\n                  <md-input-container class="input-margins" flex="50" flex-gt-sm="50" flex-gt-sm="50">\n                     <label>End Date</label>\n                     <md-datepicker date-picker-clear md-open-on-focus ng-model="vm.endDate"></md-datepicker>\n                  </md-input-container>\n               </div>\n            </md-card>\n         </div>\n      </div--\x3e <br> <md-input-container flex="noshrink"> <label>Sort By</label> <md-select ng-model="vm.sortType" ng-change="vm.sortApps()"> <md-option value="latestFirst">Latest</md-option> <md-option value="oldestFirst">Oldest</md-option> </md-select> </md-input-container> <div class="feedback_main"> <md-card ng-repeat="feedback in vm.feedbacks"> <md-card-content> <div layout="row" layout-align="space-between"> <star-rating-component style="color:gold" rating="feedback.rating"></star-rating-component> <h5 class="no-margin">{{feedback.os}}</h5> <h5 class="no-margin">{{feedback.logdate | uscDate}}</h5> </div> <div layout="row" layout-align="space-between"> <p>{{feedback.feedback}}</p> </div> <div ng-show="feedback.mno" layout="column" layout-align="start start"> <md-button is-busy="feedback.showProfilePromise" ng-click="vm.showProfileInfo(feedback)" class="md-primary Profile_Info_feedback">Profile Info</md-button> </div> </md-card-content> </md-card> <div> <pagination-component api="vm.paginator" on-fetch="vm.getResults" fetch-on-init="true" ng-show="vm.feedbacks.length"></pagination-component> </div> </div> </div> </div>'),e.put("resources/app/components/roleComponents/createRoleComponent/createRoleComponent.html",'<md-content ng-class="{\'no-padding\':vm.dialogMode}" layout-padding> <md-card ng-class="{\'no-padding no-margin\':vm.dialogMode}" layout-padding> <div layout="row" layout-align="space-between center"> <md-card-title flex="80"> <div class="md-title">{{::!vm.role?\'Create New Role\':\'Edit Role\'}}<md-icon class="cursor-pointer info-icon"> <md-tooltip md-direction="bottom">You have to assign at least one right or at max one less than from all listed rights .</md-tooltip>info</md-icon></div> </md-card-title> <md-input-container flex="20"> <label>Sort By</label> <md-select ng-model="vm.sortType" ng-change="vm.sortApps()"> <md-option value="aToZ" selected="selected">A to Z</md-option> <md-option value="zToA">Z to A</md-option> </md-select> </md-input-container> </div> <form layout="row" name="vm.createRoleForm" layout-wrap class="EditRole_main"> <md-input-container flex="100" class="md-icon-float md-block"> <label>Role Name</label> <md-icon>security</md-icon> <input required ng-model="vm.roleName" name="roleName" type="text" maxlength="50"> <div ng-messages="vm.createRoleForm.roleName.$error"> <div ng-message="required">Role name is required.</div> </div> </md-input-container> <md-input-container flex="100" class="md-icon-float md-block"> <md-icon>search</md-icon> <input type="text" placeholder="Search Rights" ng-model="role"> <i class="material-icons" ng-click="role= \'\'" ng-show="role" style="margin-top: 7px;font-size: 20px;position:  absolute;top: 0px;right: 0px">close</i> </md-input-container> \x3c!--  <i class="material-icons" id="abc" ng-click="role = \'\'" style="margin-top: 27px; font-size: 20px;">close</i> --\x3e <div align="center" flex="100" hide> <md-button ng-click="vm.selectUnselectAll(true)" class="md-raised">Select All</md-button> <md-button ng-click="vm.selectUnselectAll(false)" class="md-raised">Unselect All</md-button> </div> \x3c!--   <md-input-container class="no-margin" flex="100" flex-gt-sm="33" flex-gt-xs="50" ng-repeat="right in vm.allRights |filter:role">\n                    <md-switch class="md-primary" md-theme="selfcare" ng-model="right.selected" ng-change="vm.change()">{{right.displayRightName}}</md-switch>\n                </md-input-container> --\x3e <md-card layout-padding flex="100"> <h2 class="title_role_edit" id="all">All</h2> <div flex="100" ng-repeat="right in vm.allRightCategoryWise"> <div class="md-title_sub margintop15">{{right.roleheader}}</div> <div> <md-input-container class="no-margin" flex="33" flex-gt-sm="33" flex-gt-xs="50" ng-repeat="innerright in right.rolerights | filter:role"> <md-switch class="md-primary" md-theme="selfcare" ng-model="innerright.selected" ng-change="vm.saveAs()">{{innerright.displayRightName}}</md-switch> </md-input-container> </div> </div> </md-card> <md-card layout-padding flex="100" id="Revoke"> <div id="NewlyAdded"> <div> <h2 class="title_role_edit">Newly Added</h2> </div> <md-input-container class="no-margin NewlyAdded_main" flex="33" flex-gt-sm="33" flex-gt-xs="50" ng-repeat="newadd in vm.Newlyadded | filter:role"> <md-switch ng-model="isActive" aria-label="Finished?" ng-disabled="true" class="md-primary" md-theme="selfcare"> <span class="displayName_span">{{newadd.displayName}}</span> <span class="creationDate_span">{{newadd.creationDate}}</span> </md-switch> </md-input-container> </div> <div class="Revoke_maindiv"> <h2 class="title_role_edit">Revoke</h2> \x3c!--  <div ng-repeat="right2 in vm.diffArray">\n                  <md-input-container class="no-margin" flex="33" flex-gt-sm="33" flex-gt-xs="50" ng-repeat="ABC in right2.rolerights">\n                  <md-switch ng-model="isActive" aria-label="Finished?" ng-disabled="true" class="md-primary" md-theme="selfcare">\n                     {{ABC.displayRightName}}\n                  </md-switch>\n                  \n               </md-input-container>\n                 </div> --\x3e <div class="revoke"> <md-input-container class="no-margin NewlyAdded_main" flex="33" flex-gt-sm="33" flex-gt-xs="50" ng-repeat="revoke in vm.Revokeunique |filter:role"> <md-switch ng-model="isActive" aria-label="Finished?" ng-disabled="true" class="md-primary" md-theme="selfcare"> <span class="displayName_span">{{revoke.displayName}}</span> <span class="creationDate_span">{{revoke.creationDate}}</span> </md-switch> </md-input-container> </div> </div><br> </md-card> <div flex="100" align="center" layout-margin> <md-button ng-if="vm.dialogMode" ng-click="vm.cancel()" class="md-raised">Cancel</md-button> <md-button ng-hide="::vm.role" ng-if="vm.dialogMode" ng-click="vm.cancel()" class="md-raised">Cancel</md-button> <md-button is-busy="vm.createRolePromise" ng-click="vm.createRole()" class="md-raised md-primary" ng-if="::!vm.role" ng-disabled="!vm.createRoleForm.$valid">Create</md-button> <md-button ng-if="::vm.role" is-busy="vm.saveRolePromise" ng-click="vm.saveEditedRole()" class="md-raised md-primary" ng-disabled="!vm.createRoleForm.$valid">Save</md-button> <md-button ng-show="::vm.role" ng-click="vm.saveas1111(role)" class="md-raised md-primary" id="saveAsbtn">Save As</md-button> </div> </form>  </md-card> </md-content>'),e.put("resources/app/components/ratingAndFeebacksComponent/userProfileComponent/userProfileComponent.html",'<md-content layout-padding layout-wrap> <div layout="column"> <p>Mobile No: {{vm.profile.userinfo[0].mno}}</p> <p>Name: {{vm.profile.userinfo[0].name}}</p> <p>Email: {{vm.profile.userinfo[0].email}}</p> <md-button style="width:100px;margin:0px" class="md-raised md-primary" ng-click="showDiv = !showDiv" ng-hide="showDiv">More Info</md-button> <div ng-show="showDiv"> <p>Address: {{vm.profile.userinfo[0].addr}}</p> <p>State: {{vm.profile.userinfo[0].state}}</p> <md-button style="width:100px;margin:0px" class="md-raised md-primary" ng-click="showDiv = !showDiv">less</md-button> </div> </div> </md-content>'),e.put("resources/app/components/roleComponents/editRoleComponent/editRoleComponent.html",'<md-content layout-padding> <md-card> <md-card-title> <div flex="80" class="md-title">Roles Created By You</div> </md-card-title> <md-card-title id="serchbtn" ng-hide="vm.allRoles<=0"> <md-input-container flex="80"> <label>Search by Role Name</label> <md-icon>search</md-icon> <input ng-model="vm.search" type="Search"> <i class="material-icons" ng-click="vm.search = \'\'" ng-show="vm.search" style="margin-top: 7px;font-size: 20px;position:  absolute;top: 0px;right: 0px">close</i> </md-input-container> <md-input-container flex="20" style="margin-top: 22px"> <label>Sort By</label> <md-select ng-model="vm.sortType" ng-change="vm.sortApps()"> <md-option value="latestFirst" selected="selected">Sort By Latest</md-option> <md-option value="oldestFirst">Sort By Old</md-option> </md-select> </md-input-container> </md-card-title> <md-card-content> <div promise-loader="vm.rolesPromise" text="Loading roles.."></div> <div id="roletable2"> <table width="100%" class="rolesPromise_table"> <thead> <tr> <td>Role Name</td> <td>Date of Creation</td> <td>Action</td> </tr> </thead> <tr ng-repeat="role in vm.allRoles | filter:vm.search"> <td md-truncate highlight-bind="role.roleName | vm.search">{{role.roleName}}</td> <td md-truncate highlight-bind="role.creationDate | vm.search">{{role.creationDate}}</td> <td> <md-button is-busy="role.getRolePromise" ng-click="vm.getAndEditRole(role)" class="md-raised md-primary"> Edit </md-button></td> </tr> </table> </div> \x3c!--  <md-list>\n                <md-list-item ng-repeat="role in vm.allRoles">\n                    <md-icon class="md-avatar">security</md-icon>\n                    <p md-truncate><strong>{{ role.roleName }}</strong><br>Creation Date:{{ role.creationDate}}</p>\n                    <md-button is-busy="role.getRolePromise" ng-click="vm.getAndEditRole(role)" class="md-raised">\n                        Edit\n                    </md-button>\n                </md-list-item>\n            </md-list> --\x3e <div align="center" ng-if="vm.allRoles && !vm.allRoles.length"> <h4>You have not created any roles yet!</h4> <md-button ui-sref="selfcare.roles.create" class="md-raised md-primary"> <md-icon>group_add</md-icon> Create New Role </md-button> </div> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/userComponents/editUsersComponent/editUsersComponent.html",'<md-content layout-padding> <md-card> <md-card-content> <div promise-loader="vm.getSubUsersPromise" text="Loading users.."></div> <div promise-hider="vm.getSubUsersPromise" layout="row" ng-show="vm.filters.payload || vm.subUsers.length" layout-wrap> <md-input-container flex> <label>Search by User ID and Organisation Name</label> <md-icon>search</md-icon> <input ng-model="vm.searchText" type="Search"> <i class="material-icons" ng-click="vm.searchText = \'\'" ng-show="vm.searchText" style="margin-top: 7px;font-size: 20px;position:  absolute;top: 0px;right: 0px">close</i> </md-input-container> <md-button class="md-fab md-mini md-primary" ng-click="vm.filterUsers()"> <md-tooltip md-direction="bottom">Modify Filters</md-tooltip> <md-icon md-menu-origin>filter_list</md-icon> </md-button> <md-input-container flex="20"> <label>Sort By</label> <md-select ng-model="vm.sortType" ng-change="vm.sortApps()"> <md-option value="latestFirst" selected="selected">Sort By Latest</md-option> <md-option value="oldestFirst">Sort By Old</md-option> <md-option value="aToZ">Sort By Organisation Name (A to Z)</md-option> <md-option value="zToA">Sort By Organisation Name (Z to A)</md-option> \x3c!-- <md-option value="LTon">User-Id(zToA)</md-option>\n                    <md-option value="NToP">User-Id(zToA)</md-option> --\x3e </md-select> </md-input-container> <md-button ng-show="vm.filters.payload" class="md-fab md-mini md-warn" ng-click="vm.clearFilters()"> <md-tooltip md-direction="bottom">Clear Filters</md-tooltip> <md-icon md-menu-origin>close</md-icon> </md-button> <table width="100%" layout-margin ng-container matcolumndef="position" id="table" class="Useredittable"> <thead> <tr class="text-left"> <td>User ID</td> <td>Organization Name</td> <td>Date of Creation</td> <td>Action</td> </tr> </thead> <tbody> <tr ng-repeat="user in vm.subUsers | filter : vm.searchText"> <td md-truncate highlight-bind="user.userId | vm.searchText">{{user.userId}}</td> <td>{{ user.applicationName}}</td> \x3c!--  <td>{{ user.applicationName <= 0 || user.applicationName== undefined ? \'NA\' : user.applicationName}}</td> --\x3e \x3c!--  <td>{{ng-if="user.applicationName <= 0 || user.applicationName== undefined" \'NA\' else= user.applicationName}}</td> --\x3e \x3c!-- <td>{{user.creationDate}}</td> --\x3e <td>{{user.creationDate}}</td> <td> <md-button flex="10" ng-hide="::vm.forTree" is-busy="user.getUserPromise" ng-click="vm.editUser(user)" class="md-raised md-primary"> Edit </md-button> <md-button ng-show="::vm.forTree" is-busy="user.getTreePromise" ng-click="vm.viewTree(user)" class="md-raised md-primary"> View Tree </md-button></td> </tr> </tbody> </table> \x3c!--    <md-list flex="100" layout-margin>\n                    <md-list-item ng-repeat="user in vm.subUsers|filter:vm.searchFilter">\n                        <md-icon flex="5" style="font-size: 35px" class="md-avatar">account_circle</md-icon>\n                        <div flex="85" layout="column"       layout-align="center start">\n                        <span flex="100" md-truncate highlight-bind="user.userId | vm.searchFilter"></span>\n                       <span class="applicationName_here" flex="100" md-truncate highlight-bind="user.applicationName | vm.searchFilter"></span>\n                        <span class="applicationName_here" flex="100" md-truncate highlight-bind="user.creationDate | vm.searchFilter"></span>\n                        </div>\n                        <md-button flex="10" ng-hide="::vm.forTree" is-busy="user.getUserPromise" ng-click="vm.editUser(user)" class="md-raised">\n                            View / Edit\n                        </md-button>\n                        <md-button ng-show="::vm.forTree" is-busy="user.getTreePromise" ng-click="vm.viewTree(user)" class="md-raised">\n                            View Tree\n                        </md-button>\n                    </md-list-item>\n                </md-list> --\x3e </div> <div promise-hider="vm.getSubUsersPromise" ng-hide="vm.filters.payload || vm.subUsers.length" align="center"> <h4>You have no users under you!</h4> <md-button ui-sref="selfcare.users.create" class="md-raised md-primary"> <md-icon>person_add</md-icon> Create New User </md-button> </div> <div promise-hider="vm.getSubUsersPromise" ng-show="vm.filters.payload && !vm.subUsers.length" align="center"> <h4>No results found!</h4> </div> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/userComponents/userTreeComponent/userTreeComponent.html",'<div flex="100%" class="search-box" layout="row" layout-align="start center"> <i class="material-icons" style="padding: 10px 15px">search</i> <input class="treesearch_boxx" type="text" placeholder="Search by User ID " ng-model="appFilter"> </div> \x3c!-- input class="treesearch_boxx" type="text" placeholder="Search by User ID "  ng-model="appFilter" --\x3e <md-content class="treesearch_main" scroll-horizontal="tree"> <div class="tree"> <ul> <user-tree-directive searchuser="appFilter" user="vm.tree"></user-tree-directive> </ul> </div> </md-content>'),e.put("resources/app/components/userComponents/createUserComponent/createUserComponent.html",'<md-content layout-padding> <md-card> <md-card-title> <div class="md-title">Create New User</div> </md-card-title> <md-card-content> <form name="vm.createUserForm" layout="row" layout-wrap layout-align="space-around center"> <md-radio-group ng-change="vm.filterAndLoadApps()" ng-show="vm.isSuperAdmin || vm.stateName" flex="100" layout-align="center center" ng-model="vm.stateRadio" layout="row"> <md-radio-button ng-click="vm.userData.all=\'\'" value="all" class="md-primary">All</md-radio-button> <md-radio-button ng-click="vm.userData.state=\'99\'" class="md-primary">Central</md-radio-button> <md-radio-button ng-click="vm.userData.state=\'\'" value="state" class="md-primary">State</md-radio-button> </md-radio-group> <md-input-container flex="95" ng-if="vm.stateRadio==\'state\'"> <label>State</label> <md-icon>pin_drop</md-icon> <md-select ng-required="true" placeholder="State" name="state" ng-change="vm.filterAndLoadApps()" ng-model="vm.userData.state" md-select-search="vm.allStates.length>5"> <md-option ng-value="state.stateid" ng-repeat="state in vm.allStates">{{::state.statename}}</md-option> </md-select> <div ng-messages="vm.onboardForm.state.$error"> <div ng-message="required">State is required.</div> </div> </md-input-container> \x3c!--  <md-input-container flex="95" ng-show="vm.isSuperAdmin" ng-if="vm.stateRadio==\'all\'">\n                    <label>State</label>\n                    <md-icon>pin_drop</md-icon>\n                    <md-select ng-required="true" placeholder="State" name="state" ng-change="vm.filterAndLoadApps()" ng-model="vm.userData.state" md-select-search="vm.allStates.length>5">\n                        <md-option ng-value="state.stateid" ng-repeat="state in vm.allStates">{{::state.statename}}</md-option>\n                    </md-select>\n                    <div ng-messages="vm.onboardForm.state.$error">\n                        <div ng-message="required">State is required.</div>\n                    </div>\n                </md-input-container> --\x3e <md-input-container flex="100" flex-gt-sm="45"> <label>User Role</label> <md-icon>security</md-icon> <md-select ng-required="true" placeholder="User Role" name="role" ng-model="vm.userData.role" md-on-open="vm.getRoles()" md-select-search="vm.roles.length>5"> <md-option ng-value="role" ng-repeat="role in vm.roles">{{::role.roleName}}</md-option> </md-select> <div ng-messages="vm.createUserForm.role.$error"> <div ng-message="required">Role is required.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="45"> <label>Apps to be Assigned ({{vm.userData.selectedApps.length}} Selected)</label> <md-icon>dashboard</md-icon> <md-select ng-required="true" md-on-open="vm.onAppDropdownOpen()" placeholder="Apps to be Assigned" name="apps" ng-model="vm.userData.selectedApps" multiple="multiple" md-select-search="vm.allApps.length>5"> <md-option ng-value="app" ng-repeat="app in vm.allApps">{{app.appname}}</md-option> </md-select> <div ng-messages="vm.createUserForm.apps.$error"> <div ng-message="required">Please select atleast one app.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="45" class="md-icon-float md-block"> <label>Email</label> <md-icon>email</md-icon> <input required ng-model="vm.userData.email" name="email" type="text" minlength="5" maxlength="60" ng-pattern="vm.emailPattern"> <div ng-messages="vm.createUserForm.email.$error"> <div ng-message="required">Email is required.</div> <div ng-message-exp="[\'minlength\', \'maxlength\', \'pattern\']">Please enter a valid email.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="45" class="md-icon-float md-block"> <label>Mobile Number</label> <md-icon>phone</md-icon> <input prefix91 required ng-model="vm.userData.mobile" name="mobile" type="text" ng-maxlength="10" maxlength="10" ng-pattern="vm.mobilePattern"> <div ng-messages="vm.createUserForm.mobile.$error"> <div ng-message="required">Mobile number is required.</div> <div ng-message="pattern">Please enter a valid mobile number.</div> </div> </md-input-container> <md-input-container flex="95" class="md-icon-float md-block"> <label>Organisation</label> <md-icon>location_disabled</md-icon> <input required ng-model="vm.userData.Organisation" name="Organisation" type="text" ng-maxlength="10" maxlength="10"> <div ng-messages="vm.createUserForm.Organisation.$error"> <div ng-message="required">Organisation name is required.</div> </div> </md-input-container> \x3c!--  <md-input-container flex="100" flex-gt-sm="30">\n                <label>Organization name</label>\n                  <md-icon>location_disabled</md-icon>\n                 <input type="text" ng-model="organisation" placeholder="{{vm.user.organizationName}}" ng-disabled="true"> \n                 </md-input-container> --\x3e </form> <div align="center" layout-margin> <md-button type="submit" is-busy="vm.createUserPromise" ng-click="vm.createUser()" class="md-raised md-primary" ng-disabled="!vm.createUserForm.$valid">Create</md-button> </div> </md-card-content> </md-card> </md-content>'),e.put("resources/app/components/userComponents/viewAndEditUserComponent/viewAndEditUserComponent.html",'<md-content layout-padding layout-margin> <form name="vm.editUserForm" layout="row" layout-wrap layout-align="start center" id="editUserForm_main"> <md-input-container flex="100" flex-gt-sm="30"> <label>UserID</label> <md-icon class="grey-icon">account_circle</md-icon> <input ng-readonly="true" type="text" ng-model="vm.user[0].userId"> </md-input-container> \x3c!--  <md-input-container flex="100" flex-gt-sm="45">\n            <label>Communication Email</label>\n            <md-icon class="grey-icon">email</md-icon>\n            <input ng-readonly="true" type="text" ng-model="vm.user.email">\n        </md-input-container> --\x3e <md-input-container flex="100" flex-gt-sm="30"> <label>Mobile Number</label> <md-icon class="grey-icon">phone</md-icon> <input ng-readonly="true" type="text" ng-model="vm.user[0].mno"> </md-input-container> <md-input-container flex="100" flex-gt-sm="30"> <label>Creation Date/Time</label> <md-icon class="grey-icon">date_range</md-icon> <input ng-readonly="true" type="text" ng-init="vm.user[0].cdate = (vm.user[0].cdate)" ng-model="vm.user[0].cdate"> </md-input-container> <md-input-container flex="100" flex-gt-sm="30"> <label>User Status</label> <md-icon ng-show="vm.user.status==\'active\'">done_all</md-icon> <md-icon ng-show="vm.user.status==\'deactive\'">pause</md-icon> <md-icon ng-show="vm.user.status==\'pending\'">report</md-icon> <md-icon ng-show="vm.user.status==\'blocked\'">block</md-icon> <md-select ng-required="true" placeholder="User Status" name="status" ng-model="vm.user[0].status"> <md-option value="active">Activated</md-option> <md-option value="deactive">Deactivated</md-option> <md-option disabled="disabled" value="blocked">Blocked</md-option> <md-option disabled="disabled" ng-if="vm.user.status==\'pending\'" value="pending">Pending</md-option> </md-select> </md-input-container> <md-input-container flex="100" flex-gt-sm="30"> <label>User Role</label> <md-icon class="grey-icon">security</md-icon> <md-select ng-required="true" onit="" md-on-open="vm.changerole12()" ng-change="vm.RoleChange()" placeholder="User Role" name="role" ng-model="vm.selectedRoles" md-select-search="vm.roles.length>5"> <md-option ng-value="role" ng-repeat="role in vm.roles">{{::role.roleName}}</md-option> </md-select> </md-input-container> \x3c!-- ng-if="vm.isRoleEditable" incase of required if guest user can edit --\x3e <div flex-gt-sm="30"> <div layout-align="start center" layout="row" layout-wrap> <md-input-container flex="100" flex-gt-sm="100"> <label>Nature</label> <md-icon class="grey-icon">group</md-icon> <md-select ng-required="true" placeholder="User Status" name="status" ng-model="vm.stateRadio" ng-change="vm.stateChange123()" flex-gt-sm="100" ng-disabled="vm.stateName1==\'State\'"> <md-option ng-click="vm.state=\'99\'" value="central">Central</md-option> <md-option ng-click="vm.state=\'\'" value="state">State</md-option> <md-option ng-click="vm.all=\'\'" value="all">All</md-option> </md-select> </md-input-container> </div> </div> <md-input-container flex="100" flex-gt-sm="30"> <label>Category</label> <md-icon>bubble_chart</md-icon> <md-select md-on-open="vm.fetchcatagorynew()" ng-change="vm.catagoryChange()" ng-required="true" placeholder="Select Category" name="catagory" ng-model="vm.catagory" multiple="multiple" md-select-search="vm.catagories.length>5"> <md-option ng-value="catagory" ng-repeat="catagory in vm.catagories">{{catagory.categoryName}}</md-option> </md-select> <div ng-messages="vm.editUserForm.catagories.$error"> <div ng-message="required">Please select catagory.</div> </div> </md-input-container> \x3c!--   <md-input-container flex ng-if="vm.stateRadio==\'all\'" flex="100" flex-gt-sm="30">\n                <label>Select state</label>\n                <md-icon>pin_drop</md-icon>\n                <md-select md-on-open="fetchStatewithcntrl()" ng-change="vm.stateChange()" placeholder="Select State" ng-required="vm.stateRadio==\'state\'" name="state" ng-model="vm.state" multiple md-select-search="vm.allStates.length>5">\n                    <md-option ng-value="state" ng-repeat="state in vm.allStates">{{::state.statename}}</md-option>\n                </md-select>\n                <div ng-messages="vm.editUserForm.state.$error">\n                    <div ng-message="required">Please select state.</div>\n                </div>\n            </md-input-container> --\x3e <md-input-container flex ng-if="vm.stateRadio==\'state\'" flex="100" flex-gt-sm="30"> <label>Select state</label> <md-icon>pin_drop</md-icon> <md-select md-on-open="vm.getStates()" ng-change="vm.stateChange()" placeholder="Select State" ng-required="vm.stateRadio==\'state\'" name="state" ng-model="vm.state" selectedvalue multiple="multiple" md-select-search="vm.allStates.length>5"> <md-option ng-value="state" ng-repeat="state in vm.allStates">{{::state.statename}}</md-option> </md-select> <div ng-messages="vm.editUserForm.state.$error"> <div ng-message="required">Please select state.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="30"> <label>Select Application</label> <md-icon>apps</md-icon> <md-select ng-required="true" placeholder="Select Application" md-on-open="vm.onAppsDDOpen()" name="apps" ng-model="vm.selectedApps1" multiple="multiple" md-select-search="vm.Apps.length>5"> <md-option ng-value="app" ng-repeat="app in vm.Apps">{{::app.departmentName}}</md-option> </md-select> <div ng-messages="vm.editUserForm.apps.$error"> <div ng-message="required">Please select atleast one app.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="30"> \x3c!--  <label>Organisation name</label>\n            <md-icon>dashboard</md-icon>\n            <md-select ng-required="false" placeholder="Spice Digital" name="apps" ng-model="myorgsn" >\n                <md-option value="{{app.departmentId}}"  ng-repeat="app in vm.Apps">{{::app.departmentName}}</md-option>\n            </md-select>\n            <div ng-messages="vm.editUserForm.apps.$error">\n                <div ng-message="required">Please select atleast one app.</div>\n            </div> --\x3e <label>Organization name</label> <md-icon>location_disabled</md-icon> <input type="text" ng-model="organisation" placeholder="{{vm.user.organizationName}}" ng-disabled="true"> </md-input-container> <div flex="100" align="center"> <md-button ng-if="vm.forDialog" ng-click="vm.cancel()" class="md-raised">Cancel</md-button> <md-button ng-disabled="vm.editUserForm.$invalid" is-busy="vm.savingUserPromise" type="submit" ng-click="vm.saveUser()" class="md-raised md-primary">Save</md-button> </div> </form> </md-content>'),e.put("resources/app/components/userQueryComponent/emailViewComponent/emailViewComponent.html",'<md-content layout-padding> <div layout="row" layout-padding> <div flex layout="row" layout-wrap> <div flex-gt-sm="30" flex="100"><strong style="line-height: 40px">Reference ID: {{::vm.emailData.reference_id}}</strong></div> <div flex-gt-sm="40" flex="100"><strong style="line-height: 40px">Date/Time: {{::vm.emailData.in_time|uscDate}}</strong></div> <div flex-gt-sm="15" flex="50" flex-order-gt-sm="0" flex-order="1"> <a href="mailto:{{vm.emailData.efrom}}" class="md-button md-primary"> <md-icon class="md-primary">reply</md-icon> <span>Reply</span> </a> </div> <div flex-gt-sm="15" flex="50" flex-order-gt-sm="0" flex-order="2"> <a ng-disabled="true" class="md-button md-primary"> <md-icon class="md-primary">attach_file</md-icon> <span>Attachment</span> </a> </div> <div style="width: 100%"> <p flex="100"> <md-icon>email</md-icon><strong> From:</strong> {{::vm.emailData.efrom}} </p> <div class="divider"></div> <p flex="100"><strong>Subject:</strong> {{::vm.emailData.subject}}</p> <div class="divider"></div> <p flex="100" ng-bind-html="::vm.emailData.body"></p> </div> </div> </div> <form layout="row" flex="100" name="vm.statusForm" layout-align="space-around" layout-wrap> <md-input-container flex="30" class="md-icon-float md-block"> <label>Status</label> <md-icon>done_all</md-icon> <md-select ng-model="vm.selectedStatus"> <md-option ng-value="option" ng-repeat="option in vm.statusOptions">{{::option.displayName}}</md-option> </md-select> </md-input-container> <md-input-container flex="80" class="padding-b-10"> <label>Comment</label> <md-icon>question_answer</md-icon> <textarea type="text" name="comment" required ng-model="vm.emailData.remarks" placeholder="Add any comment.." rows="2"></textarea> <div ng-messages="vm.statusForm.comment.$error"> <div ng-message="required"> Comment is required. </div> </div> </md-input-container> <div flex="100" align="center"> <md-button class="md-raised" ng-click="vm.$mdDialog.cancel()">Cancel</md-button> <md-button usc-right="takeQueryAction" ng-disabled="vm.statusForm.$invalid" type="submit" is-busy="vm.saveQueryPromise" class="md-raised md-primary" ng-click="vm.saveQueryStatus()">Save</md-button> </div> </form> </md-content>'),e.put("resources/app/components/userQueryComponent/emailViewComponent/viewattachmentcomponent.html",'<md-content layout-padding> <form layout="row" flex="100" name="vm.statusForm" layout-align="space-around" layout-wrap> <p flex="100"><strong>Attachment:</strong> {{::vm.emailData.attachment}}</p> <p flex="100"><strong>subject:</strong> {{::vm.emailData.subject}}</p> \x3c!--<img src="icon.apple-touch-icon-120x120.png" alt="Flowers in Chania">  --\x3e <div class="divider"></div> <img src="::vm.emailData.attachment" alt="No attachment fond"> </form> </md-content>'),e.put("resources/app/components/userComponents/filterUsersComponent/filterUsersComponent.html",'<md-content layout-padding layout-wrap> <form name="vm.form" layout="row" layout-wrap> <md-radio-group ng-show="vm.isSuperAdmin" flex="100" flex-gt-sm="{{vm.filters.selected.stateRadio==\'state\'?\'50\':\'100\'}}" style="padding-left: 18px; padding: 10px" ng-model="vm.filters.selected.stateRadio" layout="row" layout-align="center center" ng-change="vm.stateCentralChange()"> <md-radio-button value="all" class="md-primary">All</md-radio-button> <md-radio-button value="central" class="md-primary">Central</md-radio-button> <md-radio-button value="state" class="md-primary">State</md-radio-button> </md-radio-group> <md-input-container flex="100" flex-gt-sm="50" ng-if="vm.filters.selected.stateRadio==\'state\'"> <label>State</label> <md-icon>pin_drop</md-icon> <md-select ng-required="true" placeholder="State" name="state" ng-model-options="{trackBy: \'$value.stateid\'}" ng-model="vm.filters.selected.state" md-select-search="vm.allStates.length>5"> <md-option ng-value="state" ng-repeat="state in vm.allStates">{{::state.statename}}</md-option> </md-select> <div ng-messages="vm.form.state.$error"> <div ng-message="required">Please select a state.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>Apps ({{vm.filters.selected.apps.length}} Selected)</label> <md-icon>dashboard</md-icon> <md-select placeholder="Apps" name="selectedApps" ng-model="vm.filters.selected.apps" multiple="multiple" md-select-search="vm.filters.master.allApps.length>5"> <md-option ng-value="app" ng-repeat="app in vm.filters.master.allApps">{{::app.appname}}</md-option> </md-select> <div ng-messages="vm.form.selectedApps.$error"> <div ng-message="required">Please select at least one app.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>Roles ({{vm.filters.selected.roles.length}} Selected)</label> <md-icon>security</md-icon> <md-select placeholder="Roles" name="selectedRoles" md-on-open="vm.getRoles()" ng-model="vm.filters.selected.roles" multiple="multiple"> <md-option ng-value="role" ng-repeat="role in vm.filters.master.allRoles">{{::role.roleName}}</md-option> </md-select> <div ng-messages="vm.form.selectedRoles.$error"> <div ng-message="required">Please select at least one app.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>categories ({{vm.filters.selected.categories.length}} Selected)</label> <md-icon>bubble_chart</md-icon> <md-select placeholder="categories" name="selectedCategories" md-on-open="vm.getCategories()" ng-model="vm.filters.selected.categories" multiple="multiple" md-select-search="vm.filters.master.allCategories.length>5"> <md-option ng-value="category" ng-repeat="category in vm.filters.master.allCategories">{{::category.categoryName}}</md-option> </md-select> <div ng-messages="vm.form.selectedCategories.$error"> <div ng-message="required">Please select at least one app.</div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>Status</label> <md-icon ng-show="vm.filters.selected.status==\'active\' || !vm.filters.selected.status">done_all</md-icon> <md-icon ng-show="vm.filters.selected.status==\'deactive\'">pause</md-icon> <md-icon ng-show="vm.filters.selected.status==\'pending\'">report</md-icon> <md-icon ng-show="vm.filters.selected.status==\'blocked\'">block</md-icon> <md-select placeholder="User Status" name="status" ng-model="vm.filters.selected.status"> <md-option value="active">Activated</md-option> <md-option value="deactive">Deactivated</md-option> <md-option value="blocked">Blocked</md-option> <md-option value="pending">Pending</md-option> </md-select> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>Creation Start Date</label> <md-datepicker required md-open-on-focus name="startDate" md-max-date="vm.endDate || vm.maxEndDate" md-min-date="vm.minStartDate" flex="100" ng-model="vm.startDate"></md-datepicker> \x3c!-- <div ng-messages="vm.form.startDate.$error"> --\x3e \x3c!--  <div ng-message="valid">Please select a valid Date.</div> --\x3e <div ng-messages="vm.dateRangeForm.startDate.$error"> <div ng-message="required"> Start Date is Required. </div> <div ng-message="valid"> Please enter a valid date. </div> <div ng-message="mindate"> Start date cannot be less than {{::vm.minStartDate|date}} </div> <div ng-message="maxdate"> Start date cannot be greater than end Date. </div> </div> \x3c!--             </div> --\x3e </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>Creation End Date</label> <md-datepicker required md-open-on-focus name="endDate" flex="100" md-max-date="vm.maxEndDate" md-min-date="vm.startDate || vm.minStartDate" ng-model="vm.endDate"></md-datepicker> \x3c!--  <div ng-messages="vm.form.endDate.$error">\n                <div ng-message="valid">Please select a valid Date.</div>\n            </div> --\x3e <div ng-messages="vm.dateRangeForm.endDate.$error"> <div ng-message="required"> End Date is Required. </div> <div ng-message="valid"> Please enter a valid date. </div> <div ng-message="mindate"> End date cannot be less than end Date. </div> <div ng-message="maxdate"> End date cannot be greater than {{::vm.maxEndDate|date}} </div> </div> </md-input-container> <div align="center" flex="100"> <md-button ng-click="vm.cancel()" hide show-gt-sm class="md-raised">Cancel</md-button> \x3c!--  <md-button ng-show="vm.isFormFilled()" ng-click="vm.reset()" class="md-raised md-warn">Reset</md-button> --\x3e <md-button type="submit" ng-disabled="vm.form.$invalid" ng-click="vm.submit()" class="md-raised md-primary">Submit</md-button> </div> </form> </md-content>'),e.put("resources/app/components/_commonComponents/changePasswordComponent/changePasswordComponent.html",'<md-content layout-padding layout-wrap> <form name="vm.resetPasswordForm" layout="column"> <div align="center"> <h3 class="md-headline">Change Password</h3> <h5 ng-if="vm.forFirsTime">You need to change password when logging in for the first time.</h5> <h5 ng-if="vm.forExpired">Your password is expired.</h5> </div> <md-input-container ng-if="!vm.forFirsTime && !vm.forExpired"> <label>Old Password</label> <md-icon>lock</md-icon> <input ng-model="vm.oldPassword" type="password" required name="oldPassword"> <div ng-messages="vm.resetPasswordForm.oldPassword.$error"> <div ng-message="required">Old Password is required.</div> </div> </md-input-container> <md-input-container> <label>New Password</label> <md-icon>lock</md-icon> <input ng-model="vm.password" maxlength="16" type="password" required name="password" minlength="8"> <div ng-messages="vm.resetPasswordForm.password.$error"> <div ng-message-exp="[\'required\',\'minlength\']">New password should be atleast 8 characters long.</div> </div> </md-input-container> <md-input-container> <label>Please Enter Confirm Password</label> <md-icon>lock</md-icon> <input ng-model="vm.confirmPassword" maxlength="16" type="password" required name="confirmPassword" equals="vm.password"> <div ng-messages="vm.resetPasswordForm.confirmPassword.$error"> <div ng-message="required">Please confirm password.</div> <div ng-message="equals">Password doesn\'t match.</div> </div> </md-input-container> <div align="center" class="padding-10" ng-if="vm.forFirsTime || vm.forExpired"> <span class="small-grey-text">This Screen will close in {{vm.timeLeft}} seconds.</span> </div> <div align="center"> <md-button ng-hide="vm.forFirsTime || vm.forExpired" ng-click="vm.cancel()" class="md-raised">Cancel</md-button> <md-button type="submit" is-busy="vm.changePwdPromise" ng-click="vm.changePassword()" ng-disabled="!vm.resetPasswordForm.$valid" class="md-raised md-primary">Save</md-button> </div> </form> </md-content> '),e.put("resources/app/components/_commonComponents/dateRangeSelectorComponent/dateRangeSelectorComponent.html",'<md-content layout-padding layout-wrap> <form name="vm.dateRangeForm" layout="row" layout-wrap layout-align="space-around"> <md-input-container flex="100" flex-gt-sm="50"> <label>Start Date</label> <md-datepicker required md-open-on-focus name="startDate" md-max-date="vm.endDate || vm.maxEndDate" md-min-date="vm.minStartDate" flex="100" ng-model="vm.startDate"></md-datepicker> <div ng-messages="vm.dateRangeForm.startDate.$error"> <div ng-message="required"> Start Date is Required. </div> <div ng-message="valid"> Please enter a valid date. </div> <div ng-message="mindate"> Start date cannot be less than {{::vm.minStartDate|date}} </div> <div ng-message="maxdate"> Start date cannot be greater than end Date. </div> </div> </md-input-container> <md-input-container flex="100" flex-gt-sm="50"> <label>End Date</label> <md-datepicker required md-open-on-focus name="endDate" flex="100" md-max-date="vm.maxEndDate" md-min-date="vm.startDate || vm.minStartDate" ng-model="vm.endDate"></md-datepicker> <div ng-messages="vm.dateRangeForm.endDate.$error"> <div ng-message="required"> End Date is Required. </div> <div ng-message="valid"> Please enter a valid date. </div> <div ng-message="mindate"> End date cannot be less than end Date. </div> <div ng-message="maxdate"> End date cannot be greater than {{::vm.maxEndDate|date}} </div> </div> </md-input-container> <md-button class="md-raised md-primary" ng-disabled="vm.dateRangeForm.$invalid" ng-click="vm.submit()">Submit</md-button> </form> </md-content>'),e.put("resources/app/components/userQueryComponent/queryViewComponent/queryViewComponent.html",'<md-content layout-padding> <div layout="row" layout-xs="column" layout-align="space-between" layout-padding> <h4> Reference ID: {{vm.queryData.ticket_id}} </h4> <h4> Date Logged: {{vm.queryData.log_time|uscDate}} </h4> </div> <div layout-wrap layout="row"> <md-input-container flex="50" class="padding-b-10"> <label>User Name</label> <md-icon class="grey-icon">account_circle</md-icon> <input type="text" ng-model="vm.queryData.user_name" readonly="true"> </md-input-container> <md-input-container flex="50" class="padding-b-10"> <label>Mobile Number</label> <md-icon class="grey-icon">phone</md-icon> <input type="text" ng-model="vm.queryData.user_mno" readonly="true"> </md-input-container> <md-input-container flex class="padding-b-10"> <label>Query</label> <md-icon class="grey-icon">announcement</md-icon> <textarea type="text" ng-model="vm.queryData.query" readonly="true"></textarea> </md-input-container> <form layout="row" flex="100" name="vm.statusForm" layout-align="space-around" layout-wrap> <md-input-container flex="30" class="md-icon-float md-block"> <label>Status</label> <md-icon>done_all</md-icon> <md-select ng-model="vm.selectedStatus"> <md-option ng-value="option" ng-repeat="option in vm.statusOptions">{{::option.displayName}}</md-option> </md-select> </md-input-container> <md-input-container flex="80" class="padding-b-10"> <label>Comment</label> <md-icon>question_answer</md-icon> <textarea type="text" name="comment" required ng-model="vm.queryData.remarks" placeholder="Add any comment.." rows="2"></textarea> <div ng-messages="vm.statusForm.comment.$error"> <div ng-message="required"> Comment is required. </div> </div> </md-input-container> <div flex="100" align="center"> <md-button class="md-raised" ng-click="vm.$mdDialog.cancel()">Cancel</md-button> <md-button usc-right="takeQueryAction" ng-disabled="vm.statusForm.$invalid" type="submit" is-busy="vm.saveQueryPromise" class="md-raised md-primary" ng-click="vm.saveQueryStatus()">Save</md-button> </div> </form> </div> </md-content> '),e.put("resources/app/components/_commonComponents/keywordAccordionComponent/keywordAccordionComponent.html",'<md-card class="no-margin"> <div class="accordion" ng-class="{\'dark\':vm.appId}" style="padding-right: 50px" layout="row" ng-click="vm.openAccordion()" style=""> <span class="title" md-truncate>{{::vm.displayName}}</span> <md-icon class="arrow" ng-class="{\'open\': (vm.openAccordionObj.id == vm.accordionId)}">keyboard_arrow_right</md-icon> </div> <div ng-if="vm.openAccordionObj.id == vm.accordionId" class="animate-if"> <div usc-right="{{vm.service?\'editServiceKeywords\':\'editAppKeywords\'}}" layout="column" class="no-padding" layout-margin> <form name="vm.keywordForm" id="vm.keywordForm"> <div layout="row" flex="100"> <md-input-container flex class="no-margin"> <label for="keyword">Create Keywords</label> <textarea type="text" id="keyword" rows="2" name="keyword" required ng-init="vm.newKeywords=\'\'" ng-model="vm.newKeywords"></textarea> <div ng-messages="vm.keywordForm.keyword.$error" role="alert"> <div ng-message="required"> Keyword is Required. </div> </div> <div style="padding-top: 10px;font-size: 14px;color: grey">You can enter multiple keywords by separating using new line.</div> </md-input-container> <div align="right"> <md-button flex class="md-raised custom-green" ng-disabled="!vm.keywordForm.$valid" ng-click="vm.addKeywords()">Add</md-button> </div> </div> </form> </div> <div layout="column" layout-xs="column" class="no-padding" layout-margin> <div ng-if="vm.keywords.length"> <h4>Assigned keywords to {{vm.displayName}}</h4> <md-chips ng-model="vm.keywords" name="linkCategory" readonly="true"> <md-chip-template> <strong ng-class="{\'new-chip-animate\':vm.isNewlyAdded($chip)}">{{$chip}}</strong> <md-icon ng-class="{\'spin\': (vm.spinning==$chip)}" usc-right="{{vm.service?\'editServiceKeywords\':\'editAppKeywords\'}}" class="cursor-pointer" ng-click="vm.deleteConfirm($chip)">close</md-icon> </md-chip-template> </md-chips> </div> <div align="center" ng-if="!vm.isloadingKeywords && !vm.keywords.length"> <span class="small-grey-text">No keywords assigned to {{::vm.displayName}} in {{vm.selectedLanguage.language}}.</span> </div> <div usc-right="editServiceKeywords"> <div ng-show="vm.service && vm.keywordsOfApp.length"> <h4>Available Keywords in {{::vm.service.app.appname}}</h4> <md-chips ng-model="vm.keywordsOfApp" readonly="true"> <md-chip-template> <strong>{{$chip}}</strong> <md-icon ng-class="{\'spin\': (vm.spinning==$chip)}" class="cursor-pointer" ng-click="vm.addKeywordFromAppKeywords($chip)">add</md-icon> </md-chip-template> </md-chips> </div> <div align="center"> <md-progress-circular ng-if="vm.isloadingKeywords" md-mode="indeterminate"></md-progress-circular> </div> </div> </div> </div> </md-card>'),e.put("resources/app/components/_commonComponents/paginationComponent/paginationComponent.html",'<div layout="row" layout-align="space-between" ng-show="vm.pageNumbers.length"> <md-button ng-click="vm.changePage(vm.page-1)" ng-disabled="vm.disableButtons || vm.page<2" class="md-primary"> <md-icon>navigate_before</md-icon> <span hide-xs>Previous</span> </md-button> <md-input-container hide show-gt-xs ng-hide="vm.hidePageSize"> <label>Page Size</label> <md-select md-selected-text="vm.pageSize +\' per Page\'" ng-change="vm.pageSizeChange()" ng-model="vm.pageSize"> <md-option ng-value="::pageSize" ng-repeat="pageSize in vm.availablePageSizes">{{::pageSize}}</md-option> </md-select> </md-input-container> <md-input-container ng-hide="vm.hidePageNum"> <label>Page No.</label> <md-select md-selected-text="vm.page +\' of  \'+ vm.pageNumbers[vm.pageNumbers.length-1]" ng-change="vm.changePage()" ng-model="vm.page"> <md-option ng-repeat="pagenumber in vm.pageNumbers" ng-value="::pagenumber">{{::pagenumber}}</md-option> </md-select> </md-input-container> <md-button ng-disabled="vm.disableButtons || vm.page==vm.pageNumbers[vm.pageNumbers.length-1]" ng-click="vm.changePage(vm.page+1)" class="md-primary"> <span hide-xs>Next </span> <md-icon>navigate_next</md-icon> </md-button> </div>'),e.put("resources/app/components/_commonComponents/requestComponent/requestComponent.html",'<md-content layout-padding layout-wrap> <form name="vm.requestForm" layout="row" layout-wrap> <md-input-container flex="100"> <label>Subject</label> <input readonly="readonly" type="text" ng-model="vm.subject"> </md-input-container> <md-input-container flex="100"> <label>New {{::vm.name}}</label> <textarea focus-on-init type="text" ng-model="vm.newValue" maxlength="{{vm.maxLength}}" md-maxlength="vm.maxLength" required name="value" rows="2"></textarea> <div ng-messages="vm.requestForm.value.$error"> <div ng-message="required">Please provide new {{::vm.name}}</div> <div ng-message="md-maxlength">{{::vm.name}} cannot be greater than {{::vm.maxLength}}</div> </div> </md-input-container> <md-input-container flex="100"> <label>Comments (Optional)</label> <textarea type="text" ng-model="vm.comment" rows="2" maxlength="{{vm.maxLength}}" md-maxlength="vm.maxLength"></textarea> </md-input-container> <div flex="100" align="center"> \x3c!-- <p class="small-grey-text">Change of {{vm.name}} includes language translation, so it can not be updated directly. </p> --\x3e <p style="color: red" class="small-grey-text">Any requests for change/updation of data which require language translation are temporarily disabled.</p> </div> <div align="center" flex="100"> <md-button class="md-raised" ng-click="vm.cancel()">Cancel</md-button> \x3c!--  <md-button ng-disabled="vm.requestForm.$invalid || vm.newValue==vm.initValue" is-busy="vm.requestPromise" class="md-raised md-primary" ng-click="vm.submit()">Request</md-button> --\x3e </div> </form> </md-content>'),e.put("resources/app/components/_commonComponents/highchartComponent/highchartComponent.html",'<div style="max-width: 100%; height: {{::vm.height?vm.height:300}}px"> <div></div> </div>'),e.put("resources/app/components/_commonComponents/highchartComponent/highchartComponentFullScreen.html",'<div class="image-preview" style="cursor:default" layout="row" layout-align="center center"> <md-icon title="Exit Fullscreen" md-ink-ripple class="close-button-hc" ng-click="vm.close()">close</md-icon> <highchart-component no-export="false" sortable="vm.sortable" height="500" for-analytics="vm.forAnalytics" json="vm.json" style="min-width: calc(100% - 10px);max-height:calc(100% - 10px)"> </highchart-component> </div>'),e.put("resources/app/components/_commonComponents/quickDateRangeComponent/quickDateRangeComponent.html",'<section layout="row" layout-align="center center"> <md-button style="font-size:14px;padding: 0 8px" flex ng-click="vm.dateRangeChange(dr.rangeId)" class="no-margin button-group" ng-show="dr.showOnMobile||vm.$mdMedia(\'gt-sm\')" ng-class="{\'selected\': vm.dateRange==dr.rangeId }" ng-repeat="dr in ::vm.dateRanges"><md-tooltip md-direction="bottom">{{(dr.startDate|date) + \' to \' + (dr.endDate|date)}}</md-tooltip>{{::dr.rangeText}}</md-button> <md-button style="font-size:14px;padding: 0 8px" ng-click="vm.onCustom()()" class="button-group no-margin" ng-class="{\'selected\': vm.dateRange==\'custom\'}"><md-tooltip md-direction="bottom">{{vm.dateRange==\'custom\'?((vm.startDate|date) + \' to \' + (vm.endDate|date)):\'Select Custom Date Range\'}}</md-tooltip>Custom</md-button> </section>'),e.put("resources/app/components/_commonComponents/promptComponent/promptComponent.html",'<md-content title="" layout-padding layout-wrap> <div style="margin: 5px 0 -5px 5px" class="md-headline">{{::vm.title}}</div> <form name="vm.promptForm" layout="column"> <md-input-container> <input ng-if="!vm.multiline" focus-on-init type="{{vm.type}}" name="value" ng-required="vm.required" ng-model="vm.text" ng-pattern="vm.pattern"> <textarea ng-if="vm.multiline" focus-on-init type="{{vm.type}}" name="value" ng-model="vm.text" ng-pattern="vm.pattern" required md-maxlength="400" minlength="10"></textarea> <div ng-messages="vm.promptForm.value.$error"> <div ng-message="required">{{vm.name}} is required.</div> <div ng-message="url">{{vm.name}} is not valid.</div> <div ng-message="pattern">{{vm.name}} is not valid.</div> <div ng-message="md-maxlength">That\'s too long!</div> </div> <div style="padding-top: 10px;font-size: 14px;color: grey">{{vm.helpText}}</div> </md-input-container> <div align="center"> <md-button class="md-raised" ng-click="vm.cancelAction()">{{::vm.cancel}}</md-button> <md-button type="submit" is-busy="vm.submitPromise" ng-disabled="!vm.text" ng-click="vm.submitAction()" class="md-raised md-primary">{{::vm.ok}}</md-button> </div> </form> </md-content>'),e.put("resources/app/components/_commonComponents/roleChangedDialogComponent/roleChangedDialogComponent.html",'<md-content layout-padding layout-margin> <form name="vm.editUserForm" layout="row" layout-wrap layout-align="start center" id="editUserForm_main"> <p>Dear User, your role has been changed. Please visit the Manage Role section and modify/edit the role of your.</p> <div flex="100" align="center"> <md-button ng-disabled="vm.editUserForm.$invalid" is-busy="vm.savingUserPromise" type="submit" ng-click="vm.viewRolesEdit()" class="md-raised md-primary">View</md-button> </div> </form> </md-content>'),e.put("resources/app/components/_commonComponents/starRatingComponent/starRatingComponent.html",'<md-icon style="color:inherit" ng-bind="vm.starIconValue[0]"></md-icon> <md-icon style="color:inherit" ng-bind="vm.starIconValue[1]"></md-icon> <md-icon style="color:inherit" ng-bind="vm.starIconValue[2]"></md-icon> <md-icon style="color:inherit" ng-bind="vm.starIconValue[3]"></md-icon> <md-icon style="color:inherit" ng-bind="vm.starIconValue[4]"></md-icon>')}]),function(e){e.mixin({trimAppDetails:function(e){return{appid:e.appid,appname:e.appname}},trimServiceDetails:function(e){return{serviceid:e.serviceid,servicename:e.servicename}},markSelectedBy:function(t,n,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"selected";return e.map(t,function(t){return t[i]=e.exists(n,t[a]),t})},exists:function(t,n){return e.indexOf(t,n)>-1},existsBy:function(t,n,a){var i={};return i[a]=n,!!e.find(t,i)},parseInteger:function(e){var t=parseInt(e);return isNaN(t)?0:t},parseFloatSafe:function(e){var t=parseFloat(e);return isNaN(t)?0:t},swap:function(e,t,n){var a=e[t];e[t]=e[n],e[n]=a},insertMissing:function(t,n,a,i){return e(t).map(function(t){var o={};o[a]=t;var r=e.find(n,o);if(r)return r;var s={};return s[a]=t,i instanceof Array||(i=[i]),e.each(i,function(e){s[e]=null}),s}).value()},insertSorted:function(t,n){t.splice(e.sortedIndex(t,n),0,n)},insertSortedBy:function(t,n,a){var i=void 0;i="string"==typeof n[a]?function(e){return e[a].toLowerCase()}:a,t.splice(e.sortedIndexBy(t,n,i),0,n)},chunkReverse:function(t,n){var a=e(t).reverse().chunk(n).reverse().map(e.reverse).value();return e.reverse(t),a},groupBynSum:function(t,n,a){return e(t).groupBy(n).map(function(t,i){var o;return o={},_defineProperty(o,e.isFunction(n)?n(t):n,i),_defineProperty(o,a,e(t).map(a).map(e.parseInteger).sum()),o}).value()},sortMutipleArrays:function(t,n,a){var i=e.keys(t),o=e.map(t[n],function(n,a){var o={};return e.each(i,function(e){o[e]=t[e][a]}),o});o=e.orderBy(o,n,[a]);var r={};return e.each(i,function(t){r[t]=e.map(o,t)}),r}})}(_),function(e){function t(e,t,n,a,i,o,r,s){function l(t,i,r,l){if(s.log({url:t.config.url,responseData:t.data}),"F"==t.data.rs){if(_.includes(t.data.rd&&t.data.rd.toLowerCase(),"authentication failed"))o.$reset(),a.freeText("You logged in somewhere else or your rights have been updated by admin. Please login again.",void 0,!0),n.go("login");else{var c=t.data.rd||"Something went wrong.";window.envVars.debugInfo&&(c+=" - "+t.data.rc),i.noToast||a.freeText(c,void 0,!0)}return e.reject(t.data)}if(i.cache){var d=sha256(r+JSON.stringify(l));p[d]=_.cloneDeep(t.data.pd)}return t.data.pd}function c(t){return e.reject(t)}function d(e){var e=_.cloneDeep(e);return _.forEach(e,function(t,n){_.isDate(t)&&(e[n]=moment(t).add(5,"hours").add(30,"minutes").toDate())}),e}var m=this,p={};m.post=function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(a=d(a),s.log({url:u+n,requestData:a}),o.cache){var r=sha256(n+JSON.stringify(a));if(p[r])return s.log({url:n,responseDataCached:p[r]}),e.resolve(_.cloneDeep(p[r]))}var m=t({method:"POST",url:u+n,data:a,headers:{"Content-Type":"application/json; charset=UTF-8"},timeout:window.envVars.xhrTimeout}).then(function(e){return l(e,o,n,a)}).catch(c);return o.nonBlocking?m:(i.startAuto(m),i.blockView(m),m)},m.postMock=function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n="resources/mockData/"+n,a=d(a),s.log({url:n,requestData:a}),o.cache){var m=sha256(n+JSON.stringify(a));if(p[m])return s.log({url:n,responseDataCached:p[m]}),e.resolve(_.cloneDeep(p[m]))}var u=t({method:"GET",url:n,data:a,headers:{"Content-Type":"application/json; charset=UTF-8"},timeout:window.envVars.xhrTimeout}).then(function(e){return r(function(){return e},500)}).then(function(e){return l(e,o,n,a)}).catch(c);return o.nonBlocking?u:(i.startAuto(u),i.blockView(u),u)},m.postFile=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=d(n),s.log({url:u+e,requestData:n});var o=t({method:"POST",url:u+e,data:n,headers:{"Content-Type":void 0},timeout:window.envVars.xhrTimeout,transformRequest:function(e){var t=new FormData;return angular.forEach(e,function(e,n){t.append(n,e)}),t}}).then(function(t){return l(t,a,e,n)}).catch(c);return a.nonBlocking?o:(i.startAuto(o),i.blockView(o),o)},m.clearCache=function(){p={}};var u=window.envVars.apiServer+"/usc/api/"}e.service("httpService",t),t.$inject=["$q","$http","$state","customToastService","ngProgressService","$localStorage","$timeout","loggerService"]}(angular.module("selfcare")),function(e){function t(e,t){var n=this,a=null,i=!1;n.setInstance=function(e){(a=e).startCount=0,a.startAuto=function(e){var n=this,a=t(function(){n.startCount++,n.status()<40&&n.set(40),n.start(),e.then(function(){n.startCount--,t(function(){n.startCount||n.complete()})}).catch(function(){n.startCount=0,n.reset()})},200);e.finally(function(){t.cancel(a)})}},n.startAuto=function(e){i?a.startAuto(e):(a.setHeight("3px"),a.setColor("white"),i=!0,a.startAuto(e))},n.blockView=function(t){var n=document.getElementById("mainContent");n=n||e.find("body")[0];var a=angular.element('<div class="block-view"></div>')[0];n.appendChild(a),t.finally(function(){n.removeChild(a)})}}e.service("ngProgressService",t),t.$inject=["$document","$timeout"]}(angular.module("selfcare")),function(e){function t(){var e=this;e.breadCrumbs=[],e.push=function(e){this.breadCrumbs.push(e)},e.pop=function(){this.breadCrumbs.pop()},e.reset=function(){this.breadCrumbs=[]}}e.service("breadCrumbService",t),t.$inject=[]}(angular.module("selfcare")),function(e){function t(e,t){function n(e){return"ok"==e}this.sessionTimeout=function(){return e.show(e.simple().textContent("You are not logged in or your session expired!").position("bottom right").toastClass("toast-error").hideDelay(4e3).action(" Ok ").highlightAction(!0)).then(n)},this.freeText=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" Ok ",i=arguments[2];return e.show(e.simple().textContent(t||"Something went Wrong, please try again!").position("bottom right").toastClass(i?"toast-error":"toast-success").hideDelay(4e3).action(a).highlightAction(!0)).then(n)},this.noConnection=function(t){return e.show(e.simple().textContent("No Internet Connection! Please check network settings.").position("bottom right").hideDelay(t||4e3).toastClass("toast-error").action(" Ok ").highlightAction(!0)).then(n)},this.backOnline=function(t){return e.show(e.simple().textContent("You are back online!").position("bottom right").hideDelay(t||4e3).toastClass("toast-success").action(" Ok ").highlightAction(!0)).then(n)},this.hideToasts=function(){e.hide()}}e.service("customToastService",t),t.$inject=["$mdToast","$q"]}(angular.module("selfcare")),function(e){function t(e){function t(e){var t=" ";if(_.each(e.bindings,function(e,n){t+=_.kebabCase(n)+"=vm."+n+" "}),e.closeButton)n='<md-dialog-actions layout="row" layout-align="center center">\n                    <md-button class="md-raised" ng-click="vm.$mdDialog.cancel()">Close</md-button>\n                    </md-dialog-actions>';else var n="";if(e.hasOwnProperty("padding")&&e.padding||!e.hasOwnProperty("padding"))a="md-dialog-content";else var a="";return'<md-dialog class="component-dialog"><md-dialog-content><div class="'+a+'">\n            <'+_.kebabCase(e.component)+" "+t+"></"+_.kebabCase(e.component)+">\n            </div></md-dialog-content>"+n+"</md-dialog>"}var n=this;n.confirm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cancel",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.confirm({title:"Confirmation",textContent:!n&&"Are you sure you want to "+t+"?",htmlContent:n&&"Are you sure you want to "+t+"?",ok:"Yes",cancel:"No",clickOutsideToClose:!1});return e.show(a)},n.showComponent=function(n){return e.show({template:t(n),locals:n.bindings,controllerAs:"vm",autoWrap:!1,clickOutsideToClose:!n.hasOwnProperty("clickOutsideToClose")||n.clickOutsideToClose,bindToController:!0,focusOnOpen:!!n.hasOwnProperty("focusOnOpen")&&n.focusOnOpen,controller:function(){this.$mdDialog=e}})},n.requestSuccessful=function(t){return e.show(e.alert().title("Request Submitted Successfully").textContent("Your request has been successfully submitted and will be reflected in few days.").ok("Okay!"))}}e.service("customDialogService",t),t.$inject=["$mdDialog"]}(angular.module("selfcare")),function(e){function t(e,t,n,a){function i(e){var t=_.cloneDeep(e.apps);_.each(e.apps,function(t){t.services=_(e.services).filter({appid:t.appid}).cloneDeep()}),_.each(e.services,function(e){e.app=_.find(t,{appid:e.appid})})}function o(e){return e.apps.length?t.fetchCategories().then(function(t){return _.each(e.apps,function(e){e.categories=[],_.each(t,function(t){_.exists(t.appIds.split(","),e.appid)&&e.categories.push({categoryName:t.categoryName,categoryId:t.categoryId})})}),e}):n.resolve(e)}var r=this;r.loginUser=function(t){e.clearCache();var n={userId:t.userid.toLowerCase(),pwd:sha256(t.password)};return e.post("auth/lg",n).then(function(e){return o(e)}).then(function(e){return i(e),e.apps=_.keyBy(e.apps,"appid"),e.services=_.keyBy(e.services,"serviceid"),e.rights=_.map(e.rights,function(e){return e.rightId=e.rightid,e.rightName=e.rightname,delete e.rightid,delete e.rightname,e}),e.roles.length&&(e.roles[0].logicalName=e.roles[0].logicalName||""),e.roles.length&&"guest"!=e.roles[0].logicalName.toLowerCase()&&e.rights.push({rightName:"dashboard",temp:!0}),e})},r.logout=function(){return e.clearCache(),a.clearCache(),e.post("auth/lgout",{})}}e.service("loginService",t),t.$inject=["httpService","categoriesService","$q","gaHttpService"]}(angular.module("selfcare")),function(e){function t(e,t){function n(t){return e.post("fetchStates",{lang:"en"},{cache:!0,nonBlocking:t}).then(function(e){return _.remove(e,{stateid:"99"}),e=_(e).map(function(e){return e.statename=_.startCase(_.toLower(e.statename)),e}).sortBy("statename").value()})}var a=this;a.fetchStates=n,a.getStateName=function(e){return n(!0).then(function(t){t.push({stateid:"99",statename:"Central"});var n=_.find(t,{stateid:e});return n?n.statename:""})},a.fetchLanguages=function(t){return e.post("commonData",{},{cache:!0,nonBlocking:t}).then(function(e){return _.map(e.languageList,function(e){return{id:e.alises,language:_.capitalize(e.langauge)}})})},a.fetchOccupationList=function(){return e.post("commonData",{},{cache:!0}).then(function(e){return _.map(e.occupationList,function(e){return{occuId:e.occupationId,occuName:e.occupationName}})})},a.fetchQualification=function(){return e.post("commonData",{},{cache:!0}).then(function(e){return _.map(e.qualificationList,function(e){return{qualId:e.qualificationId,qualName:e.qualificationName}})})},a.getWorkingHoursMultiLang=function(e){var t={};return t.en={weekday:{0:"Monday",1:"Tuesday",2:"Wednesday",3:"Thursday",4:"Friday",5:"Saturday",6:"Sunday"},time:{morning:"Morning",evening:"Evening"},to:"to",am:"AM",pm:"PM"},t.hi={weekday:{0:"सोमवार",1:"मंगलवार",2:"बुधवार",3:"गुरूवार",4:"शुक्रवार",5:"शनिवार",6:"रविवार"},time:{morning:"सुबह",evening:"शाम"},to:"से",am:"ए एम",pm:"पी एम"},t.bn={weekday:{0:"সোমবার",1:"মঙ্গলবার",2:"বুধবার",3:"বৃহস্পতিবার",4:"শুক্রবার",5:"শনিবার",6:"রবিবার"},time:{morning:"সকাল",evening:"সন্ধ্যা"},to:"থেকে",am:"এ এম",pm:"পি এম"},t.gu={weekday:{0:"સોમવાર",1:"મંગળવારે",2:"બુધવાર",3:"ગુરુવાર",4:"શુક્રવાર",5:"શનિવાર",6:"રવિવાર"},time:{morning:"સવારે",evening:"સાંજ"},to:"થી",am:"એ એમ",pm:"પી એમ"},t.ml={weekday:{0:"തിങ്കൾ",1:"ചൊവ്വാഴ്ച",2:"ബുധൻ",3:"വ്യാഴാഴ്ച",4:"വെള്ളിയാഴ്ച",5:"ശനിയാഴ്ച",6:"ഞായറാഴ്ച"},time:{morning:"രാവിലെ",evening:"വൈകുന്നേരം"},to:"മുതൽ",am:"എ എം",pm:"പി എം"},t.mr={weekday:{0:"सोमवार",1:"मंगळवार",2:"बुधवार",3:"गुरूवार",4:"शुक्रवार",5:"शनिवार",6:"रविवार"},time:{morning:"सकाळी",evening:"संध्याकाळी"},to:"ते",am:"ए एम",pm:"पी एम"},t.ta={weekday:{0:"திங்கள்",1:"செவ்வாய்க்கிழமை",2:"புதன்கிழமை",3:"வியாழக்கிழமை",4:"வெள்ளி",5:"சனிக்கிழமை",6:"ஞாயிறு"},time:{morning:"காலை",evening:"சாயங்காலம்"},to:"முதல்",am:"ஏ எம்",pm:"பி எம்"},t.te={weekday:{0:"సోమవారం",1:"మంగళవారం",2:"బుధవారం",3:"గురువారం",4:"శుక్రవారం",5:"శనివారం",6:"ఆదివారం"},time:{morning:"ఉదయం",evening:"సాయంత్రం"},to:"నుండి",am:"ఎ ఎమ్",pm:"పి ఎమ్"},t.ur={weekday:{0:"سوموار",1:"منگل",2:"بدھ",3:"جمعرات",4:"جمعہ",5:"ہفتہ",6:"اتوار"},time:{morning:"صبح",evening:"شام"},to:"سے",am:"اے ایم",pm:"پی ایم",rtl:!0},t.kn={weekday:{0:"ಸೋಮವಾರ",1:"ಮಂಗಳವಾರ",2:"ಬುಧವಾರ",3:"ಗುರುವಾರ",4:"ಶುಕ್ರವಾರ",5:"ಶನಿವಾರ",6:"ಭಾನುವಾರ"},time:{morning:"ಮಾರ್ನಿಂಗ್",evening:"ಸಂಜೆ"},to:"ರಿಂದ",am:"ಎ ಎಮ್",pm:"ಪಿ ಎಮ್"},t.pa={weekday:{0:"ਸੋਮਵਾਰ",1:"ਮੰਗਲਵਾਰ",2:"ਬੁੱਧਵਾਰ",3:"ਵੀਰਵਾਰ",4:"ਸ਼ੁੱਕਰਵਾਰ",5:"ਸ਼ਨੀਵਾਰ",6:"ਐਤਵਾਰ"},time:{morning:"ਸਵੇਰੇ",evening:"ਸ਼ਾਮ ਦਾ"},to:"ਤੋਂ",am:"ਏ ਐਮ",pm:"ਪੀ ਐਮ"},t.as={weekday:{0:"দেওবাৰ",1:"সোমবাৰ",2:"মঙ্গলবাৰ",3:"বুধবাৰ",4:"বৃহষ্পতিবাৰ",5:"শুক্ৰবাৰ",6:"শনিবাৰ"},time:{morning:"ৰাতিপুৱা",evening:"আবেলি"},to:"ইয়ালৈ",am:"এ এম",pm:"পি এম"},t.or={weekday:{0:"ସୋମବାର",1:"ମଙ୍ଗଳବାର",2:"ବୁଧବାର",3:"ଗୁରୁବାର",4:"ଶୁକ୍ରବାର",5:"ଶନିବାର",6:"ରବିବାର"},time:{morning:"ସକାଳ",evening:"ସନ୍ଧ୍ୟା"},to:"କୁ",am:"ଏ ଏମ୍‌",pm:"ପି ଏମ୍‌"},t[e.id]},a.fetchGovtDomains=function(){return e.post("commonData",{},{cache:!0,nonBlocking:!0}).then(function(e){return _(e.domainList).map("domainName").map(_.toLower).value()})},a.setSharedData=function(e){var t={startDate:e.startDate,endDate:e.endDate};i=t},a.getSharedData=function(){return{commonSharedInfo:i}},a.refreshServerCache=function(){envVars.keywordsCacheURL1&&t.get(envVars.keywordsCacheURL1),envVars.keywordsCacheURL2&&t.get(envVars.keywordsCacheURL2)};var i={}}e.service("commonDataService",t),t.$inject=["httpService","$http"]}(angular.module("selfcare")),function(e){function t(e,t){var n=this;n.scheduleCampaign=function(t){return e.postFile("campMang/campaignSchedule",t)},n.deleteCampaign=function(t){return e.post("campaignDelete",t)},n.stopCampaign=function(t){return e.post("campMang/stopCampaign",t)},n.fetchCampaign=function(t){return e.post("campMang/fetchCampaign",t)},n.downloadFile=function(t){return e.post("campMang/downloadFile",{campaignid:t})},n.mapCampaignToModel=function(e){(e=_.cloneDeep(e)).os=e.os.split(",");e.deptusage;e.gender=e.gender.split(","),e.age=_.map(e.age&&e.age.split(","),_.parseInteger),e.state=_.map(e.state&&e.state.split(","),function(e){return{stateid:e}}),e.qual=_.map(e.qual&&e.qual.split(","),function(e){return{qualId:e.trim()}}),e.occup=_.map(e.occup&&e.occup.split(","),function(e){return{occuId:e.trim()}}),e.serviceid=_.map(e.serviceid&&e.serviceid.split(","),function(e){return{appid:e.trim()}});var t={};return t.campaignTitle=e.title,t.campaignSubTitle=e.message,t.imageURL=e.image,t.oses=_.map(n.createOSData(),function(t){return _.indexOf(e.os,t.value)<0&&(t.selected=!1),t}),t.genders=_.map(n.createGenderData(),function(t){return _.indexOf(e.gender,t.value)<0&&(t.selected=!1),t}),t.campaignDate=moment(e.scheduletime).toDate(),t.age=e.age,t.deptusage=e.deptusage,t.selectedStates=e.state,t.lastLoginDate=moment(e.lastlogin).format("DD MMMM YYYY"),t.extractType=e.basetype,t.notificationType=e.type,t.webViewTitle=e.webviewtitle,t.redirectUrl=e.redirecturl,t.longDescription=e.longdesc,t.selectedQualifications=e.qual,t.selectedOccupations=e.occup,t.favApps=e.serviceid,t.failurecount=e.failurecount,t.successcount=e.successcount,t.redirectApp=e.redirectserviceid,t},n.createOSData=function(){return[{name:"Android",value:"and",selected:!0},{name:"iOS",value:"ios",selected:!0},{name:"Web",value:"web",selected:!0},{name:"Windows Phone",value:"wp",selected:!0}]},n.createGenderData=function(){return[{name:"Male",value:"m",selected:!1},{name:"Female",value:"f",selected:!1},{name:"Other",value:"o",selected:!1},{name:"Unspecified",value:"u",selected:!1}]},n.createNotiFicationTypeData=function(){return[{value:"openApp",name:"Open UMANG"},{value:"openAppWithDialog",name:"Open Dialog in UMANG"},{value:"browser",name:"Rediect to Browser"},{value:"webview",name:"Redirect to WebView"},{value:"service",name:"Redirect to App"},{value:"rating",name:"Redirect to UMANG Rating Page"}]}}e.service("campaignsService",t),t.$inject=["httpService","$mdDialog"]}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.updateKeywords=function(t){return e.post("updateDepttKeyword",t).then(function(e){return n.refreshServerCache(),e})},a.fetchKeywords=function(t){return e.post("fetchServiceKeys",t)}}e.service("keywordsService",t),t.$inject=["httpService","$http","commonDataService"]}(angular.module("selfcare")),function(e){function t(e,t){var n=this;n.fetchDeptQuery=function(t){return e.post("app/getDeptQuery",t).then(function(e){return console.log("email data======"+JSON.stringify(e.emails)),e.emails=_.map(e.emails,function(e){return e.ticket_id=e.ticketd,e.user_name=e.efrom,e.query=e.subject,e.attachment=e.attachment,e.icon="email",e.lmode="email",console.log("email ======Attachment======"+e.attachment),console.log("email ======subject======"+e.subject),e}),e.queries=_.map(e.queries,function(e){switch(e.lmode){case"query":e.icon="announcement";break;case"chat":e.icon="question_answer";break;case"ivr":e.icon="phone_forwarded"}return e}),{count:e.count,queries:_.concat(e.emails,e.queries)}})},n.getQueryStatuses=function(e){var t=[{displayName:"Unresolved",value:"forward_to_department"},{displayName:"In Progress",value:"in_progress"},{displayName:"Resolved",value:"resolved"}];return e&&t.unshift({displayName:"All",value:"all"}),t},n.saveQueryStatus=function(t){return e.post("app/logQueryStatus",t)},n.getDeptQueryCount=function(t){var n={appId:t.appid,sdate:t.startDate,edate:t.endDate};return e.post("app/fetchDeptQueryCount",n).then(function(e){return e=e[0],_.each(e,function(t,n){e[n]=_.parseInteger(t)}),e})},n.getServiceQueryCount=function(t){var n={serviceId:t.serviceid,sdate:t.startDate,edate:t.endDate};return e.post("service/fetchServiceQueryCount",n).then(function(e){return e=e[0],_.each(e,function(t,n){e[n]=_.parseInteger(t)}),e})},n.getStatusClass=function(e){switch(e){case"forward_to_department":return"red";case"in_progress":return"yellow";case"resolved":return"green"}},n.getStatusDisplay=function(e){switch(e){case"forward_to_department":return"Unresolved";case"in_progress":return"In Progress";case"resolved":return"Resolved"}}}e.service("userQueryService",t),t.$inject=["httpService","$timeout"]}(angular.module("selfcare")),function(e){function t(e){var t=this;t.getLineChartJSON=function(e){var t={chart:{type:"areaspline"},title:{text:e.chartName},subtitle:{text:e.subTitle},xAxis:{crosshair:!0,title:{text:e.xTitle},categories:e.xData},yAxis:[{title:{text:e.yTitle},min:0}],tooltip:{shared:!0},plotOptions:{areaspline:{fillOpacity:.4},series:{marker:{radius:3}}},series:e.yData};if(e.yTitleDual){var n={title:{text:e.yTitleDual},opposite:!0,min:0};t.yAxis.push(n)}return t},t.getPieChartJSON=function(e){return{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:e.chartName},subtitle:{text:e.subTitle},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.2f}% ({point.y} Hits)</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.2f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}},showInLegend:!0}},series:[{name:e.metric,colorByPoint:!0,data:e.data}]}},t.getColumnChartJSON=function(e){var t={chart:{type:"column"},title:{text:e.chartName},plotOptions:{column:{pointPadding:.2,borderWidth:0},series:{marker:{radius:3}}},xAxis:{title:{text:e.xTitle},crosshair:!0,categories:e.xData,labels:{formatter:e.xFormatter||function(){return this.value}}},yAxis:[{title:{text:e.yTitle},min:0}],tooltip:{shared:!0},series:e.yData};if(e.yTitleDual){var n={title:{text:e.yTitleDual},opposite:!0,min:0};t.yAxis.push(n)}return t},t.getSparklineJSON=function(e){return{chart:{margin:[30,0,0,0]},title:{text:null},legend:{enabled:!1},xAxis:{labels:{enabled:!1},tickLength:0},yAxis:{title:{text:null},maxPadding:0,minPadding:0,gridLineWidth:0,ticks:!1,endOnTick:!1,labels:{enabled:!1},min:0},plotOptions:{series:{enableMouseTracking:!1,lineWidth:3,shadow:!1,states:{hover:{lineWidth:2}},marker:{radius:0}}},series:[{type:"line",data:_.map(e.yData,function(e){return{y:parseFloat(e)}})}]}}}e.service("highchartJSONService",t),t.$inject=["httpService"]}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.getAppReportCard=function(a){var i={department:a.appid,toDate:moment(a.endDate).format("YYYY-MM-DD"),fromDate:moment(a.startDate).format("YYYY-MM-DD")};return e.post("app/getReportCardData",i,{cache:!0,nonBlocking:!0}).then(function(e){var o=n.userApps[a.appid].appname;return e.rating.sparkline=t.processRatingSparkline(e.rating.selfcareAvgList,i.fromDate,i.toDate),e.rating.line=t.processRatingLine(o,e.rating.selfcareAvgList,i.fromDate,i.toDate),e.responseTime.sparkline=t.processResponseTimeSparkLine(e.responseTime.selfcareResponseTimeList,i.fromDate,i.toDate),e.responseTime.line=t.processResponseTimeLine(o,e.responseTime.selfcareResponseTimeList,i.fromDate,i.toDate),e.users.sparkline=t.processUsersSparkLine(e.users.selfcareDateWiseUsersList,i.fromDate,i.toDate),e.users.line=t.processUsersLine(o,e.users.selfcareDateWiseUsersList,e.users.platformWiseUsersList,i.fromDate,i.toDate),_.each(e.averageSuccessPercenatge.selfcareStatusList,function(e){e.successPercentage=e.status||e.successPercentage}),e.averageSuccessPercenatge.sparkline=t.processSuccessRateSparkLine(e.averageSuccessPercenatge.selfcareStatusList,i.fromDate,i.toDate),e.averageSuccessPercenatge.line=t.processSuccessRateLine(o,e.averageSuccessPercenatge.selfcareStatusList,i.fromDate,i.toDate),e})},a.getServiceReportCard=function(a){var i={service:a.serviceid,toDate:moment(a.endDate).format("YYYY-MM-DD"),fromDate:moment(a.startDate).format("YYYY-MM-DD")};return e.post("service/getReportCardData",i,{cache:!0,nonBlocking:!0}).then(function(e){var o=n.userServices[a.serviceid].servicename;return e.averageRating.sparkline=t.processRatingSparkline(e.averageRating.selfcareAverageRatingList,i.fromDate,i.toDate),e.averageRating.line=t.processRatingLine(o,e.averageRating.selfcareAverageRatingList,i.fromDate,i.toDate),e.averageRating.avgRating=e.averageRating.averageRating,e.responseTime.sparkline=t.processResponseTimeSparkLine(e.responseTime.selfcareResponseTimeList,i.fromDate,i.toDate),e.responseTime.line=t.processResponseTimeLine(o,e.responseTime.selfcareResponseTimeList,i.fromDate,i.toDate),e.users.sparkline=t.processUsersSparkLine(e.users.selfcareDateWiseUsersList,i.fromDate,i.toDate),e.users.line=t.processUsersLine(o,e.users.selfcareDateWiseUsersList,e.users.platformWiseUsersList,i.fromDate,i.toDate),e.averageSuccessPercenatge.sparkline=t.processSuccessRateSparkLine(e.averageSuccessPercenatge.selfcareStatusList,i.fromDate,i.toDate),e.averageSuccessPercenatge.line=t.processSuccessRateLine(o,e.averageSuccessPercenatge.selfcareStatusList,i.fromDate,i.toDate),e})},a.getAppDashboardData=function(a){var i={department:a.appid,toDate:moment(a.endDate).format("YYYY-MM-DD"),fromDate:moment(a.startDate).format("YYYY-MM-DD")};return e.post("app/getDashboardData",i,{cache:!0,nonBlocking:!0}).then(function(e){var o={},r=n.userApps[a.appid].appname;return o.platform=t.processDeptPlatform(e.selfcareDeptPlatformList),o.slab=t.processDeptResponseSlab(e.selfcareDeptSlabList),o.users=t.processDeptServUsers(r,e.selfcareDeptUsersList,e.selfcareDeptServiceUsersList,i.fromDate,i.toDate),o.successRate=t.processDeptServSuccessRate(r,e.selfcareDeptStatusList,e.selfcareDeptServiceStatusList,i.fromDate,i.toDate),o.rt=t.processDeptServResponseTime(r,e.selfcareDeptResponseTimeList,e.selfcareDeptServiceResponseTimeList,i.fromDate,i.toDate),o})},a.getServiceDashboardData=function(a){var i={service:a.serviceid,toDate:moment(a.endDate).format("YYYY-MM-DD"),fromDate:moment(a.startDate).format("YYYY-MM-DD")};return e.post("service/getDashboardData",i,{cache:!0,nonBlocking:!0}).then(function(e){var o={},r=n.userServices[a.serviceid].servicename;return o.platform=t.processDeptPlatform(e.selfcareDeptServicePlatformList),o.slab=t.processDeptResponseSlab(e.selfcareDeptServiceSlabList),o.users=t.processServUsers(r,e.selfcareDeptServiceUsersList,i.fromDate,i.toDate),o.successRate=t.processServSuccessRate(r,e.selfcareDeptServiceStatusList,i.fromDate,i.toDate),o.rt=t.processServResponseTime(r,e.selfcareDeptServiceResponseTimeList,i.fromDate,i.toDate),o})}}e.service("reportingService",t),t.$inject=["httpService","dataProcessingService","$localStorage"]}(angular.module("selfcare")),function(e){function t(e){function t(e,t){e=moment(e),t=moment(t);for(var n=[];e<=t;)n.push(e.format("YYYY-MM-DD")),e=e.add(1,"day");return n}var n=this;n.getDatesArray=t,n.processDeptPlatform=function(t){var t=_(t).map(function(e){if(e.name=e.platform,e.y=parseInt(e.users),e.name)return e}).value();t=_.compact(t);var n={};return n.chartName="Usage Distribution",n.subTitle="Platform-wise distribution of hits",n.metric="No. of Hits",n.data=t,e.getPieChartJSON(n)},n.processDeptResponseSlab=function(t){var t=_(t).map(function(e){return e.name=e.slab+" ms",e.y=parseInt(e.users),e}).sortBy(function(e){return parseInt(e.slab)}).value();_.remove(t,function(e){return!e.users});var n={};return n.chartName="Average Response Time Slabs",n.subTitle="Slab-wise distribution of hits",n.metric="No. of Hits",n.data=t,e.getPieChartJSON(n)},n.processDeptServUsers=function(n,a,i,o,r){a=_.map(a,function(e){return e.serviceName=n,e});var s=_(a).concat(i).groupBy("serviceName").value(),l=t(o,r),c=_.map(l,function(e){return l.length>365?moment(e).format("YYYY MMM DD"):moment(e).format("MMM DD")}),d=_(s).map(function(e,t){var n=_.insertMissing(l,e,"date","users");return{name:t,data:_(n).map("users").map(_.parseInteger).value(),tooltip:{valueSuffix:" Hits"}}}).value(),m={};return m.chartName="API Hits",m.subTitle="Dayw-ise API Hits received in the selected duration",m.xTitle="Timeline",m.xData=c,m.yTitle="No. of Hits",m.yData=d,e.getLineChartJSON(m)},n.processDeptServResponseTime=function(n,a,i,o,r){a=_.map(a,function(e){return e.serviceName=n,e});var s=_(a).concat(i).groupBy("serviceName").value(),l=t(o,r),c=_.map(l,function(e){return l.length>365?moment(e).format("YYYY MMM DD"):moment(e).format("MMM DD")}),d=_(s).map(function(e,t){var n=_.insertMissing(l,e,"date","responseTime");return{name:t,data:_(n).map("responseTime").map(_.parseFloatSafe).value(),tooltip:{valueSuffix:" ms"}}}).value(),m={};return m.chartName="Average Response Time",m.subTitle="Day-wise comparsion of average time taken by APIs to repond",m.xTitle="Timeline",m.xData=c,m.yTitle="Average Response Time (ms)",m.yData=d,e.getLineChartJSON(m)},n.processDeptServSuccessRate=function(n,a,i,o,r){a=_.map(a,function(e){return e.serviceName=n,e});var s=_(a).concat(i).groupBy("serviceName").value(),l=t(o,r),c=_.map(l,function(e){return l.length>365?moment(e).format("YYYY MMM DD"):moment(e).format("MMM DD")}),d=_(s).map(function(e,t){var n=_.insertMissing(l,_.filter(e,{status:"Success"}),"date","users");return{name:t+" - Success",data:_(n).map("users").map(_.parseInteger).value(),tooltip:{valueSuffix:" Hits"}}}).value(),m=_(s).map(function(e,t){var n=_.insertMissing(l,_.filter(e,{status:"Failure"}),"date","users");return{name:t+" - Failure",data:_(n).map("users").map(_.parseInteger).value(),tooltip:{valueSuffix:" Hits"}}}).value(),p={};return p.chartName="API Success-Failure Stats",p.subTitle="Day-wise comparsion of successful and failed API hits",p.xTitle="Timeline",p.xData=c,p.yTitle="No. of Hits",p.yData=_.reduce(d,function(e){return e.push(d.shift()),e.push(m.shift()),e},[]),e.getLineChartJSON(p)},n.processServUsers=function(n,a,i,o){var r=t(i,o),s=_.map(r,function(e){return r.length>365?moment(e).format("YYYY MMM DD"):moment(e).format("MMM DD")});a=_.insertMissing(r,a,"date","users");var l={name:n,data:_(a).map("users").map(_.parseInteger).value(),tooltip:{valueSuffix:" Hits"}},c={};return c.chartName="API Hits",c.subTitle="Day-wise API Hits received in the selected duration",c.xTitle="Timeline",c.xData=s,c.yTitle="No. of Hits",c.yData=[l],e.getLineChartJSON(c)},n.processServSuccessRate=function(n,a,i,o){var r=t(i,o),s=_.map(r,function(e){return r.length>365?moment(e).format("YYYY MMM DD"):moment(e).format("MMM DD")}),l=_.insertMissing(r,_.filter(a,{status:"Success"}),"date","users"),c={name:n+" - Success",data:_(l).map("users").map(_.parseInteger).value(),tooltip:{valueSuffix:" Hits"}},d=_.insertMissing(r,_.filter(a,{status:"Failure"}),"date","users"),m={name:n+" - Failure",data:_(d).map("users").map(_.parseInteger).value(),tooltip:{valueSuffix:" Hits"}},p={};return p.chartName="API Success-Failure Stats",p.subTitle="Day-wise comparsion of successful and failed API hits",p.xTitle="Timeline",p.xData=s,p.yTitle="No. of hits",p.yData=[c,m],e.getLineChartJSON(p)},n.processServResponseTime=function(n,a,i,o){var r=t(i,o),s=_.map(r,function(e){return r.length>365?moment(e).format("YYYY MMM DD"):moment(e).format("MMM DD")});a=_.insertMissing(r,a,"date","users");var l={name:n,data:_(a).map("responseTime").map(_.parseFloatSafe).value(),tooltip:{valueSuffix:" ms"}},c={};return c.chartName="Average Response Time",c.subTitle="Day-wise comparsion of average time taken by APIs to repond",c.xTitle="Timeline",c.xData=s,c.yTitle="Average Response Time (ms)",c.yData=[l],e.getLineChartJSON(c)},n.processRatingSparkline=function(n,a,i){var o=t(a,i);n=_.insertMissing(o,n,"date",["users","average"]);var r={};return r.yData=_(n).map("average").map(_.parseFloatSafe).value(),e.getSparklineJSON(r)},n.processRatingLine=function(n,a,i,o){var r=t(i,o),s=_.map(r,function(e){return r.length>365?moment(e).format("YYYY MMM DD"):moment(e).format("MMM DD")});a=_.map(a,function(e){return e.average=e.average||e.averageRating,e}),a=_.insertMissing(r,a,"date",["users","average","rating1","rating2","rating3","rating4","rating5"]);var l={name:"Average Rating",type:"spline",data:_(a).map("average").map(_.parseFloatSafe).value(),tooltip:{valueSuffix:" Stars"}},c=[];_.each(["rating1","rating2","rating3","rating4","rating5"],function(e){c.push({name:c.length+1+" star",data:_(a).map(e).map(_.parseFloatSafe).value(),tooltip:{valueSuffix:" Ratings till date"},yAxis:1})});var d={};d.chartName="Ratings",d.subTitle="Cumulative ratings submitted by users",d.xTitle="Timeline",d.xData=s,d.yTitle=" Average Rating",d.yTitleDual=" No. of Ratings",d.yData=_.concat(c,[l]);var m=e.getColumnChartJSON(d);return m.plotOptions={column:{stacking:"normal"}},m.tooltip={shared:!0,formatter:function(){var e=""+this.x;return e+="<br/>Total:  <b>"+this.points[0].total+" Ratings till date</b>",_.each(this.points,function(t){e+="<br/> "+t.series.name+": <b>"+t.y+"</b>"}),e}},m},n.processResponseTimeSparkLine=function(n,a,i){var o=t(a,i);n=_.insertMissing(o,n,"date",["users","responseTime"]);var r={};return r.yData=_(n).map("responseTime").map(_.parseFloatSafe).value(),e.getSparklineJSON(r)},n.processResponseTimeLine=function(n,a,i,o){var r=t(i,o),s=_.map(r,function(e){return r.length>365?moment(e).format("YYYY MMM DD"):moment(e).format("MMM DD")});a=_.insertMissing(r,a,"date",["users","responseTime"]);var l={name:"No. of Hits",yAxis:1,type:"column",data:_(a).map("users").map(_.parseFloatSafe).value(),tooltip:{valueSuffix:" Hits"}},c={name:"Average Response Time (ms)",type:"spline",data:_(a).map("responseTime").map(_.parseFloatSafe).value(),tooltip:{valueSuffix:" ms"}},d={};return d.chartName="Average API Response Time",d.subTitle="Day-wise Average API Response Time Against Number of API Hits",d.xTitle="Timeline",d.xData=s,d.yTitle="Average Response Time (ms)",d.yTitleDual="No. of Hits",d.yData=[l,c],e.getLineChartJSON(d)},n.processUsersSparkLine=function(n,a,i){var o=t(a,i);n=_.insertMissing(o,n,"date",["users"]);var r={};return r.yData=_(n).map("users").map(_.parseFloatSafe).value(),e.getSparklineJSON(r)},n.processUsersLine=function(n,a,i,o,r){var s=t(o,r),l=_.map(s,function(e){return s.length>365?moment(e).format("YYYY MMM DD"):moment(e).format("MMM DD")});a=_.map(a,function(e){return e.platform="All Platforms",e}),(i=_.groupBy(i,"platform"))["All Platforms"]=a;var c=[];_.each(i,function(e,t){e=_.insertMissing(s,e,"date",["users","platform"]),c.push({name:t,type:"spline",data:_(e).map("users").map(_.parseFloatSafe).value(),tooltip:{valueSuffix:" Hits"}})});var d={};return d.chartName="API Hits",d.subTitle="Day-wise API hits with platform distribution",d.xTitle="Timeline",d.xData=l,d.yTitle="API Hits",d.yData=c,e.getLineChartJSON(d)},n.processSuccessRateSparkLine=function(n,a,i){var o=t(a,i);n=_.insertMissing(o,n,"date",["users","successPercentage"]);var r={};return r.yData=_(n).map("successPercentage").map(_.parseFloatSafe).value(),e.getSparklineJSON(r)},n.processSuccessRateLine=function(n,a,i,o){var r=t(i,o),s=_.map(r,function(e){return r.length>365?moment(e).format("YYYY MMM DD"):moment(e).format("MMM DD")});a=_.insertMissing(r,a,"date",["users","successPercentage"]);var l={name:"No. of Hits",yAxis:1,type:"column",data:_(a).map("users").map(_.parseFloatSafe).value(),tooltip:{valueSuffix:" Hits"}},c={name:"Success Percentage",type:"spline",data:_(a).map("successPercentage").map(_.parseFloatSafe).value(),tooltip:{valueSuffix:"%"}},d={};d.chartName="Request Success Rate",d.subTitle="Day-wise API Success Percentage Against Number of API Hits",d.xTitle="Timeline",d.xData=s,d.yTitle="Success Percentage",d.yTitleDual="No. of Hits",d.yData=[l,c];var m=e.getLineChartJSON(d);return m.yAxis[0].max=100,m}}e.service("dataProcessingService",t),t.$inject=["highchartJSONService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a){var i=this;i.fetchCategories=function(){return e.post("category/fetchAll",{}).then(function(e){return _.map(e.categories,function(e){return{categoryName:e.cgname,categoryId:e.cgid,appIds:e.appid}})})},i.linkCategory=function(n,i){var o={appId:n,categoryId:i};return e.post("category/link",o).then(function(e){return a.refreshServerCache(),t.userApps[n].categories.push({categoryId:i}),_(t.userServices).filter({appid:n}).head().app.categories.push({categoryId:i}),e})},i.unlinkCategory=function(n,i){var o={appId:n,cgid:i};return e.post("category/unlink",o).then(function(e){a.refreshServerCache(),_.pullAllBy(t.userApps[n].categories,[{categoryId:i}],"categoryId");var o=_(t.userServices).filter({appid:n}).head().app;return _.pullAllBy(o.categories,[{categoryId:i}],"categoryId"),e})}}e.service("categoriesService",t),t.$inject=["httpService","$localStorage","$http","commonDataService"]}(angular.module("selfcare")),function(e){function t(e,t){function n(e){var t=[e.rating5,e.rating4,e.rating3,e.rating2,e.rating1];t=_.map(t,_.parseInteger);var n=_.sum(t),a={avg:e.avg,counts:_.map(t,function(e){return{value:e,percent:100*e/n}})};return a.sumOfCounts=_.reduce(a.counts,function(e,t){return e+=t.value},0),a}var a=this;a.fetchAppRating=function(t){var a={sourcetype:"app",app:t};return e.post("fetchRating",a).then(function(e){return n(e[0])})},a.fetchServiceRating=function(t){var a={sourcetype:"service",app:t};return e.post("fetchRating",a).then(function(e){return n(e[0])})},a.fetchAppComments=function(t){var n={srId:t.appid,rating:t.rating,status:"app",page:t.page,pageSize:t.size};return e.post("fetchRatingComments",n)},a.fetchServiceComments=function(t){var n={srId:t.appid,rating:t.rating,status:"service",page:t.page,pageSize:t.size};return e.post("fetchRatingComments",n)},a.appServicesRating=function(t){return e.post("appServicesRating",t)},a.getAppFeedbacks=function(t){var n={sdate:t.startDate.toString(),edate:t.endDate.toString(),os:t.osAvgFeedback&&t.osAvgFeedback.value||"",lang:"en",page:t.page,size:t.size};return e.post("fetchAvgAppFeedbacks",n).then(function(e){return{avgRating:e.average,totalUsers:e.totalUsers,totalFeedbacks:e.totalFeedbacks,ratingCounts:e.details[0]}})},a.getAllAppFeedbacks=function(t){var n={sdate:t.sdate,edate:t.edate,rating:t.filterBy&&_.map(t.filterBy,"value").join(",")||"all",os:t.os&&t.os.value||"all",userLanguage:t.langs&&_.map(t.langs,"id").join(",")||"all",page:t.page,pageSize:t.pageSize};return e.post("fetchAppFeedbacks",n).then(function(e){return e})},a.getProfileInfo=function(t){var n={mno:t,lang:"en"};return e.post("profileFetchInfo",n).then(function(e){return e})},a.getDeptFeedbacks=function(t,n){var a={sdate:t.startDate,edate:t.endDate,rating:t.filterBy&&_.map(t.filterBy,"value").join(",")||"all",os:t.os&&t.os.value||"all",userLanguage:t.langs&&_.map(t.langs,"id").join(",")||"all",departmentId:t.apps&&_.map(t.apps,"appid").join(",")||"all",page:t.page,pageSize:t.size};return e.post("fetchDeptFeedbacks",a).then(function(e){return e})},a.getServiceFeedbacks=function(t,n){var a={sdate:t.startDate,edate:t.endDate,rating:t.filterBy&&_.map(t.filterBy,"value").join(",")||"all",os:t.os&&t.os.value||"all",userLanguage:t.langs&&_.map(t.langs,"id").join(",")||"all",serviceId:_.map(t.services,"serviceid").join(",")||"all",page:t.page,pageSize:t.size};return e.post("fetchServiceFeedbacks",a).then(function(e){return e})}}e.service("ratingsService",t),t.$inject=["httpService","$q"]}(angular.module("selfcare")),function(e){function t(e,t){var i=this;i.getMyRoles=function(){return e.post("mng/fetchRole",{})},i.createRole=function(t){var n={status:"add",rights:_.map(t.rights,"rightId").join(","),rolename:t.roleName};return e.post("mng/addRole",n)},i.getRoleDetails=function(t){var n={roleId:t};return e.post("mng/fthRghtForRole",n)},i.saveRole=function(t){console.log("service..............................."+_.map(t.rights,"rightId").join(","));var n={roleId:t.roleId,roleName:t.roleName,rights:_.map(t.rights,"rightId").join(",")};return e.post("mng/saveRole",n)},i.ids=function(e){n=e},i.getIds=function(){return n},i.setroleIdsaveAs=function(e){a=e},i.getroleids=function(){return a},i.getRolesByCateogry=function(){var t={lang:"en",token:""};return e.post("slfFetchCategoryWiseRts",t)}}e.service("rolesRightsService",t),t.$inject=["httpService","$timeout"];var n,a}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.createUser=function(t){var n={userId:t.email.toLowerCase(),emailId:t.email.toLowerCase(),mno:t.mobile,roleId:t.role.roleId,state:t.state,appId:_.map(t.selectedApps,"appid").join(",")};return e.post("mng/crtUsr",n)},a.mobOtpInitiate=function(t,n){var a={mno:t,ort:"slfmob",type:n};return e.post("auth/initOtp",a)},a.emailOtpInitiate=function(t,n){var a={peml:t.toLowerCase(),ort:"slfemail",type:n};return e.post("auth/initOtp",a)},a.updateSign=function(t){var n={signature:t};return e.post("acc/updateAccount",n)},a.getSubUsers=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={appIds:t.appIds,roleIds:t.roleIds,categoryIds:t.categoryIds,status:t.status,startDate:t.startDate,endDate:t.endDate,state:t.state};return e.post("mng/getSubUsers",n)},a.getSubmittedUsers=function(){return e.post("ques/getUserQues",{})},a.getSubUserDetails=function(t){return e.post("mng/getSubUserDetails",{userId:t}).then(function(e){console.log("user service=="+JSON.stringify(e));var t=_.map(e,"appId"),n=_.map(e,"categoryId");return e.appids=t,e.catIds=n,e[0].roleLogicalName=e.roleLogicalName||"",e})},a.saveUserApps=function(t){var n={app:t.selectedApps,userid:t.userId.toLowerCase()};return e.post("mng/updateUserAccount",n)},a.saveUserStatus=function(t){var n={status:t.status,userid:t.userId.toLowerCase()};return e.post("mng/updateUserStatus",n)},a.saveUserRole=function(t){var n={roleId:t.roleId,userId:t.userId.toLowerCase(),state:t.state};return e.post("mng/saveUserRole",n)},a.changePasswordByOTP=function(t){var n={newpwd:sha256(t.newPassword),otp:t.otp,userId:t.userId.toLowerCase()};return e.post("auth/passwdReset",n)},a.changePassword=function(t,n){var a={oldpwd:sha256(t),newpwd:sha256(n)};return e.post("acc/passwdChange",a)},a.saveUserMobile=function(t,n){var a={mno:t,otp:n};return e.post("acc/updateAccount",a)},a.fetchdeptbasedstate=function(t,n){var a={states:t,category:n,lang:"en"};return e.post("mng/FetchDeptBasedState",a)},a.changeUserRole=function(t){var n={roleId:t.roleId,userId:t.userId.toLowerCase(),lang:"en"};return e.post("mng/changeUserRole",n)}}e.service("usersService",t),t.$inject=["httpService","$timeout","$localStorage"]}(angular.module("selfcare")),function(e){function t(e,t){var n=this;n.getAllBanners=function(t){var n={state:t,source:"app"};return e.post("banner/fetchAllBanner",n).then(function(e){var t={};return e=_.map(e,function(e){return e.bannerId=e.hid,e.bannerURL=e.domain+e.imageUrl,e.priority=e.horder,e}),t.active=_(e).filter({status:"active"}).sortBy(function(e){return _.parseInt(e.priority)}).value(),t.inactive=_(e).filter({status:"inactive"}).value(),t.requested=_(e).filter({status:"requested"}).sortBy(function(e){return moment(e.requestedDate).valueOf()}).value(),t})},n.rejectBanner=function(t,n){var a={bannerId:t,comments:n};return e.post("banner/rejectBanner",a)},n.swapPriorities=function(t,n){var a={bannerId1:t,bannerId2:n};return e.post("banner/changePriority",a)},n.removeFromActive=function(t){var n={bannerId:t,isActiveDeactive:!1};return e.post("banner/onOffBanner",n)},n.addToActive=function(t){var n={bannerId:t,isActiveDeactive:!0};return e.post("banner/onOffBanner",n)},n.uploadBanners=function(t){return e.postFile("banner/uploadBanner",t)},n.getMyBanners=function(t){var n={state:t,source:"app"};return e.post("banner/fetchMyBanner",n).then(function(e){var t={};return e=_.map(e,function(e){return e.bannerId=e.hid,e.bannerURL=e.domain+e.imageUrl,e.priority=e.horder,e}),t.active=_(e).filter({status:"active"}).sortBy(function(e){return _.parseInt(e.priority)}).value(),t.inactive=_(e).filter({status:"inactive"}).value(),t.rejected=_(e).filter({status:"rejected"}).value(),t.requested=_(e).filter({status:"requested"}).sortBy(function(e){return moment(e.requestedDate).valueOf()}).value(),t})},n.getAllLangBanners=function(t){var n={bannerId:t};return e.post("banner/allLangBanner",n,{cache:!0}).then(function(e){return e=_.map(e,function(e){return e.bannerId=e.hid,e.bannerURL=e.domain+e.imageUrl,e.lang=e.lid,e})})},n.deleteBanner=function(t){var n={bannerId:t};return e.post("banner/delBanner",n)},n.reRequestBanner=function(t,n){var a={comments:n,bannerId:t};return e.post("banner/reactiveBanner",a)}}e.service("bannerService",t),t.$inject=["httpService","$timeout"]}(angular.module("selfcare")),function(e){function t(e,t,n){function a(e,t){r=e,s=t}function i(){n.showComponent({component:"dateRangeSelectorComponent",bindings:{startDate:r,endDate:s,maxEndDate:moment().toDate(),minStartDate:envVars.analyticsStartDate}}).then(function(e){r=e.startDate,s=e.endDate,o(e.startDate,e.endDate)})}this.createInstance=function(n,r,s){var l=e.find("body")[0],c='\n                <md-button ng-click="openDateRange()" \n                                    class="md-fab calender-bg float"><md-tooltip md-direction="top" \n                md-visible="tooltipVisible">Change Date Range</md-tooltip>\n                                <md-icon style="color:white">date_range</md-icon>\n                                </md-button>';s&&(c="<span></span>");var d=t(c)(n)[0];return l.appendChild(d),n.openDateRange=i,o=r,n.$on("$destroy",function(){l.removeChild(d)}),{openSelector:i,updateDates:a}};var o=null,r=null,s=null}e.service("dateRangeSelectorService",t),t.$inject=["$document","$compile","customDialogService"]}(angular.module("selfcare")),function(e){function t(e){var t=this;t.submitOnboardForm=function(t){var n={name:t.reqName,mno:t.mno,email:t.email.toLowerCase(),organization:t.orgName,stateCentral:t.state.toString(),emailOtp:t.emailOTP,mobileOtp:t.mnoOTP};return e.post("auth/onBoard",n,{noToast:!0})},t.fetchOnboardingRequests=function(t){return e.post("mng/fetchOnboard",{action:t}).then(function(e){return _.map(e.requestDetails,function(e){return e.userId=e.emailId,e.organizationName=e.organization,e})})},t.approveRequest=function(t,n){var a={requestId:t,response:"approved",comments:n};return e.post("mng/appRejStatus",a)},t.rejectRequest=function(t,n){var a={requestId:t,response:"rejected",comments:n};return e.post("mng/appRejStatus",a)}}e.service("onboardService",t),t.$inject=["httpService"]}(angular.module("selfcare")),function(e){function t(e,t,n){function a(){if(l)return t.resolve(_.cloneDeep(l));var a={userid:n.userInfo.userId};return e.post("fetchHierarchy",a).then(function(e){var t=r(e.usermasterdetails);return l=new s(a.userid,_.find(t,{userid:a.userid}).apps),i(t,l),_.cloneDeep(l)})}function i(e,t){if(e.length)for(var n=0;n<e.length;n++)if(e[n].puserid==t.userid){var a=new s(e[n].userid,e[n].apps);t.children.push(a),e.splice(n,1),n=-1,i(e,a)}}function o(e,t){for(var n=0;n<e.children.length;n++){if(e.children[n].userid==t){a=e.children[n];return e.children.length=0,e.children.push(a),a.selected=!0,!0}if(o(e.children[n],t)){var a=e.children[n];return e.children.length=0,e.children.push(a),!0}}}function r(e){return _(e).groupBy("userid").map(function(e){return _(e).groupBy("appid").map(function(e){return _(e).reduce(function(e,t){return e=e||t,e.services=e.services||[],e.services.push(t.sername),e},null)}).reduce(function(e,t){return e=e||t,e.apps=e.apps||[],t.appid&&e.apps.push({appid:t.appid,appname:t.appname,services:t.services.join(", ")}),e},null)}).value()}function s(e,t){this.userid=e,this.apps=t,this.children=[]}var l=null;this.fetchUserTree=function(e,t){return t&&(l=null),a().then(function(t){return o(t,e)||(t.selected=!0),t})}}e.service("userTreeService",t),t.$inject=["httpService","$q","$localStorage"]}(angular.module("selfcare")),function(e){function t(e,t,n,a){function i(e,t,n,i){return"<br>\n            This request has been made using UMANG SelfCare Portal for <b>"+i+"</b>.\n            <br>\n            <br>\n            New <b>"+e+"</b> requested:\n            <br>\n            <b>"+t+"</b>\n            <br>\n            <br>\n            User Comment:\n            <br>\n            "+(n||"--NA--")+"\n            <br>\n            <br>\n            Requested By:\n            <br>\n            "+((a.userInfo.signature?a.userInfo.signature+"<br>":"")||"")+"\n            "+a.userInfo.userId+"\n            <br>\n            "+a.userInfo.mno}function o(e,n,a,i){return t.fetchLanguages().then(function(o){var r={};return _.each(o,function(o){var s=t.getWorkingHoursMultiLang(o),l=moment(e).hours()>=12?s.pm:s.am,c=moment(n).hours()>=12?s.pm:s.am;r[o.id]=s.weekday[a]+" "+s.to+" "+s.weekday[i]+" ("+moment(e).format("hh:mm")+" "+l+" - "+moment(n).format("hh:mm")+" "+c+")"}),r})}var r=this;r.saveWorkingHours=function(t,n){return o(n.startTime,n.endTime,n.startDay,n.endDay).then(function(n){var a={workingHours:_.map(n,function(e,n){return{language:n,appId:t,workingHours:e}})};return e.post("app/workHour",a).then(function(e){return n.en})})},r.requestChange=function(t){var n={subject:"[UMANG - SelfCare] "+t.subject,body:i(t.name,t.newValue,t.comment,t.subject)};return e.post("app/reqChange",n)},r.saveAppDetails=function(t,n,a){var i={appid:t};switch(a){case"helpline":i.contact=n;break;case"email":i.contactemail=n;break;case"website":i.website=n;break;case"latlong":i.lat=n.lat,i.lon=n.long}return e.post("app/editApp",i)},r.saveAppLogo=function(t,n){var a={appid:t,file:n};return e.postFile("app/editAppLogo",a)},r.convertWorkingHours=o,r.onOffApp=function(n){var i="deactive"==n.status?"active":"deactive",o={status:i,type:"application",app:n.appId};return e.post("app/appServiceOnOff",o).then(function(){return a.userApps[n.appId].status=i,_.each(a.userApps[n.appId].services,function(e){return e.status=i}),_(a.userServices).filter({appid:n.appId}).each(function(e){e.status=i,e.app.status=i}),t.refreshServerCache(),i})},r.onOffService=function(n){var i="deactive"==n.status?"active":"deactive",o={status:i,type:"service",service:n.serviceId};return e.post("app/appServiceOnOff",o).then(function(){a.userServices[n.serviceId].status=i;var e=a.userServices[n.serviceId].appid;return _.find(a.userApps[e].services,{serviceid:n.serviceId}).status=i,t.refreshServerCache(),i})}}e.service("appServiceProfileService",t),t.$inject=["httpService","commonDataService","$http","$localStorage"]}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.saveMasterQuestionnaire=function(t){var n={json:JSON.stringify(t)};return e.post("ques/saveMasterQues",n)},a.getMasterQuestionnaire=function(){return e.post("ques/getMasterQues",{}).then(function(e){return JSON.parse(e[0].json)})},a.getSubUserQuestionnaire=function(t){var n={userId:t};return e.post("ques/getSubUserQues",n).then(function(e){return e=e[0],{masterJson:JSON.parse(e.masterJson),responseJson:JSON.parse(e.responseJson)}})},a.getMyQuestionnaire=function(){return e.post("ques/getParQues",{}).then(function(e){return e=e[0],{masterJson:JSON.parse(e.masterJson)||{},responseJson:JSON.parse(e.responseJson)||{},isSubmitted:e.isSubmitted}})},a.saveMyQuestionnaire=function(t,n,a){var i={masterJson:JSON.stringify(t),responseJson:JSON.stringify(n),isSubmitted:a};return e.post("ques/saveDraftQues",i)}}e.service("questionnaireService",t),t.$inject=["httpService","$timeout","$localStorage"]}(angular.module("selfcare")),function(e){function t(e){var t=this,n={};t.checkImageDimensionsAsync=function(t,n,a){var i=e.defer(),o=new Image;return o.onload=function(){var e=this.height==n&&this.width==a;i.resolve(e)},o.onerror=function(){i.reject(!1)},o.src=window.URL.createObjectURL(t),i.promise},t.checkImageDimensionsRangeAsync=function(t,n){var a=e.defer(),i=new Image;return i.onload=function(){var e=this.height>=n.minHeight&&this.height<=n.maxHeight;e=e&&this.width>=n.minWidth&&this.width<=n.maxWidth,a.resolve(e)},i.onerror=function(){a.reject(!1)},i.src=window.URL.createObjectURL(t),a.promise},t.checkFileExtentions=function(e,t){if(_.isArray(t)||(t=[t]),!e)return!1;var n=e.name.split(".").pop().toLowerCase(),a=!1;return _.each(t,function(e){a=a||n==e.toLowerCase()}),a},t.downloadFile=function(e,t){var n=new Blob([e],{type:"text/plain;charset=utf-8"});saveAs(n,t)},t.downloadFileFromURL=function(t){var n=e.defer(),a=t.split("/").pop(),i=new XMLHttpRequest;return i.responseType="blob",i.onload=function(){saveAs(i.response,a),n.resolve()},i.open("GET",t),i.send(),n.promise},t.loadScript=function(t){var a=e.defer();if(n[t])a.resolve();else{var i=document.createElement("script");i.type="text/javascript",i.src=t,i.onload=function(){n[t]=!0,a.resolve()},i.onerror=function(){a.reject()},document.body.appendChild(i)}return a.promise}}e.service("helperService",t),t.$inject=["$q"]}(angular.module("selfcare")),function(e){function t(e,t){var n=this;n.broadcastMessage=function(t){var n={userId:t.users&&_(t.users).map("userId").join(","),appId:t.apps&&_(t.apps).map("appid").join(","),cgId:t.categories&&_(t.categories).map("categoryId").join(","),msg:t.message,subUsers:t.toSubusers};return e.post("messaging/broadcast",n)},n.fetchBroadcastInbox=function(t,n){return e.post("messaging/broadcastInbox",{page:t,size:n}).then(function(e){return{messages:e.msg,count:e.pages}})},n.fetchBroadcastOutbox=function(t,n){return e.post("messaging/broadcastOutbox",{page:t,size:n}).then(function(e){return{messages:e.msg,count:e.pages}})},n.fetchDirectMsgInbox=function(t,n){return e.post("messaging/dmInbox",{page:t,size:n}).then(function(e){return e.msg=_.map(e.msg,function(e){return e.isOriginal=parseInt(e.isOriginal),e.responseDate?(e.message={text:e.requestMsg,date:e.requestDate},e.replyTo={text:e.responseMsg,date:e.responseDate},e.isOriginal||_.swap(e,"message","replyTo")):e.message={text:e.requestMsg,date:e.requestDate},e}),{messages:e.msg,count:e.pages}})},n.fetchDirectMsgOutbox=function(t,n){return e.post("messaging/dmOutbox",{page:t,size:n}).then(function(e){return e.msg=_.map(e.msg,function(e){return e.responseDate?(e.message={text:e.responseMsg,date:e.responseDate},e.replyTo={text:e.requestMsg,date:e.requestDate}):e.message={text:e.requestMsg,date:e.requestDate},e}),{messages:e.msg,count:e.pages}})},n.directMsgSend=function(t,n){var a={to:t,msg:n};return e.post("messaging/dmSend",a)},n.directMsgReply=function(t,n){var a={uniqueId:t,msg:n};return e.post("messaging/dmReply",a)}}e.service("messagingService",t),t.$inject=["httpService","$localStorage"]}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.fetchAllScreens=function(t,n){var a={page:t,size:n};return e.post("attScreen/fetch",a).then(function(e){return{screens:_.map(e.screen,function(e){return{screenId:e.id,imageUrl:e.img,title:e.title,description:e.desc,buttonText:e.txt}}),count:e.total}})},a.fetchActiveScreens=function(t,a){var i={sdate:t,edate:a};return e.post("attScreen/fetchActive",i).then(function(e){var i=n.getDatesArray(t,a),o=_.map(e,function(e){return{date:e.ssdate,screen:{screenId:e.id,imageUrl:e.img,title:e.title,description:e.desc,buttonText:e.txt}}});return o=_.insertMissing(i,o,"date","screen")})},a.scheduleScreen=function(t,n,a){var i={sdate:t,edate:n,id:a};return e.post("attScreen/schedule",i)},a.uploadAttScreen=function(t){return e.postFile("attScreen/upload",t)}}e.service("attentionScreenService",t),t.$inject=["httpService","$timeout","dataProcessingService"]}(angular.module("selfcare")),function(e){function t(e,t){var n=this;n.fetchAllDept=function(){return e.post("directory/fetch",{}).then(function(e){return _(e).map(function(e){return{deptId:e.srid,deptName:e.sname,deptDescription:e.desc,address:e.address,latitude:e.lat,longitude:e.lon,website:e.website,email:e.email,helpline:e.contact,workingHours:e.workingHours,androidAppName:e.appName,androidAppUrl:e.appUrl,iOSAppName:e.iosName,iOSAppUrl:e.iosUrl,wpAppName:e.webName,wpAppUrl:e.webUrl,onUmang:parseInt(e.isAvailable)}}).filter({onUmang:0}).value()})},n.addNewDept=function(t){var n={sname:t.deptName,address:t.address,website:t.website,desc:t.deptDescription,email:t.email,contact:t.helpline,workingHours:t.workingHours,lat:t.latitude,lon:t.longitude,appName:t.androidAppName,appUrl:t.androidAppUrl,iosName:t.iOSAppName,iosUrl:t.iOSAppUrl,webName:t.wpAppName,webUrl:t.wpAppUrl};return e.post("directory/add",n)},n.updateDept=function(t){var n={srid:t.deptId,sname:t.deptName,address:t.address,website:t.website,desc:t.deptDescription,email:t.email,contact:t.helpline,workingHours:t.workingHours,lat:t.latitude,lon:t.longitude,appName:t.androidAppName,appUrl:t.androidAppUrl,iosName:t.iOSAppName,iosUrl:t.iOSAppUrl,webName:t.wpAppName,webUrl:t.wpAppUrl};return e.post("directory/update",n)},n.deleteDept=function(t){return e.post("directory/delete",{srid:t})}}e.service("directoryService",t),t.$inject=["httpService","$timeout"]}(angular.module("selfcare")),function(e){function t(){var e=this;window.selfcare_logs=[];var t=window.selfcare_logs;e.log=function(e){t.length>=50&&t.shift(),t.push(e),window.envVars.debugInfo&&console.log(e)}}e.service("loggerService",t),t.$inject=[]}(angular.module("selfcare")),function(e){function t(e,t,n,a){var i=this;i.getTemporalData=function(n){var a={toDate:moment(n.endDate).format("YYYY-MM-DD"),fromDate:moment(n.startDate).format("YYYY-MM-DD"),url:"biUserStatus"};return e.post("/umangAnalytics",a,{cache:!0,nonBlocking:!0}).then(function(e){return{status:t.processStatusData(e.userStatusList,n.startDate,n.endDate),regMode:t.processRegData(e.registrationList,n.startDate,n.endDate,"reg"),regChannels:t.processRegData(e.useModeList,n.startDate,n.endDate,"useMode")}})},i.getDeptData=function(n,a,i){var o={toDate:moment(i).format("YYYY-MM-DD"),fromDate:moment(a).format("YYYY-MM-DD"),id:n.appid,type:"dept"};return e.post("analyticsSFData",o,{cache:!0,nonBlocking:!0}).then(function(e){return{json:t.processSFData(e.sfList,a,i),services:e.serviceList}})},i.getServiceData=function(n,a,i){var o={toDate:moment(i).format("YYYY-MM-DD"),fromDate:moment(a).format("YYYY-MM-DD"),id:n.id,type:"service"};return e.post("analyticsSFData",o,{cache:!0,nonBlocking:!0}).then(function(e){return t.processSFData(e.sfList,a,i)})},i.getCriteriaData=function(n){var i={criteria:n.criteria,toDate:moment(n.endDate).format("YYYY-MM-DD"),fromDate:moment(n.startDate).format("YYYY-MM-DD")};return e.post("analyticsDemo",i,{cache:!0,nonBlocking:!0}).then(function(e){var i=_.find(e,"length");return i?t.processCriteriaData(i,n.criteria):a.reject("Data Not Found")})},i.getSubCriteriaData=function(n){var a={subCriteria:n.subCriteria,criteria:n.criteria,toDate:moment(n.endDate).format("YYYY-MM-DD"),fromDate:moment(n.startDate).format("YYYY-MM-DD")};return e.post("analyticsDemoSub",a,{cache:!0,nonBlocking:!0}).then(function(e){var a={};return a.ageJson=t.processCriteriaData(e.ageList,"age",n.subCriteria),a.genderJson=t.processCriteriaData(e.genderList,"gender",n.subCriteria),a.qualJson=t.processCriteriaData(e.qualificationList,"qual",n.subCriteria),a.occupJson=t.processCriteriaData(e.occupationList,"occup",n.subCriteria),a.districtJson=t.processCriteriaData(e.locationList,"district",n.subCriteria),a})},i.getDeptCriteriaData=function(n,i){var o={criteria:n.criteria,toDate:moment(n.endDate).format("YYYY-MM-DD"),fromDate:moment(n.startDate).format("YYYY-MM-DD"),type:i?"service":"dept",id:n.id};return e.post("analyticsDeptDemo",o,{cache:!0,nonBlocking:!0}).then(function(e){var i=_.find(e,"length");return i?t.processCriteriaData(i,n.criteria):a.reject("Data Not Found")})},i.getDeptSubCriteriaData=function(n,a){var i={subCriteria:n.subCriteria,criteria:n.criteria,toDate:moment(n.endDate).format("YYYY-MM-DD"),fromDate:moment(n.startDate).format("YYYY-MM-DD"),type:a?"service":"dept",id:n.id};return e.post("analyticsDeptDemoSub",i,{cache:!0,nonBlocking:!0}).then(function(e){var a={};return a.ageJson=t.processCriteriaData(e.ageList,"age",n.subCriteria),a.genderJson=t.processCriteriaData(e.genderList,"gender",n.subCriteria),a.qualJson=t.processCriteriaData(e.qualificationList,"qual",n.subCriteria),a.occupJson=t.processCriteriaData(e.occupationList,"occup",n.subCriteria),a.districtJson=t.processCriteriaData(e.locationList,"district",n.subCriteria),a})},i.getMinistries=function(){return e.post("ministries",{},{cache:!0,nonBlocking:!0}).then(function(e){return _(e.ministryList).groupBy("ministry").map(function(e){return{ministryName:_.head(e).ministry,stateId:_.head(e).stateCode,appIds:_.map(e,"departmentId")}}).value()})}}e.service("analyticsUserService",t),t.$inject=["httpService","analyticsDataProcService","dataProcessingService","$q"]}(angular.module("selfcare")),function(e){function t(e,t){function n(e){var n={};return n.yData=_(e).map("users").map(_.parseFloatSafe).value(),t.getSparklineJSON(n)}function a(e,t){var n={};return n.xData=_(e).map("date").map(function(t){return e.length>365?moment(t).format("DD MMM YY"):moment(t).format("DD MMM")}).value(),n.series={name:_.capitalize(t),data:_(e).map("users").map(_.parseInteger).value()},n}function i(e,t){var n={};n.xData=_(e).chunkReverse(7).map(function(t){var n=e.length>365?"DD MMM YY":"DD MMM";return moment(_.head(t).date).format(n)+" - "+moment(_.last(t).date).format(n)}).value();var a=_(e).chunkReverse(7).map(function(e){return _(e).map("users").map(_.parseInteger).sum()}).value();return n.series={name:_.capitalize(t),data:a},n}function o(e,t){var n=_(e).groupBy(function(e){return moment(e.date).format("MM YYYY")}).map(function(t,n,a){t=_.map(t,"date");var i=moment(_.head(t)).isSame(moment(_.head(t)).startOf("month"),"day"),o=moment(_.last(t)).isSame(moment(_.head(t)).endOf("month"),"day");if(i&&o){var r=e.length>365?"MMMM YY":"MMMM";return moment(_.head(t)).format(r)}var s=e.length>365?"DD MMM YY":"DD MMM";return moment(_.head(t)).format(s)+" - "+moment(_.last(t)).format(s)}).value(),a=_(e).groupBy(function(e){return moment(e.date).format("MM YYYY")}).map(function(e){return _(e).map("users").map(_.parseInteger).sum()}).value();return{xData:n,series:{name:_.capitalize(t),data:a}}}function r(e,n,a){var i=t.getLineChartJSON({chartName:e,xTitle:n,xData:_.head(a).xData,yTitle:"Users",yData:_.map(a,"series")});return i.chart.type="line",i}function s(e,t){var n={},a=t?" - ("+t+")":"";switch(n.yTitle="Users",e){case"gender":n.xTitle="Gender",n.chartName="Gender Distribution";break;case"age":n.xTitle="Age Bucket",n.chartName="Age Distribution";break;case"qual":n.xTitle="Qualification",n.chartName="Qualification Distribution";break;case"occup":n.xTitle="Occupation",n.chartName="Occupation Distribution";break;case"location":n.xTitle="State",n.chartName="State Distribution";break;case"district":n.xTitle="District",n.chartName="District Distribution";break;case"lang":n.xTitle="Language",n.chartName="Language Distribution"}return n.chartName+=a,n}function l(e,t){e=moment(e),t=moment(t);for(var n=[];e<=t;)n.push(e.format("YYYY-MM-DD")),e=e.add(1,"day");return n}var c=this;c.processStatusData=function(e,t,s){var c={},d=l(t,s),m=_(e).map("status").uniq().sort().value();return _.each(m,function(t){var r=_.filter(e,function(e){return e.status==t});r=_.insertMissing(d,r,"date",["users","status"]),c[t]={},c.daily=c.daily||[],c.weekly=c.weekly||[],c.monthly=c.monthly||[],c.daily.push(a(r,t)),c.weekly.push(i(r,t)),c.monthly.push(o(r,t)),c[t].sparkline=n(r),c[t].totalUsers=_(r).map("users").map(_.parseInteger).sum()}),c.daily=r("Daily","Dates",c.daily),c.daily.tooltip={shared:!0,formatter:function(){var e=this.x+" ("+moment(this.x,"DD MMM YY").format("dddd")+")";return _.each(this.points,function(t){e+='<br/> <span style="color:'+t.point.color+'">●</span> '+t.series.name+": <b>"+t.y+"</b>"}),e}},c.weekly=r("Weekly","Week",c.weekly),c.monthly=r("Monthly","Month",c.monthly),c},c.processRegData=function(e,t,a,i){var o=_(e).map(i).uniq().value(),r={},s=l(t,a);return _.each(o,function(t){var a=_.filter(e,function(e){return e[i]==t});a=_.insertMissing(s,a,"date",["users",i]),r[t]={},r[t].sparkline=n(a),r[t].totalUsers=_(a).map("users").map(_.parseInteger).sum()}),r},c.processCriteriaData=function(e,n,a){if(e&&!_.isEqual(e,[])){var i=_(e).map("status").uniq().sort().value(),o=s(n,a),r=_(e).map("x").uniq().sort().value(),l={chartName:o.chartName,xTitle:o.xTitle,xData:r,yTitle:o.yTitle,yData:[]};return _.each(i,function(t){var n=_.filter(e,function(e){return e.status==t});n=_.insertMissing(r,n,"x","y"),l.yData.push({name:_.capitalize(t),data:_(n).map("y").map(_.parseInteger).value()})}),l=t.getColumnChartJSON(l),l.tooltip={shared:!0,formatter:function(){var e=_(this.points).map("y").sum(),t=this.x+" (Total: "+e+")";return _.each(this.points,function(e){t+='<br/> <span style="color:'+e.point.color+'">●</span> '+e.series.name+": <b>"+e.y+"</b>"}),l.xAxis.clickOnCrosshair&&(t+='<br/><br/> <span style="font-size:12px; color:grey;">  (Click to see more details)</span>'),t}},l}},c.processSFData=function(e,n,a){var i=l(n,a),o=i.length>365?"YYYY MMM DD":"MMM DD",r=_.map(i,function(e){return moment(e).format(o)}),s=_.insertMissing(i,_.filter(e,{status:"S"}),"x","y"),c={name:"Success ("+_(s).map("y").map(_.parseInteger).sum()+")",data:_(s).map("y").map(_.parseInteger).value(),tooltip:{valueSuffix:" Hits"}},d=_.insertMissing(i,_.filter(e,{status:"F"}),"x","y"),m={name:"Failure ("+_(d).map("y").map(_.parseInteger).sum()+")",data:_(d).map("y").map(_.parseInteger).value(),tooltip:{valueSuffix:" Hits"}},p={};p.chartName="Success-Failure Stats",p.subTitle="Daywise comparsion of successful and failed API hits",p.xTitle="Dates",p.xData=r,p.yTitle="No. of hits",p.yData=[c,m];var u=t.getLineChartJSON(p);return u.tooltip={shared:!0,formatter:function(){var e="";return _.each(this.points,function(t){e+='<br/> <span style="color:'+t.point.color+'">●</span> '+t.series.name.split(" ")[0]+": <b>"+t.y+"</b>"}),e}},u}}e.service("analyticsDataProcService",t),t.$inject=["httpService","highchartJSONService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o,r){function s(e){return p?n.resolve():t.loadScript("https://apis.google.com/js/api.js").then(function(){var e=n.defer();return gapi.load("client:auth2",{callback:function(){var t=gapi.client.init({apiKey:envVars.ga.apiKey,clientId:envVars.ga.clientId,scope:m}),n=!1;a(function(){n||e.reject()},3e3),t.then(function(){n=!0,g=gapi.auth2.getAuthInstance(),p=!0,e.resolve()},function(){n=!0,e.reject()})},onerror:function(){e.reject()}}),e.promise})}function l(){p=!1,u=!1,g&&g.signOut(),g&&g.isSignedIn.set(!1),c()}function c(){v={}}var d=this,m="https://www.googleapis.com/auth/analytics";d.post=function(e){if(!u)return n.reject("Google Analytics not logged in.");o.log({gaRequest:e});var t=sha256(JSON.stringify(e));if(v[t])return o.log({gaResponseCached:v[t]}),n.resolve(_.cloneDeep(v[t].result.reports));var a=n.defer();return gapi.client.request({path:"/v4/reports:batchGet",root:"https://analyticsreporting.googleapis.com/",method:"POST",body:{reportRequests:[e]}}).then(function(t){var n=sha256(JSON.stringify(e));v[n]=_.cloneDeep(t),o.log({gaResponse:t}),a.resolve(t.result.reports)},function(e){a.reject(e),-1==e.result.error.code&&r.noConnection(),403==e.status&&(g.disconnect(),l(),i.$emit("logoutGA"))}),a.promise},d.loginGA=function(){return s().then(function(){var e=n.defer();return g.signIn().then(function(){e.resolve()},function(t){var n="";switch(t.error){case"popup_closed_by_user":n="Login Popup closed/blocked. Please try again.";break;case"access_denied":n="Please Allow access to Google Analytics.";break;default:n="Something went wrong."}e.reject(n)}),g.isSignedIn.listen(function(e){u=e}),e.promise})},d.isLoggedIn=function(){return s().then(function(){return u=g.isSignedIn.get()})},d.clearCache=c,d.resetGoogleAnalytics=l;var p=!1,u=!1,g=null,v={}}e.service("gaHttpService",t),t.$inject=["httpService","helperService","$q","$timeout","$rootScope","loggerService","customToastService"]}(angular.module("selfcare")),function(e){function t(e,t){var n=this;n.getStatesData=function(n){return e.post({viewId:n.viewId,dateRanges:[{endDate:moment(n.endDate).format("YYYY-MM-DD"),startDate:moment(n.startDate).format("YYYY-MM-DD")}],metrics:[{expression:"ga:users",alias:"Users"},{expression:"ga:newUsers",alias:"New Users"}],dimensions:[{name:"ga:region"}],filtersExpression:"ga:countryIsoCode==IN;ga:city!=(not set)"}).then(function(e){return t.processUsersData(_.head(e),"state")})},n.getCityData=function(n){return e.post({viewId:n.viewId,dateRanges:[{endDate:moment(n.endDate).format("YYYY-MM-DD"),startDate:moment(n.startDate).format("YYYY-MM-DD")}],metrics:[{expression:"ga:users",alias:"Users"},{expression:"ga:newUsers",alias:"New Users"}],dimensions:[{name:"ga:city"}],filtersExpression:"ga:countryIsoCode==IN;ga:region=="+n.state+";ga:city!=(not set)"}).then(function(e){return t.processUsersData(_.head(e),"city",n.state)})},n.getDeviceData=function(n){return e.post({viewId:n.viewId,dateRanges:[{endDate:moment(n.endDate).format("YYYY-MM-DD"),startDate:moment(n.startDate).format("YYYY-MM-DD")}],metrics:[{expression:"ga:users",alias:"Users"}],dimensions:[{name:"ga:mobileDeviceinfo"}],filtersExpression:"ga:mobileDeviceinfo!=(not set)",orderBys:[{fieldName:"ga:users",sortOrder:"DESCENDING"}],pageToken:n.pageToken,pageSize:envVars.ga.maxResults}).then(function(e){return t.processTableData(_.head(e),"device")})},n.getScreenData=function(n){return e.post({viewId:n.viewId,dateRanges:[{endDate:moment(n.endDate).format("YYYY-MM-DD"),startDate:moment(n.startDate).format("YYYY-MM-DD")}],metrics:[{expression:"ga:users",alias:"Users"},{expression:"ga:screenviews",alias:"Screen Views"}],dimensions:[{name:"ga:screenName"}],filtersExpression:"ga:screenName!=(not set)",orderBys:[{fieldName:"ga:screenviews",sortOrder:"DESCENDING"}],pageToken:n.pageToken,pageSize:envVars.ga.maxResults}).then(function(e){return t.processTableData(_.head(e),"screen")})}}e.service("googleAnalyticsDataService",t),t.$inject=["gaHttpService","googleAnalyticsDataProcService"]}(angular.module("selfcare")),function(e){function t(e){function t(e,t){var n={};n.yTitle="Users";var a=t?" - ("+t+")":"";switch(e){case"state":n.xTitle="State",n.chartName="State Distribution";break;case"city":n.xTitle="City",n.chartName="City Distribution";break;case"device":n.xTitle="Device",n.chartName="Device Distribution";break;case"screen":n.xTitle="Screen",n.chartName="Screen Distribution"}return n.chartName+=a,n}var n=this;n.processUsersData=function(n,a,i){var o=t(a,i),r=_.map(n.columnHeader.metricHeader.metricHeaderEntries,"name"),s=_(n.data.rows).map(function(e){return _.head(e.dimensions)}).value(),l={chartName:o.chartName,xTitle:o.xTitle,xData:s,yTitle:o.yTitle,yData:[]};return _.each(r,function(e,t){l.yData.push({name:_.capitalize(e),data:_(n.data.rows).map(function(e){return _.head(e.metrics).values[t]}).map(_.parseInteger).value()})}),l=e.getColumnChartJSON(l),l.tooltip={shared:!0,formatter:function(){var e=""+this.x;return _.each(this.points,function(t){e+='<br/> <span style="color:'+t.point.color+'">●</span> '+t.series.name+": <b>"+t.y+"</b>"}),l.xAxis.clickOnCrosshair&&(e+='<br/><br/> <span style="font-size:12px; color:grey;">  (Click to see more details)</span>'),e}},l},n.processTableData=function(e,n){var a=t(n);a.xTitle+=" (Top "+envVars.ga.maxResults+")";var i={};return i.columns=[a.xTitle].concat(_.map(e.columnHeader.metricHeader.metricHeaderEntries,"name")),i.rows=_(e.data.rows).map(function(e){var t=[];return t.push(_.head(e.dimensions)),t=t.concat(_.head(e.metrics).values)}).value(),i.rowCount=e.data.rowCount,i}}e.service("googleAnalyticsDataProcService",t),t.$inject=["highchartJSONService"]}(angular.module("selfcare")),function(e){function t(){return{restrict:"A",scope:!1,link:function(e,t,n){var a=e.$watch(n.isBusy,function(e,n,a){var i=t[0];e!=n&&e&&(_.each(i.children,function(e){e.style.display="none"}),t.append('<span class="tiny-spinner right"></span>'),i.disabled=!0,e.finally(function(){_.each(i.children,function(e){e.style.display="initial"}),i.removeChild(i.children[i.children.length-1]),i.disabled=!1}))});e.$on("$destroy",function(){a()})}}}e.directive("isBusy",t),t.$inject=[]}(angular.module("selfcare")),function(e){function t(e){return{restrict:"A",link:function(t,a,i){a=a[0],e(function(){a.scrollLeft=n[i.scrollHorizontal]||0}),a.onmousewheel=function(e){return a.doScroll?a.doScroll(e.wheelDelta>0?"left":"right"):(e.wheelDelta||e.detail)>0?a.scrollLeft-=50:a.scrollLeft+=50,n[i.scrollHorizontal]=a.scrollLeft,!1},t.$on("$destroy",function(){delete a.onmousewheel})}}}e.directive("scrollHorizontal",t),t.$inject=["$timeout"];var n={}}(angular.module("selfcare")),function(e){function t(){return{require:"ngModel",restrict:"A",scope:!1,link:function(e,t,n,a){function i(){e.$apply(function(){n.multiple?a.$setViewValue(t[0].files):a.$setViewValue(t[0].files[0])})}var o=e.$watch(n.ngModel,function(e){e||t.val("")});t.on("change",i),e.$on("$destroy",function(){t.off("change",i),o()})}}}e.directive("fileModel",t),t.$inject=[]}(angular.module("selfcare")),function(e){function t(e){return{require:"ngModel",restrict:"A",scope:!1,link:function(t,n,a,i){var o=t.$watch(a.ngModel,function(t,n,o){var r=e(a.equals)(o);i.$setValidity("equals",t==r)}),r=t.$watch(a.equals,function(t,n,o){var r=e(a.ngModel)(o);i.$setValidity("equals",t==r)});t.$on("$destroy",function(){o(),r()})}}}e.directive("equals",t),t.$inject=["$parse"]}(angular.module("selfcare")),function(e){function t(e,t){return{require:"mdDatepicker",restrict:"A",scope:!1,link:function(n,a,i,o){var r=!1;o.$scope.uscClear=function(){e(i.ngModel).assign(n,void 0),e(i.ngChange)(n),angular.element(a[0].children[1]).children()[2].remove(),r=!1},n.$watch(i.ngModel,function(){if(o.ngModelCtrl.$modelValue){if(r)return;var e=t('<md-icon class="date-picker-clear" ng-click="uscClear()">close<md-icon>')(o.$scope);a[0].children[1].append(e[0]),r=!0}else r&&angular.element(a[0].children[1]).children()[2].remove(),r=!1})}}}e.directive("datePickerClear",t),t.$inject=["$parse","$compile"]}(angular.module("selfcare")),function(e){function t(e){return{restrict:"A",scope:!1,link:function(t,n,a){function i(a){var i=e(o)(t);if(i=_.escape(i),a=_.escape(a)){var r=new RegExp(a,"gi"),s=i.replace(r,function(e){return'<span class="highlighted">'+e+"</span>"});n.html(s)}else n[0].innerHTML=i}var o=a.highlightBind.split("|")[0].trim(),r=a.highlightBind.split("|")[1].trim(),s=t.$watch(r,i),l=t.$watch(o,function(){i(e(r)(t))});t.$on("$destroy",function(){s(),l()})}}}e.directive("highlightBind",t),t.$inject=["$parse"]}(angular.module("selfcare")),function(e){function t(e,t){return{restrict:"A",scope:!1,link:function(n,a,i){if(a.addClass("select-header"),i.selectAll){var o=function(e){if(c.assign(n,[]),e){var t=l(n);_.forEach(t,function(e){c(n).push(e)})}},r=i.selectAll.split("|")[0],s=i.selectAll.split("|")[1],l=t(r),c=t(s),d="search"+_.random(99999999);n[d]={},n[d].selectAll=o;m='<md-icon style="margin-right: 9px;">search</md-icon><input ng-keydown="$event.stopPropagation()" ng-model="'+i.search+'" \n                        type="Search" placeholder="Search...">\n                        <md-button ng-hide="'+i.search+'" ng-click="'+d+".selectAll("+s+".length!="+r+'.length)" \n                        class="md-primary">{{'+s+".length=="+r+".length?'Unselect All':'Select All'}}\n                        </md-button>";i.hasOwnProperty("preSelect")&&o(!0)}else var m='<md-icon style="margin-right: 9px;">search</md-icon><input ng-keydown="$event.stopPropagation()" ng-model="'+i.search+'" \n                        type="Search" placeholder="Search...">';var p=e(m)(n);a.append(p)}}}e.directive("search",t),t.$inject=["$compile","$parse"]}(angular.module("selfcare")),function(e){function t(e,t){return{require:"mdSelect",priority:1,restrict:"A",scope:!1,compile:function(n,a){var i=_.uniqueId("search"),o=n.find("md-option").attr("ng-repeat"),r=o.split(" ").pop(),s='<md-select-header class="select-header">\n                    <md-icon style="margin-right: 9px;">search</md-icon>\n                    <input ng-keydown="$event.stopPropagation()" ng-model="'+i+'" type="Search" placeholder="Search...">\n                        </md-select-header>';return n.prepend(s),n.find("md-option").attr("ng-repeat",o+" |filter:"+i),a.mdOnClose=(a.mdOnClose||"")+"; "+i+"=''",{pre:function(){},post:function(n,o,s){var l=o.find("md-select-header"),c=s.mdSelectSearch,d=n.$watch(c,function(e){e?l.removeClass("hide"):l.addClass("hide")});if(n.$on("$destroy",function(){d()}),s.hasOwnProperty("multiple")){var m='<md-button ng-hide="'+i+'" ng-click="selectUnselectAll'+i+"("+a.ngModel+".length!="+r+'.length)" \n                            class="md-primary">{{'+a.ngModel+".length=="+r+".length?'Unselect All':'Select All'}}\n                            </md-button>";o.find("md-select-header").append(e(m)(n)),n["selectUnselectAll"+i]=function(e){if(_.set(n,a.ngModel,[]),e){var i=_.get(n,r);_.each(i,function(e){_.get(n,a.ngModel).push(e)})}try{t(s.ngChange)(n)}catch(e){}},s.hasOwnProperty("preSelectAll")&&n.$eval(s.preSelectAll)&&n["selectUnselectAll"+i](!0)}}}}}}e.directive("mdSelectSearch",t),t.$inject=["$compile","$parse"]}(angular.module("selfcare")),function(e){function t(e){return{restrict:"A",scope:!1,link:function(t,n,a){var i=t.$watch(a.promiseLoader,function(i,o){if((i||i!=o)&&i){var r='<div align="center"><br><br><md-progress-circular md-mode="indeterminate"></md-progress-circular><br><b>'+(a.text||"")+"</b><br></div>";n.html(""),n.append(e(r)(t)),i.then(function(){n.html("")}).catch(function(){n.html('<div align="center"><br><br><div class="md-title" style="font-size: 18px;"><i style="transform: translate(-6px,5px);font-size: 22px;" class="material-icons">error</i>'+(a.errorText||"Some error occurred! Please try again.")+"</div><br><br></div>")})}});t.$on("$destroy",function(){i()})}}}e.directive("promiseLoader",t),t.$inject=["$compile"]}(angular.module("selfcare")),function(e){function t(){return{require:"ngModel",templateUrl:"resources/app/directives/imageFileDirective/imageFile.html",restrict:"E",scope:{title:"@",src:"<?",onReady:"&?",noPreview:"<",align:"@"},link:n,controller:a,controllerAs:"vm",bindToController:!0}}function n(e,t,n,a){e.vm.ngModelCtrl=a}function a(e,t){var n=this;n.id=t.$id,n.imageSelectChange=function(){n.ngModelCtrl.$setViewValue(n.imageFile),n.imageFile?n.imageFile.type.indexOf("image")>-1&&(n.selectedFileDataURL=URL.createObjectURL(n.imageFile)):n.selectedFileDataURL=""},n.removeFile=function(){n.imageFile="",n.selectedFileDataURL="",n.ngModelCtrl.$setViewValue(n.imageFile)}}e.directive("imageFile",t),t.$inject=[],a.$inject=["$http","$scope"]}(angular.module("selfcare")),function(e){function t(e,t){return{restrict:"A",scope:!1,link:function(n,a,i){function o(){var a=e.find("body")[0],o=t('<div class="image-preview" layout="row" layout-align="center center"><img src="'+i.src+'" style="max-height:calc(100% - 10px)"></div>')(n);a.appendChild(o[0]),o.on("click",function(){a.removeChild(o[0])})}a[0].style.cursor="zoom-in",a.on("click",o),n.$on("$destroy",function(){a.off("click",o)})}}}e.directive("previewImage",t),t.$inject=["$document","$compile"]}(angular.module("selfcare")),function(e){function t(e){return{restrict:"A",scope:!1,link:function(t,n,a){if(a.uscRight){var i=a.uscRight.split(","),o=!1;_.each(i,function(t){o||(o=_.existsBy(e.userRights,t,"rightName"))}),o||n.remove()}}}}e.directive("uscRight",t),t.$inject=["$localStorage"]}(angular.module("selfcare")),function(e){function t(){return{restrict:"A",scope:!1,link:function(e,t,n){var a=e.$watch(n.promiseHider,function(e){t[0].style.display="none",e&&e.then(function(){t[0].style.display=""})});e.$on("$destroy",function(){a()})}}}e.directive("promiseHider",t),t.$inject=[]}(angular.module("selfcare")),function(e){function t(){return{restrict:"A",scope:!1,link:n}}function n(e,t,n){t.addClass("bg"),e.$watch(n.healthValue,function(e){var a=parseFloat(e);a&&(t.removeClass("red orange green"),n.hasOwnProperty("percent")?a>=90?t.addClass("green"):a>=80?t.addClass("orange"):t.addClass("red"):n.hasOwnProperty("rating")?a>=4?t.addClass("green"):a>=3?t.addClass("orange"):t.addClass("red"):n.hasOwnProperty("responseTime")&&(a>=1500?t.addClass("red"):a>=500?t.addClass("orange"):t.addClass("green")))})}e.directive("healthValue",t),t.$inject=[]}(angular.module("selfcare")),function(e){function t(){return{require:"ngModel",restrict:"A",scope:!1,link:function(e,t,n){e.$on("$destroy",function(){_.set(e,n.ngModel,void 0)})}}}e.directive("clearOnDestroy",t),t.$inject=[]}(angular.module("selfcare")),function(e){function t(){return{restrict:"A",scope:!1,link:function(e,t,n){t.focus()}}}e.directive("focusOnInit",t),t.$inject=[]}(angular.module("selfcare")),function(e){function t(e){return{restrict:"A",scope:!1,link:function(t,n,a){var i=a.imageLoader,o=e('<div align="center" class="animated-background" style="padding-bottom: '+i+'%"></div>')(t);n[0].style.display="none",n.after(o),n.on("load",function(){n[0].style.display="",o.remove()}),n.on("error",function(){o.remove();var a=e('<div align="center" style="background: lightgrey; padding-top: calc('+i/2+"% - 9px); padding-bottom: calc("+i/2+'% - 9px)"><i style="transform: translate(-6px,3px);font-size: 18px;" class="material-icons">error</i>Could not load image!</div>')(t);n.after(a)}),t.$on("$destroy",function(){n.off("load"),n.off("error")})}}}e.directive("imageLoader",t),t.$inject=["$compile"]}(angular.module("selfcare")),function(e){function t(e){return{restrict:"E",replace:!0,templateUrl:"resources/app/directives/userTreeDirective/userTreeDirective.html",scope:{user:"<",searchuser:"<"},link:function(t,n,a){t.userSearch=function(e,t){return void 0!==t&&null!==t&&""!=t&&(e=e.toUpperCase(),t=t.toUpperCase(),e.indexOf(t)>-1)},t.getUserDetails=function(n,a,i){e.getSubUserDetails(n).then(function(e){t.userdetail=e[0];99==e[0].stateCentral||e[0].stateCentral,a(i)})}}}}e.directive("userTreeDirective",t),t.$inject=["usersService"]}(angular.module("selfcare")),function(e){function t(){return{restrict:"A",scope:!1,link:function(e,t,n){function a(){t[0].style.paddingLeft="30px",t.parent()[0].appendChild(r)}function i(e){t.val()||t.parent()[0].removeChild(r)}var o=n.prefix91||7;t.on("focus",a),t.on("blur",i);var r=angular.element('<span style="color:grey;position:absolute; top:'+o+'px">+91</span>')[0];e.$on("$destroy",function(){t.off("focus",a),t.off("blur",i)})}}}e.directive("prefix91",t),t.$inject=[]}(angular.module("selfcare")),function(e){function t(e){return{require:"mdInputContainer",restrict:"A",scope:!1,link:function(t,n,a,i){var o=void 0,r=0;"password"===i.input[0].type&&(o=e(function(){r>12&&e.cancel(o);try{i.input.parent()[0].querySelector("input:-webkit-autofill")&&(i.element.addClass("md-input-has-value"),e.cancel(o))}catch(e){}r++},25)),t.$on("$destroy",function(){e.cancel(o)})}}}e.directive("passwordAutofillFix",t),t.$inject=["$interval"]}(angular.module("selfcare")),function(e){e.filter("uscDate",function(){return function(e,t){return e?(t=t||"D, MMM YYYY, h:mm:ss A",moment(e).format(t)):""}})}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o,r,s){function l(a){if(u.json){u.oldChartType?u.json.chart.type=u.oldChartType:u.oldChartType=u.json.chart.type,u.json.credits={enabled:!1},u.json.lang={selectAll:"Select all series",unselectAll:"Unselect all series",fullscreen:"View In fullscreen"},u.json.exporting={buttons:{selectAllButton:{text:r("gt-sm")?"Select All":"",symbol:"url(resources/assets/images/selectall.png)",symbolX:22,symbolY:20,_titleKey:"selectAll",onclick:d},unselectAllButton:{text:r("gt-sm")?"Unselect All":"",symbol:"url(resources/assets/images/unselectall.png)",symbolX:22,symbolY:20,_titleKey:"unselectAll",onclick:c},contextButton:{menuItems:[{text:"Export to PNG",onclick:function(){this.exportChart({filename:u.json.title.text})}},{text:"Export to PDF",onclick:function(){this.exportChart({type:"application/pdf",filename:u.json.title.text})}},{text:"Export to CSV",onclick:function(){s.downloadFile(u.chart.getCSV(),u.json.title.text+".csv")}}]}}};var i=[],o={text:"Convert to Line",graphType:"line",onclick:function(){u.json.chart.type="line",u.oldChartType=u.json.chart.type,l()}},g={text:"Convert to Bar",graphType:"column",onclick:function(){u.json.chart.type="column",u.oldChartType=u.json.chart.type,l()}},v={text:"Convert to Area",graphType:"areaspline",onclick:function(){u.json.chart.type="areaspline",u.oldChartType=u.json.chart.type,l()}},v={text:"Convert to Area",graphType:"areaspline",onclick:function(){u.json.chart.type="areaspline",u.oldChartType=u.json.chart.type,l()}};i.push(o),i.push(g),i.push(v),u.fullscreenButton&&(u.json.exporting.buttons.fullScreenButton={text:"",symbol:"url(resources/assets/images/fullscreen.png)",symbolX:20,symbolY:18,_titleKey:"fullscreen",onclick:p}),u.forAnalytics&&_.each(i,function(e){e.graphType!=u.json.chart.type&&u.json.exporting.buttons.contextButton.menuItems.push(e)}),u.sortable&&m(),u.onSeriesClick()&&(u.json.xAxis.clickOnCrosshair=function(e,t){n.$apply(u.onSeriesClick()(t.category)),u.closeFullscreen&&u.closeFullscreen()},u.json.plotOptions.series={cursor:"pointer",events:{click:function(e){n.$apply(u.onSeriesClick()(e.point.category)),u.closeFullscreen&&u.closeFullscreen()}}}),u.noExport&&(u.json.exporting={enabled:!1}),u.json.series.length<3&&u.json.exporting.buttons&&(delete u.json.exporting.buttons.selectAllButton,delete u.json.exporting.buttons.unselectAllButton),t(function(){u.chart=Highcharts.chart(e.children()[0],u.json),u.chart.reflow()})}else u.chart&&u.chart.destroy()}function c(){_.each(u.json.series,function(e){e.visible=!1}),l()}function d(){_.each(u.json.series,function(e){e.visible=!0}),l()}function m(){function e(e,t){var n={};n[u.json.xAxis.title.text]=u.json.xAxis.categories,_.each(u.json.series,function(e){n[e.name]=e.data}),n=_.sortMutipleArrays(n,e,t),u.json.xAxis.categories=n[u.json.xAxis.title.text],_.each(u.json.series,function(e){e.data=n[e.name]}),l()}u.json.exporting&&u.json.exporting.buttons&&u.json.exporting.buttons.contextButton&&(u.json.exporting.buttons.contextButton.menuItems.push({text:"Sort By "+u.json.xAxis.title.text,onclick:function(){return e(u.json.xAxis.title.text,"asc")}}),_.each(u.json.series,function(t){u.json.exporting.buttons.contextButton.menuItems.push({text:"Sort By "+t.name,onclick:function(){return e(t.name,"desc")}})}))}function p(){var e=u,t=a.find("body")[0],n=null;i.compile({templateUrl:"resources/app/components/_commonComponents/highchartComponent/highchartComponentFullScreen.html",controller:["$scope",function(a){function i(e){if(("Escape"==e.key||"Esc"==e.key||27==e.keyCode)&&"BODY"==e.target.nodeName)return e.preventDefault(),o.close(),!1}var o=this;o.close=function(){t.removeChild(n),a.$destroy(),delete e.closeFullscreen,window.removeEventListener("keydown",i,!0)},e.closeFullscreen=o.close,window.addEventListener("keydown",i,!0)}],controllerAs:"vm",bindToController:!0,locals:{json:_.cloneDeep(u.json),forAnalytics:u.forAnalytics,sortable:u.sortable}}).then(function(e){n=e.element[0],t.appendChild(n),e.link(o.$new(!0))})}var u=this;u.oldChartType=null,u.selectAll=d,u.unselectAll=c,u.$onChanges=l}e.component("highchartComponent",{templateUrl:"resources/app/components/_commonComponents/highchartComponent/highchartComponent.html",controller:t,controllerAs:"vm",bindings:{json:"<",noExport:"<",height:"<?",forAnalytics:"<",onSeriesClick:"&",fullscreenButton:"<",sortable:"<"}}),t.$inject=["$element","$timeout","$scope","$document","$mdCompiler","$rootScope","$mdMedia","helperService"]}(angular.module("selfcare")),function(e){function t(e,t,a){function i(e){var t={lang:m.selectedLanguage.id,keyword:e,srch_type:"service",dept_id:m.serviceId,action_type:"update"};m.spinning=e,a.updateKeywords(t).then(function(t){m.spinning="",m.keywords.push(e),m.keywords=_.sortBy(m.keywords,_.toLower),m.newlyAdded=[e],_.pull(m.keywordsOfApp,e)})}function o(){m.openAccordionObj.id==m.accordionId?delete m.openAccordionObj.id:(m.openAccordionObj.id=m.accordionId,m.newlyAdded=[],m.fetchKeywords())}function r(e){var n=t.confirm({title:"Confirmation",textContent:'Are you sure you want to delete "'+e+'" keyword?',ok:"Yes",cancel:"No",targetEvent:null,clickOutsideToClose:!1});t.show(n).then(function(){m.spinning=e;var t={dept_id:m.appId||m.serviceId,lang:m.selectedLanguage.id,srch_type:m.searchType,keyword:e,action_type:"delete",trkr:null};return a.updateKeywords(t)}).then(function(){_.pull(m.keywords,e),m.serviceId&&m.keywordsOfApp&&m.keywordsOfApp.push(e),m.keywordsOfApp=_.sortBy(m.keywordsOfApp,_.toLower),m.spinning=""})}function s(){var e=m.newKeywords.split("\n");e=_.map(e,_.trim),_.remove(e,_.isEmpty);var t={lang:m.selectedLanguage.id,keyword:e.join(","),srch_type:m.searchType,dept_id:m.appId||m.serviceId,action_type:"update"};m.loaders.adding=!0,a.updateKeywords(t).then(function(t){m.newKeywords="",m.newlyAdded=e,m.keywords=_(e).concat(m.keywords).sortBy(_.toLower).value(),m.keywordForm.$setUntouched(),m.keywordForm.$setPristine()}).finally(function(){m.loaders.adding=!0})}function l(e){return _.indexOf(m.newlyAdded,e)>-1}function c(e){var t={deptId:e,lang:m.selectedLanguage.id,searchType:"application"};m.keywordsOfApp=[],m.isloadingKeywords=!0,a.fetchKeywords(t).then(function(e){m.isloadingKeywords=!1;var t=e[0];t&&t.keywords&&(m.keywordsOfApp=_(t.keywords.split(",")).map(_.trim).uniq().value(),_.remove(m.keywordsOfApp,_.isEmpty)),m.keywordsOfAppBackup=_.cloneDeep(m.keywordsOfApp),m.keywordsOfApp=_(m.keywordsOfApp).difference(m.keywords).sortBy(_.toLower).value()})}function d(){var e={deptId:m.appId||m.serviceId,lang:m.selectedLanguage.id,searchType:m.searchType};m.keywords=[],m.isloadingKeywords=!0,a.fetchKeywords(e).then(function(e){m.isloadingKeywords=!1;var t=e[0];t&&t.keywords&&(m.keywords=_(t.keywords.split(",")).map(_.trim).uniq().value(),_.remove(m.keywords,_.isEmpty),m.keywords=_.sortBy(m.keywords,_.toLower)),m.service&&c(m.service.appid)})}var m=this;m.$onInit=function(){m.loaders={},m.appId=m.app&&m.app.appid,m.serviceId=m.service&&m.service.serviceid,m.displayName=m.app?m.app.appname:m.service.servicename,m.accordionId=e.$id,m.openAccordion=o,m.openAccordionObj=n,m.searchType=m.appId?"application":"service",m.isNewlyAdded=l,m.keywords=[],m.deleteConfirm=r,m.addKeywords=s,m.fetchKeywords=d,m.addKeywordFromAppKeywords=i,m.preopen&&m.openAccordion()},m.$onChanges=function(e){e.selectedLanguage.isFirstChange()||m.openAccordionObj.id==m.accordionId&&m.fetchKeywords()}}e.component("keywordAccordionComponent",{templateUrl:"resources/app/components/_commonComponents/keywordAccordionComponent/keywordAccordionComponent.html",controller:t,controllerAs:"vm",bindings:{service:"<",app:"<",selectedLanguage:"<",preopen:"<"}}),t.$inject=["$scope","$mdDialog","keywordsService"];var n={}}(angular.module("selfcare")),function(e){function t(){function e(e){e&&(a.page=e),a.disableButtons=!0,a.onFetch()(a.page,a.pageSize).then(function(e){a.count=parseInt(e),n()}).finally(function(){delete a.disableButtons})}function t(){a.page=1,n(),a.changePage()}function n(){if(a.count){var e=Math.ceil(a.count/a.pageSize);a.pageNumbers=_.map(new Array(e),function(e,t){return t+1})}}var a=this;a.$onInit=function(){a.changePage=e,a.pageSizeChange=t,a.availablePageSizes=[5,10,20,30,40],a.pageSize=a.defaultPageSize||a.availablePageSizes[1],a.fetchOnInit&&a.pageSizeChange(),a.api={goToPage:e,getCurrentPage:function(){return a.page},reloadPage:e}}}e.component("paginationComponent",{templateUrl:"resources/app/components/_commonComponents/paginationComponent/paginationComponent.html",controller:t,controllerAs:"vm",bindings:{onFetch:"&",api:"=?",fetchOnInit:"<",defaultPageSize:"<",hidePageSize:"<",hidePageNum:"<"}}),t.$inject=["$localStorage"]}(angular.module("selfcare")),function(e){function t(e){function t(e){var t=n.rating-parseInt(e);return t>=0?"star":t>-1&&t<0?"star_half":"star_border"}var n=this;n.starIconValue=[],n.$onChanges=function(e){if(e.rating.currentValue){n.rating=parseFloat(n.rating);for(var a=0;a<5;a++)n.starIconValue[a]=t(a+1)}}}e.component("starRatingComponent",{templateUrl:"resources/app/components/_commonComponents/starRatingComponent/starRatingComponent.html",controller:t,controllerAs:"vm",bindings:{rating:"<"}}),t.$inject=["$localStorage"]}(angular.module("selfcare")),function(e){function t(e,t){var n=this;n.submit=function(){t.hide({startDate:n.startDate,endDate:n.endDate})}}e.component("dateRangeSelectorComponent",{templateUrl:"resources/app/components/_commonComponents/dateRangeSelectorComponent/dateRangeSelectorComponent.html",controller:t,controllerAs:"vm",bindings:{startDate:"<",endDate:"<",maxEndDate:"<",minStartDate:"<"}}),t.$inject=["$localStorage","$mdDialog"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o){var r=this;r.cancel=function(){n.cancel()},r.changePassword=function(){r.changePwdPromise=t.changePassword(r.oldPassword,r.password),r.changePwdPromise.then(function(){n.hide(r.password)})},r.$onInit=function(){(r.forFirsTime||r.forExpired)&&(r.timeLeft=120,r.intervalTimer=a(function(){0==--r.timeLeft&&(n.cancel(),i.reload())},1e3,120))},r.$onDestroy=function(){a.cancel(r.intervalTimer)}}e.component("changePasswordComponent",{templateUrl:"resources/app/components/_commonComponents/changePasswordComponent/changePasswordComponent.html",controller:t,controllerAs:"vm",bindings:{oldPassword:"<",forFirsTime:"<",forExpired:"<"}}),t.$inject=["$localStorage","usersService","$mdDialog","$interval","$state","customToastService"]}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.cancelAction=function(){t.cancel()},a.submitAction=function(){a.onSubmit?(a.submitPromise=a.onSubmit()(a.text),a.submitPromise.then(function(){t.hide(a.text)}),n.reload()):t.hide(a.text)},a.$onInit=function(){a.initialValue=a.initialValue||"",a.text=a.initialValue||"",a.ok=a.ok||"Ok",a.cancel=a.cancel||"Cancel",a.pattern=a.pattern||"",a.type=a.type||"text"}}e.component("promptComponent",{templateUrl:"resources/app/components/_commonComponents/promptComponent/promptComponent.html",controller:t,controllerAs:"vm",bindings:{title:"<",initialValue:"<",cancel:"<",ok:"<",onSubmit:"&",pattern:"<",name:"<",type:"<",required:"<",dontSaveIfSame:"<",helpText:"<",multiline:"<",maxLength:"<"}}),t.$inject=["$localStorage","$mdDialog","$state"]}(angular.module("selfcare")),function(e){function t(e,t){var n=this;n.cancel=function(){t.cancel()},n.submit=function(){n.requestPromise=n.onRequest()({subject:n.subject,newValue:n.newValue,comment:n.comment,name:n.name}),n.requestPromise.then(function(){t.hide(n.name)})},n.$onInit=function(){n.newValue=n.initValue,n.maxLength=n.maxLength||1e3}}e.component("requestComponent",{templateUrl:"resources/app/components/_commonComponents/requestComponent/requestComponent.html",controller:t,controllerAs:"vm",bindings:{name:"<",subject:"<",onRequest:"&",initValue:"<",maxLength:"<"}}),t.$inject=["$localStorage","$mdDialog"]}(angular.module("selfcare")),function(e){function t(e,t,n){function a(e){if(e!=i.dateRange){i.dateRange=e||i.dateRange;var t=_.find(i.dateRanges,{rangeId:i.dateRange});t?(i.onRangeChange()(t.startDate,t.endDate),i.commonData.startDate=t.startDate,i.commonData.endDate=t.endDate,n.setSharedData(i.commonData)):(i.onRangeChange()(i.startDate,i.endDate),commonData.startDate=i.startDate)}}var i=this;i.commonData={},i.$mdMedia=e;var o=!1;i.dateRangeChange=a,i.dMinus1=moment().subtract(1,"days").toDate(),i.dateRangeChange=a,i.dateRanges=[{rangeId:"Yesterday",startDate:moment().subtract(1,"days").toDate(),endDate:i.dMinus1,rangeText:"Yesterday"},{rangeId:"week",startDate:moment().subtract(7,"days").toDate(),endDate:i.dMinus1,rangeText:"Last 7 Days"},{rangeId:"month",startDate:moment().subtract(30,"days").toDate(),endDate:i.dMinus1,rangeText:"Last 30 Days"},{rangeId:"days",startDate:moment().subtract(90,"days").toDate(),endDate:i.dMinus1,rangeText:"Last 90 Days",showOnMobile:!0}],i.$onInit=function(){o=!0,i.startDate&&i.endDate&&i.$onChanges(),a()},i.$onChanges=function(e){o&&(i.dateRange="custom"),_.each(i.dateRanges,function(e){if(moment(i.startDate).isSame(e.startDate,"day")&&moment(i.endDate).isSame(e.endDate,"day"))return i.dateRange=e.rangeId,!1})}}e.component("quickDateRangeComponent",{templateUrl:"resources/app/components/_commonComponents/quickDateRangeComponent/quickDateRangeComponent.html",controller:t,controllerAs:"vm",bindings:{dateRange:"<",startDate:"<",endDate:"<",onRangeChange:"&",onCustom:"&"}}),t.$inject=["$mdMedia","ratingsService","commonDataService"]}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.viewRolesEdit=function(){n.go("selfcare.roles.edit"),t.hide()},a.$onInit=function(){}}e.component("roleChangedDialogComponent",{templateUrl:"resources/app/components/_commonComponents/roleChangedDialogComponent/roleChangedDialogComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","$mdDialog","$state"]}(angular.module("selfcare")),angular.module("selfcare").component("selfCareComponent",{templateUrl:"resources/app/components/selfCareComponent/selfCareComponent.html"}),function(e){function t(e,t,n,a,i,o,r){var s=this;s.logout=function(){s.logoutPromise=e.logout().finally(function(e){a.$reset(),n.go("login")})},s.$mdSidenav=i,s.breadCrumbService=o,s.userinfo=a.userInfo,s.status=s.userinfo.status,s.mno=s.userinfo.mno,s.emailId=s.userinfo.emailId,s.cdate=s.userinfo.cdate,s.signature=s.userinfo.signature,s.statecentral=a.stateCentral[0],s.statecentral.length>3&&s.statecentral.match(/99/g)?s.name="All":"99"==s.statecentral?s.name="Central":s.name="State",s.isSuperAdmin="superadmin"==a.userRole.logicalName.toLowerCase(),s.isSuperAdmin&&(s.name="All")}e.component("headerComponent",{templateUrl:"resources/app/components/headerComponent/headerComponent.html",controllerAs:"vm",controller:t}),t.$inject=["loginService","ngProgressService","$state","$localStorage","$mdSidenav","breadCrumbService","customDialogService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o){var r=this;r.id,r.status,r.mno,r.cdate,r.signature,r.statecentral,r.name,r.userInfo=a.userInfo,console.log("gdfnghkldgdgkdfhlkdfghldfk"+JSON.stringify(r.userInfo)),r.id=r.userInfo.userId,r.status=r.userInfo.status,r.mno=r.userInfo.mno,r.emailId=r.userInfo.emailId,r.cdate=r.userInfo.cdate,r.signature=r.userInfo.signature,r.statecentral=a.stateCentral[0],"99"==r.statecentral?r.name="Central":r.name="State"}e.component("userinfoshowComponent",{templateUrl:"resources/app/components/headerComponent/userinfoshowComponent.html",controllerAs:"vm",controller:t}),t.$inject=["loginService","ngProgressService","$state","$localStorage","$mdSidenav","breadCrumbService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i){var o=this;o.$mdMedia=n,o.$mdSidenav=a,a.uscSidebarLocked=!0,o.testLen="",i.$on("onboardCountUpdate",function(e,t){o.testLen=t}),o.$onInit=function(){o.navigations=[],o.navigations.push({name:"Dashboard",state:"selfcare.dashboard",icon:"assessment",right:"dashboard",children:[{name:"Apps",state:"selfcare.dashboard.apps",icon:"dashboard"},{name:"Services",state:"selfcare.dashboard.services",icon:"apps"}]}),o.navigations.push({name:"Manage Users",state:"selfcare.users",icon:"supervisor_account",right:"createUser,onboardingRequests",children:[{name:"Create User",state:"selfcare.users.create",icon:"person_add"},{name:"Edit Users",state:"selfcare.users.edit",icon:"edit"},{name:"Onboarding Requests",state:"selfcare.users.requests",icon:"call_received",right:"onboardingRequests"},{name:"User Tree",state:"selfcare.users.tree",icon:"device_hub"}]}),o.navigations.push({name:"Manage Roles",state:"selfcare.roles",icon:"security",right:"createUser",children:[{name:"Create Role",state:"selfcare.roles.create",icon:"group_add"},{name:"Edit Roles",state:"selfcare.roles.edit",icon:"edit"}]}),o.navigations.push({name:"Manage Notifications",state:"selfcare.campaigns",icon:"phonelink_ring",right:"manageCampaigns",children:[{name:"Schedule",state:"selfcare.campaigns.schedule",icon:"schedule"},{name:"View",state:"selfcare.campaigns.view",icon:"list"}]}),o.navigations.push({name:"Manage Banners",state:"selfcare.banners",icon:"view_carousel",right:"requestBanners,approveBanners",children:[{name:"Upload Banners",state:"selfcare.banners.upload",icon:"cloud_upload"},{name:"View My Banners",state:"selfcare.banners.view",icon:"view_day"},{name:"Approve Banners",state:"selfcare.banners.approve",icon:"verified_user",right:"approveBanners"}]}),o.navigations.push({name:"Questionnaire",state:"selfcare.questionnaire",icon:"assignment",right:"viewQuestionaire",children:[{name:"View Submissions",state:"selfcare.questionnaire.viewSubmissions",icon:"assignment_turned_in"},{name:"Build & Edit",state:"selfcare.questionnaire.build",icon:"build"},{name:"Preview",state:"selfcare.questionnaire.preview",icon:"visibility"}]}),o.navigations.push({name:"Messaging & Broadcast",state:"selfcare.messaging",icon:"question_answer",children:[{name:"Broadcasts",state:"selfcare.messaging.broadcasts",icon:"rss_feed"},{name:"Direct Message",state:"selfcare.messaging.directMessage",icon:"textsms"}]}),o.navigations.push({name:"Attention Screens",state:"selfcare.attention",icon:"perm_device_information",right:"attentionScreen",children:[{name:"View Screens",state:"selfcare.attention.view",icon:"playlist_play"},{name:"Upload Screen",state:"selfcare.attention.upload",icon:"cloud_upload"}]}),o.navigations.push({name:"Service Directory",state:"selfcare.directory",icon:"format_list_numbered",right:"directoryService",children:[{name:"View Departments",state:"selfcare.directory.view",icon:"list"},{name:"Create New",state:"selfcare.directory.createNew",icon:"add_circle"}]}),o.navigations.push({name:"Rating & Feedback",state:"selfcare.ratingAndFeedback",icon:"stars",right:"ratingsApp,ratingsDept"}),o.navigations.push({name:"App Categories",state:"selfcare.createCategory",icon:"bubble_chart",right:"createCategory"}),o.navigations.push({name:"UMANG Analytics",state:"selfcare.analytics",icon:"multiline_chart",right:"analytics"}),o.navigations.push({name:"Fill Questionnaire",state:"selfcare.questionnaire.fill",icon:"edit",right:"fillQuestionaire"}),o.navigations.push({name:"Design API",state:"selfcare.designApi",icon:"code",right:"designApi"}),o.navigations.push({name:"UMANG FAQ",state:"selfcare.umangFaq",icon:"live_help",right:"manageAppFAQ"}),o.navigations.push({name:"My Account",state:"selfcare.myAccount",icon:"account_circle"}),t.onSuccess({to:"selfcare.**"},function(){_.each(o.navigations,function(e){e.override=!1})})},o.toggleAccordion=function(t){e.includes(t.state)||(t.override=!t.override),t.children||o.$mdSidenav("mainSidenav").toggle()}}e.component("sidenavComponent",{templateUrl:"resources/app/components/sidenavComponent/sidenavComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$state","$transitions","$mdMedia","$mdSidenav","$rootScope"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o,r,s,l,c,d,m,p,u){function g(){h.loginForm.$invalid?h.loginForm.$setSubmitted():h.loginPromise=e.loginUser(h.user).then(function(e){if("true"==e.pwdExpiry||"true"==e.firstLogin)d.showComponent({component:"changePasswordComponent",clickOutsideToClose:!1,bindings:{oldPassword:h.user.password,forFirsTime:"true"==e.firstLogin,forExpired:"true"==e.pwdExpiry}}).then(function(e){h.user.password=e,s.freeText("Password successfully changed. Logging you in.."),g()});else{var n=_.map(e.info,"statecentral"),i=(_.map(e.apps,"appid"),_.map(e.apps,"cgname")),o=_.without(_.uniq(i),null);console.log("map record :"+JSON.stringify(o)),t.isLoggedIn=Date.now()+envVars.serverTimeout,t.userRights=e.rights,t.userApps=e.apps,t.appCategory=o,t.stateCentral=n,t.userServices=e.services,t.userRole=e.roles[0],t.userInfo=e.info[0],t.roleFlag=e.roleFlag,t.userInfo.signature=t.userInfo.signature||"","true"==e.roleFlag&&d.showComponent({component:"roleChangedDialogComponent",bindings:{forDialog:!0},clickOutsideToClose:!1}),a.go("selfcare.dashboard.apps")}})}function v(){h.emailOTPPromise=l.emailOtpInitiate(h.onboard.email,"onboard"),h.emailOTPPromise.then(function(){s.freeText("OTP successfully sent to "+h.onboard.email),h.canRequestEmailOTP=!1,i.cancel(h.emailTimeout),h.emailTimeout=i(function(){h.canRequestEmailOTP=!0},6e4),h.emailRemainingSec=60,o.cancel(h.emailInterval),h.emailInterval=o(function(){h.emailRemainingSec--},1e3,60)})}function f(){h.mnoOTPPromise=l.mobOtpInitiate(h.onboard.mno,"onboard"),h.mnoOTPPromise.then(function(){s.freeText("OTP successfully sent to "+h.onboard.mno),h.canRequestMobOTP=!1,i.cancel(h.mobTimeout),h.mobTimeout=i(function(){h.canRequestMobOTP=!0},6e4),h.mnoRemainingSec=60,o.cancel(h.mnoInterval),h.mnoInterval=o(function(){h.mnoRemainingSec--},1e3,60)})}var h=this;h.user={},h.onboard={},h.login=g,h.fetchStates=function(){return r.fetchStates().then(function(e){console.log(JSON.stringify(e)),h.allStates=e})},h.fetchStates1=function(){return r.fetchStates().then(function(e){e.push({stateid:"99",statename:"Center"}),h.allStates=e})},h.requestEmailOTP=v,h.requestMobOTP=f,h.forgotPassword=function(){d.showComponent({component:"forgotPasswordComponent",bindings:{userId:h.user.userid},clickOutsideToClose:!1}).then(function(e){h.user.userid=e})},h.submitOnboardForm=function(){h.submitPromise=c.submitOnboardForm(h.onboard).then(function(e){console.log("submitOnboardForm================//"+e),s.hideToasts(),p.show(p.alert().title("Onboarding request submitted!").textContent("We have received your onboarding request. Once approved, you will receive login credentials.").ok("Okay")).then(function(){a.reload()})}).catch(function(e){if("OTP0031"==e.rc||"SLF0071"==e.rc){var t="One or both of the OTPs were Invalid. New OTPs will now be requested. Please fill and Submit.";h.onboard.mno||(t="Email OTP was Invalid. Please fill correct OTP and submit."),p.show(p.alert().title("Unsuccessful!").textContent(t).ok("Okay")).then(function(){h.onboard.mno&&(v(),f())})}else s.freeText(e.rd,void 0,!0);h.onboard.mno&&h.onboardForm.mnoOTP.$setUntouched(),h.onboardForm.emailOTP.$setUntouched(),h.onboard.mnoOTP="",h.onboard.emailOTP=""})},h.validateGovtEmail=function(){h.onboardForm.email.$setTouched(),h.onboardForm.email.$setValidity("validatingDomain",!1),h.fetchingDomains||(h.fetchingDomains=!0,r.fetchGovtDomains().then(function(e){var t=h.onboard.email&&h.onboard.email.split("@").pop().toLowerCase();h.onboardForm.email.$setValidity("invalidDomain",_.exists(e,t)),h.onboardForm.email.$setValidity("validatingDomain",!0),h.fetchingDomains=!1}))},h.showAllowedDomains=function(){r.fetchGovtDomains().then(function(e){p.show({templateUrl:"resources/app/components/loginComponent/allowedDomainsDialog.html",controllerAs:"vm",clickOutsideToClose:!0,controller:["$mdDialog",function(t){this.allowedDomains=e,this.$mdDialog=t}]})})},h.$onInit=function(){h.emailPattern=envVars.emailPattern,h.mobilePattern=envVars.mobilePattern,h.namePattern=envVars.namePattern,p.cancel(),u.resetGoogleAnalytics()},m.$on("destroy",function(){o.cancel(h.mnoInterval),o.cancel(h.emailInterval),i.cancel(h.mobTimeout),i.cancel(h.emailTimeout)})}e.component("loginComponent",{templateUrl:"resources/app/components/loginComponent/loginComponent.html",controller:t,controllerAs:"vm"}),t.$inject=["loginService","$localStorage","ngProgressService","$state","$timeout","$interval","commonDataService","customToastService","usersService","onboardService","customDialogService","$scope","$mdDialog","gaHttpService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o,r){var s=this;s.cancel=function(){t.cancel()},s.$onInit=function(){},s.$onDestroy=function(){a.cancel(s.intervalTimer),n.cancel(s.otpTimeout)},s.requestOTP=function(){s.otpPromise=r.emailOtpInitiate(s.userId,""),s.otpPromise.then(function(){o.freeText("OTP successfully sent to "+s.userId),s.canRequestOTP=!1,n.cancel(s.otpTimeout),s.otpTimeout=n(function(){s.canRequestOTP=!0},6e4),s.timeLeft=60,a.cancel(s.intervalTimer),s.intervalTimer=a(function(){s.timeLeft--},1e3,60)})},s.changePassword=function(){s.changePwdPromise=r.changePasswordByOTP({newPassword:s.password,otp:s.otp,userId:s.userId}),s.changePwdPromise.then(function(){t.hide(s.userId),o.freeText("Password has been successfully changed! Please login with new password.")}).catch(function(e){"SAO"==e.rc&&(s.otp="",s.password="",s.confirmPassword="",s.forgotPasswordForm.confirmPassword.$setUntouched(),s.forgotPasswordForm.password.$setUntouched(),s.forgotPasswordForm.otp.$setUntouched(),s.canRequestOTP=!0,s.otpPromise=null)})}}e.component("forgotPasswordComponent",{templateUrl:"resources/app/components/loginComponent/forgotPasswordComponent/forgotPasswordComponent.html",controller:t,controllerAs:"vm",bindings:{userId:"<"}}),t.$inject=["$localStorage","$mdDialog","$timeout","$interval","$state","customToastService","usersService"]}(angular.module("selfcare")),function(e){function t(e,t){function n(){switch(a.sortType){case"latestFirst":a.allApps=_(a.allAppsBackup).orderBy(function(e){return moment(e.creationdate,"DD/MM/YYYY hh:mm").valueOf()},["desc"]).value();break;case"oldestFirst":a.allApps=_(a.allAppsBackup).orderBy(function(e){return moment(e.creationdate,"DD/MM/YYYY hh:mm").valueOf()},["asc"]).value();break;case"aToZ":a.allApps=_(a.allAppsBackup).orderBy(function(e){return _.toLower(e.appname)},["asc"]).value();break;case"zToA":a.allApps=_(a.allAppsBackup).orderBy(function(e){return _.toLower(e.appname)},["desc"]).value()}}var a=this;a.openFilterDialog=function(){t.showComponent({component:"appsServicesFilterComponent",bindings:{filters:_.cloneDeep(a.filters)}}).then(function(e){a.allAppsBackup=e.apps,a.filters=e.filters,a.hasFilters=e.hasFilters,n()})},a.sortApps=n,a.showApps=function(){a.areAppsVisible=!0,angular.element(document.getElementById("appsContent")).scrollTo(0,0,100)},a.clearFilters=function(){a.allAppsBackup=_.map(e.userApps),n(),delete a.filters,delete a.hasFilters},a.$onInit=function(){a.sortType="latestFirst",a.allAppsBackup=_.map(e.userApps),n()}}e.component("dashboardAppsComponent",{templateUrl:"resources/app/components/dashboardComponent/dashboardAppsComponent/dashboardAppsComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","customDialogService"]}(angular.module("selfcare")),function(e){function t(e,t){function n(){switch(a.sortType){case"latestFirst":a.allServices=_(a.allServicesBackup).orderBy(function(e){return moment(e.cdate).valueOf()},["desc"]).value();break;case"oldestFirst":a.allServices=_(a.allServicesBackup).orderBy(function(e){return moment(e.cdate).valueOf()},["asc"]).value();break;case"aToZ":a.allServices=_(a.allServicesBackup).orderBy(function(e){return _.toLower(e.servicename)},["asc"]).value();break;case"zToA":a.allServices=_(a.allServicesBackup).orderBy(function(e){return _.toLower(e.servicename)},["desc"]).value();break;case"appLatestFirst":a.allServices=_(a.allServicesBackup).orderBy([function(e){return moment(e.app.creationdate).valueOf()},function(e){return _.toLower(e.servicename)}],["desc"]).value();break;case"appOldestFirst":a.allServices=_(a.allServicesBackup).orderBy([function(e){return moment(e.app.creationdate).valueOf()},function(e){return _.toLower(e.servicename)}],["asc"]).value();break;case"appAToZ":a.allServices=_(a.allServicesBackup).orderBy([function(e){return _.toLower(e.app.appname)},function(e){return _.toLower(e.servicename)}],["asc"]).value();break;case"appZToA":a.allServices=_(a.allServicesBackup).orderBy([function(e){return _.toLower(e.app.appname)},function(e){return _.toLower(e.servicename)}],["desc"]).value()}}var a=this;a.sortServices=n,a.openFilterDialog=function(){t.showComponent({component:"appsServicesFilterComponent",bindings:{forService:!0,filters:_.cloneDeep(a.filters)}}).then(function(e){a.allServicesBackup=e.services,a.filters=e.filters,a.hasFilters=e.hasFilters,n()})},a.showServices=function(){a.areServicesVisible=!0,angular.element(document.getElementById("servicesContent")).scrollTo(0,0,600)},a.clearFilters=function(){a.allServicesBackup=_.map(e.userServices),n(),delete a.filters,delete a.hasFilters},a.$onInit=function(){a.sortType="latestFirst",a.allServicesBackup=_.map(e.userServices),n()}}e.component("dashboardServicesComponent",{templateUrl:"resources/app/components/dashboardComponent/dashboardServicesComponent/dashboardServicesComponent.html",controller:t,controllerAs:"vm",bindings:{allServices:"<"}}),t.$inject=["$localStorage","customDialogService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i){function o(){return n.fetchStates().then(function(e){l.allStates=e})}function r(){if(l.showMinistries)return delete l.filters.selectedMinistry,l.filters.allMinistries=[],i.getMinistries().then(function(e){l.filters.state?l.filters.allMinistries=_.filter(e,function(e){return e.stateId==l.filters.state.stateid}):l.filters.allMinistries=e})}function s(){l.filters={state:null},l.filters.stateRadio="all",l.filters.status="all"}var l=this;l.fetchStates=o,l.fetchCategories=function(){return a.fetchCategories().then(function(e){l.filters.allCategories=_.sortBy(e,function(e){return _.toLower(e.categoryName)})})},l.stateCentralChange=function(){"central"==l.filters.stateRadio&&(l.filters.state={stateid:"99"}),"all"==l.filters.stateRadio&&(l.filters.state=null),r()},l.stateChange=function(){r()},l.fetchMinistries=r,l.submit=function(){if(l.forService){var n=!1,a=_(e.userServices).map().filter(function(e){var t=!0;return l.filters.selectedCategory&&(n=!0,t=t&&_.exists(_.map(e.app.categories,"categoryId"),l.filters.selectedCategory.categoryId)),l.filters.state&&(n=!0,t=t&&e.app.state==l.filters.state.stateid),l.filters.startDate&&(n=!0,t=t&&moment(e.cdate).isSameOrAfter(l.filters.startDate,"day")),l.filters.endDate&&(n=!0,t=t&&moment(e.cdate).isSameOrBefore(l.filters.endDate,"day")),l.filters.startRating&&(n=!0,t=t&&parseFloat(e.rating)>=l.filters.startRating),l.filters.endRating&&(n=!0,t=t&&parseFloat(e.rating)<=l.filters.endRating),"all"!=l.filters.status&&(n=!0,t=t&&e.status==l.filters.status),t}).value();t.hide({filters:l.filters,services:a,hasFilters:n})}else{var i=!1,o=_(e.userApps).map().filter(function(e){var t=!0;return l.filters.selectedCategory&&(i=!0,t=t&&_.exists(_.map(e.categories,"categoryId"),l.filters.selectedCategory.categoryId)),l.filters.state&&(i=!0,t=t&&e.state==l.filters.state.stateid),l.filters.startDate&&(i=!0,t=t&&moment(e.creationdate).isSameOrAfter(l.filters.startDate,"day")),l.filters.endDate&&(i=!0,t=t&&moment(e.creationdate).isSameOrBefore(l.filters.endDate,"day")),l.filters.startRating&&(i=!0,t=t&&parseFloat(e.rating)>=l.filters.startRating),l.filters.endRating&&(i=!0,t=t&&parseFloat(e.rating)<=l.filters.endRating),"all"!=l.filters.status&&(i=!0,t=t&&e.status==l.filters.status),l.showMinistries&&l.filters.selectedMinistry&&(i=!0,t=t&&_.exists(l.filters.selectedMinistry.appIds,e.appid)),t}).value();t.hide({filters:l.filters,apps:o,hasFilters:i})}},l.reset=s,l.cancel=function(){t.cancel()},l.$onInit=function(){l.filters||s(),l.dropDownFlex=l.showMinistries?"30":"45",l.dateToday=new Date,l.filters=l.filters||{},o()}}e.component("appsServicesFilterComponent",{templateUrl:"resources/app/components/dashboardComponent/appsServicesFilterComponent/appsServicesFilterComponent.html",controller:t,controllerAs:"vm",bindings:{showMinistries:"<",forService:"<",filters:"<"}}),t.$inject=["$localStorage","$mdDialog","commonDataService","categoriesService","analyticsUserService"]}(angular.module("selfcare")),function(e){function t(){var e=this;e.tiles=[{state:"selfcare.dashboard.app.appProfile",imageUrl:"resources/assets/images/app-service-profile.png",text:"App Profile",right:"",hide:!1},{state:"selfcare.dashboard.app.reportCard",imageUrl:"resources/assets/images/report-card.png",text:"Report Card",right:"",hide:!1},{state:"",imageUrl:"resources/assets/images/reporting.png",text:"Reporting",right:"",hide:!0},{state:"selfcare.dashboard.app.keywords",imageUrl:"resources/assets/images/service-keywords.png",text:"App Keywords",right:"viewAppKeywords,editAppKeywords",hide:!1},{state:"selfcare.dashboard.app.categories",imageUrl:"resources/assets/images/service-cat-management.png",text:"App Category",right:"viewAppCategory,editAppCategory",hide:!1},{state:"selfcare.dashboard.app.faq",imageUrl:"resources/assets/images/service-faq.png",text:"App FAQ",right:"manageAppFAQ",hide:!0},{state:"selfcare.dashboard.app.ratings",imageUrl:"resources/assets/images/rating.png",text:"Rating & Feedback",right:"",hide:!1},{state:"selfcare.dashboard.app.queries",imageUrl:"resources/assets/images/user-query.png",text:"User Complaints",right:"viewQuery,takeQueryAction",hide:!1},{state:"selfcare.dashboard.app.onOff",imageUrl:"resources/assets/images/onoff.png",text:"Activate/Deactivate",right:"onOffApp",hide:!1}],e.$onInit=function(){}}e.component("appHomeComponent",{templateUrl:"resources/app/components/appHomeComponent/appHomeComponent.html",controller:t,controllerAs:"vm",bindings:{appid:"<"}}),t.$inject=[]}(angular.module("selfcare")),function(e){function t(){var e=this;e.tiles=[{state:"selfcare.dashboard.service.serviceProfile",imageUrl:"resources/assets/images/app-service-profile.png",text:"Service Profile",right:"",hide:!1},{state:"selfcare.dashboard.service.reportCard",imageUrl:"resources/assets/images/report-card.png",text:"Report Card",right:"",hide:!1},{state:"selfcare.dashboard.service.keywords",imageUrl:"resources/assets/images/service-keywords.png",text:"Service Keywords",right:"viewServiceKeywords,editServiceKeywords",hide:!1},{state:"",imageUrl:"resources/assets/images/reporting.png",text:"Reporting",right:"",hide:!0},{state:"",imageUrl:"resources/assets/images/service-faq.png",text:"Service FAQ",right:"manageServiceFAQ",hide:!0},{state:"selfcare.dashboard.service.ratings",imageUrl:"resources/assets/images/rating.png",text:"Rating & Feedback",right:"",hide:!1},{state:"selfcare.dashboard.service.queries",imageUrl:"resources/assets/images/user-query.png",text:"User Complaints",right:"viewQuery,takeQueryAction",hide:!1},{state:"selfcare.dashboard.service.onOff",imageUrl:"resources/assets/images/onoff.png",text:"Activate/Deactivate",right:"onOffApp,onOffService",hide:!0}],e.$onInit=function(){}}e.component("serviceHomeComponent",{templateUrl:"resources/app/components/serviceHomeComponent/serviceHomeComponent.html",controller:t,controllerAs:"vm",bindings:{serviceid:"<"}}),t.$inject=[]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i){function o(){s.selectedTabIndex=s.statuses.indexOf(s.status),r(),s.campaigns=null,s.fetchingPromise=t.fetchCampaign({status:s.status.toUpperCase()}).then(function(e){s.campaigns=_.sortBy(e,"scheduletime")})}function r(){switch(s.status){case"scheduled":s.buttonName="Cancel";break;case"running":s.buttonName="Stop";break;default:delete s.buttonName}}var s=this;s.loaders={},s.stopOrCancel=function(e){var a={campaignid:e.campaignid};n.confirm("cancel this campaign").then(function(){e.cancelPromise=t.stopCampaign(a).then(function(t){_.pull(s.campaigns,e),i.freeText("Campaign has been cancelled")})})},s.viewCampaignDetails=function(e){n.showComponent({component:"campaignEditorComponent",bindings:{campaignModel:t.mapCampaignToModel(e),readOnly:!0,onDownloadFile:function(){return t.downloadFile(e.campaignid).then(function(t){a.downloadFile(t,e.campaignid+".csv")})}},closeButton:!0})},s.statuses=["scheduled","running","stopped","cancelled","completed","suspended"],s.statusDesc={scheduled:"Notifications that have been scheduled to run in future.",running:"Notifications that are currently running.",stopped:"Notifications that have been intentionaly stopped.",cancelled:"Notifications that have been cancelled before scheduled time.",completed:"Notifications that have been successfully completed.",suspended:"Notifications that have been suspended due to system issue."},s.statusIcons={scheduled:"timer",running:"timelapse",stopped:"stop",cancelled:"cancel",completed:"done_all",suspended:"report"},s.$onInit=function(){o()},s.uiOnParamsChanged=function(e,t){s.status=e.status,o()}}e.component("viewCampaignsComponent",{templateUrl:"resources/app/components/campaignComponents/viewCampaignsComponent/viewCampaignsComponent.html",controller:t,controllerAs:"vm",bindings:{status:"<"}}),t.$inject=["$localStorage","campaignsService","customDialogService","helperService","customToastService"]}(angular.module("selfcare")),function(e){function t(e,t,n){function a(e){return t.scheduleCampaign(e)}var i=this;i.loaders={},i.$onInit=function(){i.campaignModel={},i.scheduleCampaign=a},i.uiCanExit=function(){}}e.component("scheduleCampaignComponent",{templateUrl:"resources/app/components/campaignComponents/scheduleCampaignComponent/scheduleCampaignComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","campaignsService","customDialogService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o,r){function s(){y.allApps=_.map(i.userApps,_.trimAppDetails),y.externalModel&&(y.campaignModel.selectedApps=_.intersectionBy(y.allApps,y.campaignModel.favApps,"appid"))}function l(){a.fetchStates().then(function(e){y.allStates=e,y.externalModel&&(y.campaignModel.selectedStates=_.intersectionBy(y.allStates,y.campaignModel.selectedStates,"stateid"))})}function c(){a.fetchQualification().then(function(e){y.allQualifications=e,y.externalModel&&(y.campaignModel.selectedQualifications=_.intersectionBy(y.allQualifications,y.campaignModel.selectedQualifications,"qualId"))})}function d(){a.fetchOccupationList().then(function(e){y.allOccupations=e,y.externalModel&&(y.campaignModel.selectedOccupations=_.intersectionBy(y.allOccupations,y.campaignModel.selectedOccupations,"occuId"))})}function m(){if(p()){var e=_.cloneDeep(y.campaignModel);if(e.oses=_.map(_.filter(e.oses,"selected"),"value").join(","),e.genders=_.map(_.filter(e.genders,"selected"),"value").join(","),e.selectedStates=_.map(e.selectedStates,"stateid").join(","),e.favApps=_.map(e.selectedApps,"appid").join(","),e.selectedQualifications=_.map(e.selectedQualifications,"qualId").join(","),e.selectedOccupations=_.map(e.selectedOccupations,"occuId").join(","),e.age=e.age.join(","),e.campaignDateServer=moment(e.campaignDate).format("YYYY-MM-DD HH:mm:ss"),e.selectedNotificationType=y.campaignModel.selectedNotificationType.value,e.appIds=_.map(i.userApps,"appid").join("|"),"service"==y.campaignModel.selectedNotificationType.value){var n=i.userApps[y.campaignModel.redirectApp];e.icon=n.image,e.redirectserviceid=n.appid,e.redirectUrl=n.umangUrl,e.webViewTitle=n.appname,e.deptname=n.appname,delete e.redirectApp}y.submitPromise=y.onSubmit()(e).then(function(){t.freeText("Your Campaign has been successfully scheduled.","View Scheduled Campaigns").then(function(e){e&&o.go("selfcare.campaigns.view")}),f()})}}function p(){y.campaignForm.campaignTime.$setTouched(!0);var e=moment(y.campaignModel.campaignTime,"HH:mm");return e.isValid()&&(y.campaignModel.campaignDate.setHours(e.hour()),y.campaignModel.campaignDate.setMinutes(e.minute())),y.campaignForm.campaignDate.$setValidity("futureDate",moment(y.campaignModel.campaignDate).isSameOrAfter(new Date,"date")),y.campaignForm.campaignTime.$setValidity("futureTime",moment(y.campaignModel.campaignDate).isSameOrAfter(moment().add(15,"minutes"))),y.campaignForm.campaignDate.$valid&&y.campaignForm.campaignTime.$valid}function u(){}function g(){y.campaignForm.oses.$setValidity("atleastOne",_.filter(y.campaignModel.oses,"selected").length>0)}function v(){y.campaignForm.extractFile.$setValidity("notCSV","csv"==y.campaignModel.extractFile.name.split(".").pop())}function f(){o.reload("selfcare.campaigns.schedule")}function h(){var e=window.location.origin+envVars.base+"/resources/assets/static/sample.csv";r.downloadFileFromURL(e)}function b(){y.downloadFilePromise=y.onDownloadFile()()}var y=this;y.$onInit=function(){y.notificationTypes=n.createNotiFicationTypeData(),y.timePattern=envVars.timePattern,y.downloadSample=h,y.campaignModel?(y.externalModel=!0,y.campaignModel.selectedNotificationType=_.find(y.notificationTypes,{value:y.campaignModel.notificationType}),y.campaignModel.campaignTime=moment(y.campaignModel.campaignDate).format("HH:mm"),y.extractType=y.campaignModel.extractType):(y.campaignModel={},y.campaignModel.age=[],y.campaignModel.campaignDate=moment().millisecond(0).second(0).add(15,"minutes").toDate(),y.campaignModel.campaignTime=moment(y.campaignModel.campaignDate).format("HH:mm"),y.campaignModel.oses=n.createOSData(),y.campaignModel.genders=n.createGenderData(),y.campaignModel.selectedNotificationType=_.first(y.notificationTypes),y.extractType="extract",y.minCampaignDate=new Date,y.maxCampaignDate=moment().add(3,"months").toDate()),y.resetForm=f,y.downloadFile=b,y.submitForm=m,y.checkFutureDateTime=p,y.validateOS=g,y.validateGender=u,y.selectedFileChange=v,s(),l(),c(),d()}}e.component("campaignEditorComponent",{templateUrl:"resources/app/components/campaignComponents/campaignEditorComponent/campaignEditorComponent.html",controller:t,controllerAs:"vm",bindings:{onSubmit:"&",campaignModel:"<?",readOnly:"<",onDownloadFile:"&"}}),t.$inject=["$mdSelect","customToastService","campaignsService","commonDataService","$localStorage","$state","helperService"]}(angular.module("selfcare")),function(e){function t(e,t){function n(){t.fetchLanguages().then(function(e){a.languages=e,a.selectedLanguage=a.languages[0],a.showAccordions=!0})}var a=this;a.getDetailedService=function(t){return e.userServices[t.serviceid]},a.$onInit=function(){a.app=e.userApps[a.appid],n()}}e.component("appKeywordComponent",{templateUrl:"resources/app/components/appKeywordComponent/appKeywordComponent.html",controller:t,controllerAs:"vm",bindings:{appid:"<"}}),t.$inject=["$localStorage","commonDataService"]}(angular.module("selfcare")),function(e){function t(e,t){function n(){t.fetchLanguages().then(function(e){a.languages=e,a.selectedLanguage=a.languages[0],a.showAccordions=!0})}var a=this;a.$onInit=function(){a.service=e.userServices[a.serviceid],n()}}e.component("serviceKeywordComponent",{templateUrl:"resources/app/components/serviceKeywordComponent/serviceKeywordComponent.html",controller:t,controllerAs:"vm",bindings:{serviceid:"<"}}),t.$inject=["$localStorage","commonDataService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a){function i(){var e=d.app.services.map(function(e){return{displayName:e.servicename,value:{type:"serviceonly",serviceid:e.serviceid}}});d.servicesFilters=[],d.servicesFilters.push({displayName:"All",value:{type:"all",serviceid:null}}),d.servicesFilters.push({displayName:d.app.appname+" - Only",value:{type:"apponly",serviceid:null}}),d.servicesFilters=_.concat(d.servicesFilters,e),d.selectedService=_.first(d.servicesFilters).value}function o(){"serviceonly"==d.selectedService.type?("email"==d.selectedFilter.value&&(d.selectedFilter=_.first(d.filterOptions)),d.filterOptions.length=2):2==d.filterOptions.length&&"serviceonly"!=d.selectedService.type&&d.filterOptions.push({displayName:"Email",value:"email"}),d.paginator.goToPage(1)}function r(t){e.userServices[t.services]?t.servicename=e.userServices[t.services].servicename:t.servicename=d.forService?d.service.app.appname:d.app.appname}function s(e){"email"==e.lmode?(e.alreadyTrusted||(e.alreadyTrusted=!0,e.body=a.trustAsHtml(e.body)),n.showComponent({component:"emailViewComponent",bindings:{emailData:e},padding:!1}).then(function(t){e.remarks=t.newRemark,e.status=t.newStatus})):n.showComponent({component:"queryViewComponent",bindings:{queryData:e},padding:!1}).then(function(t){e.remarks=t.newRemark,e.status=t.newStatus})}function l(e){n.showComponent({component:"viewattachmentcomponent",bindings:{emailData:e},padding:!1})}function c(e,n){var a={};return a.appid=d.appid,a.serviceid=d.selectedService.serviceid,a.type=d.selectedService.type,a.page=e,a.size=n,a.sdate=d.startDate,a.edate=d.endDate,a.lang="en",a.action=d.selectedFilter.value,a.status=d.selectedStatus.value,d.queries=[],d.emails=[],d.isLoading=!0,t.fetchDeptQuery(a).then(function(e){return d.isLoading=!1,d.queries=_.orderBy(e.queries,function(e){return moment(e.log_time).valueOf()},"desc"),e.count})}var d=this;d.$onInit=function(){d.forService=!!d.serviceid,d.searchQuery=c,d.getSerivceName=r,d.serviceFilterChange=o,d.showExpandedView=s,d.getStatusClass=t.getStatusClass,d.getStatusDisplay=t.getStatusDisplay,d.showExpandedView1=l,d.filterOptions=[{displayName:"IVR",value:"ivr"},{displayName:"Chat",value:"chat"},{displayName:"Email",value:"email"}],d.selectedFilter=_.find(d.filterOptions,{value:d.type})||_.first(d.filterOptions),d.statusOptions=t.getQueryStatuses(!0),d.selectedStatus=_.first(d.statusOptions),d.forService?(d.service=e.userServices[d.serviceid],d.appid=d.service.appid,d.filterOptions.pop(),d.selectedService={type:"serviceonly",serviceid:d.serviceid}):(d.app=e.userApps[d.appid],i())}}e.component("userQueryComponent",{templateUrl:"resources/app/components/userQueryComponent/userQueryComponent.html",controller:t,controllerAs:"vm",bindings:{appid:"<",serviceid:"<",startDate:"<",endDate:"<",type:"<"}}),t.$inject=["$localStorage","userQueryService","customDialogService","$sce"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o,r){function s(){var t={endDate:p.endDate,startDate:p.startDate,appid:p.appid};p.dashboardDataPromise=e.getAppDashboardData(t).then(function(e){p.platformJSON=e.platform,p.responseSlabJSON=e.slab,p.userDataJSON=e.users,p.successRateJSON=e.successRate,p.reponseTimeJSON=e.rt})}function l(){var t={endDate:p.endDate,startDate:p.startDate,serviceid:p.serviceid};p.dashboardDataPromise=e.getServiceDashboardData(t).then(function(e){p.platformJSON=e.platform,p.responseSlabJSON=e.slab,p.userDataJSON=e.users,p.successRateJSON=e.successRate,p.reponseTimeJSON=e.rt})}function c(){var e={appid:p.appid,startDate:p.startDate,endDate:p.endDate};a.getDeptQueryCount(e).then(function(e){p.queryCounts=e})}function d(){var e={serviceid:p.serviceid,startDate:p.startDate,endDate:p.endDate};a.getServiceQueryCount(e).then(function(e){p.queryCounts=e})}function m(e,t){p.startDate=e,p.endDate=t,p.dateSelectorInstance.updateDates(e,t),p.$onChanges()}var p=this;p.$onInit=function(){p.dateSelectorInstance=i.createInstance(o,m),p.dateRange="month"},p.$onChanges=function(e){p.serviceid?(p.service=t.userServices[p.serviceid],l(),d()):(p.app=t.userApps[p.appid],s(),c())},p.goToQueries=function(e){p.appid?r.go("selfcare.dashboard.app.queries",{appid:p.appid,startDate:p.startDate,endDate:p.endDate,type:e}):r.go("selfcare.dashboard.service.queries",{serviceid:p.serviceid,startDate:p.startDate,endDate:p.endDate,type:e})},p.setDateRange=m}e.component("reportingComponent",{templateUrl:"resources/app/components/reportingComponent/reportingComponent.html",controller:t,controllerAs:"vm",bindings:{appid:"<",serviceid:"<",startDate:"<",endDate:"<"}}),t.$inject=["reportingService","$localStorage","ngProgressService","userQueryService","dateRangeSelectorService","$scope","$state"]}(angular.module("selfcare")),function(e){function t(e,t,n){function a(){i.getCatgoriesPromise=t.fetchCategories().then(function(e){e=_.map(e,function(e){return e.appIds=e.appIds.split(","),e}),i.linkedCategories=_(e).filter(function(e){return _.exists(e.appIds,i.appid)}).sortBy(function(e){return e.categoryName.toLowerCase()}).value(),i.unlinkedCategories=_(e).filter(function(e){return!_.exists(e.appIds,i.appid)}).sortBy(function(e){return e.categoryName.toLowerCase()}).value()})}var i=this;i.unlinkCategory=function(e){n.confirm("unlink <b>"+e.categoryName+"</b> with <b>"+i.app.appname+"</b>",!0).then(function(){e.spinning=!0,t.unlinkCategory(i.appid,e.categoryId).then(function(){_.pull(i.linkedCategories,e),_.insertSortedBy(i.unlinkedCategories,e,"categoryName")}).finally(function(){e.spinning=!1})})},i.linkCategory=function(e){n.confirm("link <b>"+e.categoryName+"</b> to <b>"+i.app.appname+"</b>",!0).then(function(){e.spinning=!0,t.linkCategory(i.appid,e.categoryId).then(function(){_.pull(i.unlinkedCategories,e),_.insertSortedBy(i.linkedCategories,e,"categoryName")}).finally(function(){e.spinning=!1})})},i.$onInit=function(){i.app=e.userApps[i.appid],a()}}e.component("appCategoryComponent",{templateUrl:"resources/app/components/appCategoryComponent/appCategoryComponent.html",controller:t,controllerAs:"vm",bindings:{appid:"<"}}),t.$inject=["$localStorage","categoriesService","customDialogService"]}(angular.module("selfcare")),function(e){function t(e,t){function n(){i.ratingPromise=t.fetchAppRating(i.app.appid).then(function(e){i.ratings=e})}function a(){i.ratingPromise=t.fetchServiceRating(i.service.serviceid).then(function(e){i.ratings=e})}var i=this;i.getAppFeedbacks=function(e,n){return i.feedbacks=null,i.feedbackPromise=t.fetchAppComments({appid:i.appid,rating:i.currentRating,page:e,size:n}),i.feedbackPromise.then(function(e){return i.feedbacks=e.comments,e.total})},i.getServiceFeedbacks=function(e,n){i.feedbacks=null,i.feedbackPromise=t.fetchServiceComments({appid:i.serviceid,rating:i.currentRating,page:e,size:n}).then(function(e){return i.feedbacks=e.comments,e.total})},i.onTabChange=function(e){i.currentRating=e.rating,e.paginator&&e.paginator.goToPage(1)},i.currentRating=5,i.allRatings=[{rating:5},{rating:4},{rating:3},{rating:2},{rating:1}],i.$onInit=function(){i.serviceid?(i.service=e.userServices[i.serviceid],a()):(i.app=e.userApps[i.appid],n())}}e.component("ratingsComponent",{templateUrl:"resources/app/components/ratingsComponent/ratingsComponent.html",controller:t,controllerAs:"vm",bindings:{appid:"<",serviceid:"<"}}),t.$inject=["$localStorage","ratingsService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i){function o(e){if(l.appid){var n={endDate:l.endDate,startDate:l.startDate,appid:l.appid};l.reportCardPromise=t.getAppReportCard(n).then(function(e){return l.rating=e.rating,l.responseTime=e.responseTime,l.users=e.users,l.averageSuccessPercenatge=e.averageSuccessPercenatge,l.forDashboard||s(l.selectedCard||"rating"),e})}else{var a={endDate:l.endDate,startDate:l.startDate,serviceid:l.serviceid};l.reportCardPromise=t.getServiceReportCard(a).then(function(e){return l.rating=e.averageRating,l.responseTime=e.responseTime,l.users=e.users,l.averageSuccessPercenatge=e.averageSuccessPercenatge,l.forDashboard||s(l.selectedCard||"art"),e})}}function r(e,t){l.startDate=e,l.endDate=t,o(),l.dateSelectorInstance&&l.dateSelectorInstance.updateDates(e,t)}function s(e){if(l.forDashboard)l.appid?i.go("selfcare.dashboard.app.reportCard",{appid:l.appid,startDate:l.startDate,endDate:l.endDate,selectedCard:e,dateRange:l.dateRange}):i.go("selfcare.dashboard.service.reportCard",{serviceid:l.serviceid,startDate:l.startDate,endDate:l.endDate,selectedCard:e,dateRange:l.dateRange});else switch(l.shadow={},e){case"rating":l.currentGraphJSON=l.rating.line,l.shadow.rating=8;break;case"art":l.currentGraphJSON=l.responseTime.line,l.shadow.art=8;break;case"asp":l.currentGraphJSON=l.averageSuccessPercenatge.line,l.shadow.asp=8;break;case"tuv":l.currentGraphJSON=l.users.line,l.shadow.tuv=8}}var l=this;l.$onChanges=o,l.$onInit=function(){l.forDashboard||(l.dateSelectorInstance=n.createInstance(a,r)),l.dateRange=l.dateRange||"month"},l.changeGraph=s,l.setDateRange=r}e.component("reportCardComponent",{templateUrl:"resources/app/components/reportCardComponent/reportCardComponent.html",controller:t,controllerAs:"vm",bindings:{serviceid:"<",appid:"<",startDate:"<",endDate:"<",forDashboard:"<",selectedCard:"@",dateRange:"@"}}),t.$inject=["$localStorage","reportingService","dateRangeSelectorService","$scope","$state"]}(angular.module("selfcare")),function(e){function t(e,t,n,a){var i=this;i.requestChange=function(e,a,o){t.showComponent({component:"requestComponent",clickOutsideToClose:!1,bindings:{name:e,initValue:a,maxLength:o,Subject:'Request for change of "'+e+'" for "'+i.app.appname+'" (App Id: '+i.appid+")",onRequest:function(e){return n.requestChange(e)}}}).then(t.requestSuccessful)},i.editHelpline=function(){t.showComponent({component:"promptComponent",clickOutsideToClose:!1,bindings:{title:i.app.appname+" Helpline",ok:"Save",cancel:"Cancel",initialValue:i.app.contact,name:"Helpline Number",pattern:envVars.mutipleHelplinePattern,helpText:"You can enter comma separated numbers",required:!0,dontSaveIfSame:!0,onSubmit:function(e){return n.saveAppDetails(i.appid,e,"helpline")}}}).then(function(e){i.app.contact=e,a.freeText("Helpline numbers have been successfully updated.")})},i.editEmail=function(){t.showComponent({component:"promptComponent",clickOutsideToClose:!1,bindings:{title:i.app.appname+" Email",ok:"Save",cancel:"Cancel",initialValue:i.app.email,name:"Email",pattern:envVars.emailPattern,required:!0,dontSaveIfSame:!0,onSubmit:function(e){return n.saveAppDetails(i.appid,e,"email")}}}).then(function(e){i.app.email=e,a.freeText("Email has been successfully updated.")})},i.editWorkingHours=function(){t.showComponent({component:"workingHoursComponent",clickOutsideToClose:!1,bindings:{onSubmit:function(e){var t=n.saveWorkingHours(i.appid,e);return t.then(function(e){i.app.workinghours=e,a.freeText("Working hours have been successfully updated.")}),t}}})},i.editWebsite=function(){t.showComponent({component:"promptComponent",clickOutsideToClose:!1,bindings:{title:i.app.appname+" Website",ok:"Save",cancel:"Cancel",initialValue:i.app.url,name:"Website",type:"url",required:!0,dontSaveIfSame:!0,onSubmit:function(e){return n.saveAppDetails(i.appid,e,"website")}}}).then(function(e){i.app.url=e,a.freeText("Website has been successfully updated.")})},i.editLatLong=function(){t.showComponent({component:"latLongComponent",clickOutsideToClose:!1,bindings:{lat:i.app.lat,long:i.app.lon,onSubmit:function(e,t){return n.saveAppDetails(i.appid,{lat:e,long:t},"latlong")}}}).then(function(e){i.app.lat=e.lat,i.app.lon=e.long,i.app.latlong=i.app.lat+", "+i.app.lon,a.freeText("Co-ordinates have been successfully updated.")})},i.editLogo=function(){t.showComponent({component:"logoChangeComponent",clickOutsideToClose:!1,bindings:{app:i.app,onSubmit:function(e){var t=n.saveAppLogo(i.appid,e);return t.then(function(e){i.app.image=e.logoUrl,a.freeText("Logo has been successfully updated.")}),t}}})},i.$onInit=function(){i.app=e.userApps[i.appid],i.app.liveDate=i.app.creationdate}}e.component("appProfileComponent",{templateUrl:"resources/app/components/appProfileComponent/appProfileComponent.html",controller:t,controllerAs:"vm",bindings:{appid:"<"}}),t.$inject=["$localStorage","customDialogService","appServiceProfileService","customToastService"]}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.activeDeactivate=function(){a.app?a.promise=t.onOffApp({status:a.app.status,appId:a.app.appid}).then(function(e){"active"==e?n.freeText("Application ("+a.app.appname+") has been successfully activated"):n.freeText("Application ("+a.app.appname+") has been successfully deactivated")}):a.promise=t.onOffService({status:a.service.status,serviceId:a.service.serviceid}).then(function(e){"active"==e?n.freeText("Service ("+a.service.servicename+") has been successfully activated"):n.freeText("Service ("+a.service.servicename+") has been successfully deactivated")})},a.$onInit=function(){a.serviceid?a.service=e.userServices[a.serviceid]:a.app=e.userApps[a.appid]}}e.component("appServiceOnOffComponent",{templateUrl:"resources/app/components/appServiceOnOffComponent/appServiceOnOffComponent.html",controller:t,controllerAs:"vm",bindings:{appid:"<",serviceid:"<"}}),t.$inject=["$localStorage","appServiceProfileService","customToastService"]}(angular.module("selfcare")),function(e){function t(e,t){var n=this;n.wh={},n.cancelAction=function(){t.cancel()},n.submitAction=function(){var e=_.cloneDeep(n.wh);e.startTime=moment(e.startTime,"HH:mm"),e.endTime=moment(e.endTime,"HH:mm"),n.submitPromise=n.onSubmit()(e).then(function(){t.hide()})},n.validateEndDay=function(){n.whForm.endDay.$setValidity("sameDay",n.wh.startDay!=n.wh.endDay)},n.days=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],n.$onInit=function(){n.wh.startDay=n.startDay,n.wh.endDay=n.endDay,n.wh.startTime=n.startTime&&moment(n.startTime).format("HH:mm"),n.wh.endTime=n.endTime&&moment(n.endTime).format("HH:mm"),n.timePattern=envVars.timePattern,n.ok=n.ok||"Save",n.title=n.title||"Edit Working Hours"}}e.component("workingHoursComponent",{templateUrl:"resources/app/components/appProfileComponent/workingHoursComponent/workingHoursComponent.html",controller:t,controllerAs:"vm",bindings:{startDay:"<",endDay:"<",startTime:"<",endTime:"<",title:"<",ok:"<",onSubmit:"&"}}),t.$inject=["$localStorage","$mdDialog"]}(angular.module("selfcare")),function(e){function t(e,t,n){function a(){i.imageWidth=180,i.imageHeight=180,i.allowedFileExtns=["png","jpg","jpeg"],i.maxFileSize=10}var i=this;i.cancelAction=function(){t.cancel()},i.submitAction=function(){i.submitPromise=i.onSubmit()(i.logo).then(function(){t.hide()})},i.downloadLogo=function(){i.downloadPromise=n.downloadFileFromURL(i.app.image),i.downloadPromise.then(function(){i.showUploader=!0})},i.validateImage=function(){var e=n.checkFileExtentions(i.logo,i.allowedFileExtns);i.logoChangeForm.logo.$setValidity("notImage",e),e&&(n.checkImageDimensionsAsync(i.logo,i.imageHeight,i.imageWidth).then(function(e){i.logoChangeForm.logo.$setValidity("dimensions",e)}),i.logoChangeForm.logo.$setValidity("size",i.logo.size<=1024*i.maxFileSize))},i.$onInit=function(){a()}}e.component("logoChangeComponent",{templateUrl:"resources/app/components/appProfileComponent/logoChangeComponent/logoChangeComponent.html",controller:t,controllerAs:"vm",bindings:{onSubmit:"&",app:"<"}}),t.$inject=["$localStorage","$mdDialog","helperService"]}(angular.module("selfcare")),function(e){function t(e,t){var n=this;n.cancelAction=function(){t.cancel()},n.submitAction=function(){n.submitPromise=n.onSubmit()(n.lat,n.long),n.submitPromise.then(function(){t.hide({lat:n.lat,long:n.long})})},n.$onInit=function(){n.lat=n.latInit,n.long=n.longInit}}e.component("latLongComponent",{templateUrl:"resources/app/components/appProfileComponent/latLongComponent/latLongComponent.html",controller:t,controllerAs:"vm",bindings:{latInit:"<lat",longInit:"<long",onSubmit:"&"}}),t.$inject=["$localStorage","$mdDialog"]}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.requestChange=function(e,i,o){n.showComponent({component:"requestComponent",clickOutsideToClose:!1,bindings:{name:e,initValue:i,maxLength:o,Subject:'Request for change of "'+e+'" for "'+a.service.servicename+'" (Service Id: '+a.serviceid+")",onRequest:function(e){return t.requestChange(e)}}}).then(n.requestSuccessful)},a.$onInit=function(){a.service=e.userServices[a.serviceid],a.service.liveDate=a.service.cdate}}e.component("serviceProfileComponent",{templateUrl:"resources/app/components/serviceProfileComponent/serviceProfileComponent.html",controller:t,controllerAs:"vm",bindings:{serviceid:"<"}}),t.$inject=["$localStorage","appServiceProfileService","customDialogService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i){var o=this;o.editMobileNumber=function(){n.showComponent({component:"mobEmailEditComponent",clickOutsideToClose:!0,bindings:{}}).then(function(t){e.userInfo.mno=t,o.mno=t,a.freeText("Mobile Number has been successfully updated.")})},o.editSignature=function(t){n.showComponent({component:"promptComponent",bindings:{title:"Signature",ok:"Save",cancel:"Cancel",initialValue:o.signature,name:"Signature",dontSaveIfSame:!0,multiline:!0,maxLength:100,onSubmit:function(e){return i.updateSign(e)}}}).then(function(t){o.signature=t,e.userInfo.signature=t,a.freeText("Signature has been successfully updated.")})},o.changePassword=function(){n.showComponent({component:"changePasswordComponent",clickOutsideToClose:!0}).then(function(e){a.freeText("Password successfully changed.")})},o.$onInit=function(){o.mno=e.userInfo.mno,o.userId=e.userInfo.userId,o.signature=e.userInfo.signature,o.userApps=_.map(e.userApps),o.isGuest="guest"==e.userRole.logicalName.toLowerCase()}}e.component("profileDetailsComponent",{templateUrl:"resources/app/components/profileDetailsComponent/profileDetailsComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","$mdDialog","customDialogService","customToastService","usersService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o,r){function s(){switch(p.sortType){case"aToZ":p.allRightCategoryWise=_.each(p.allRightCategoryWise,function(e){e.rolerights=_.orderBy(e.rolerights,"displayRightName",["asc"])});break;case"zToA":p.allRightCategoryWise=_.each(p.allRightCategoryWise,function(e){e.rolerights=_.orderBy(e.rolerights,"displayRightName",["desc"])})}}function l(){n.setroleIdsaveAs(h)}function c(){n.ids(f)}function d(e){v=e.rights.rolerights;var t=_.uniq(e.rights.previousRolerights),n=_.uniq(_.map(t,"rightId")),a=e.rights.rolerights,i=_.uniq(_.map(a,"rightId")),o=_.difference(i,n),r=_.map(o,function(e){return{rightId:e}});p.Newlyadded=_.intersectionBy(a,r,"rightId");var s=_.difference(n,i),l=_.map(s,function(e){return{rightId:e}});p.Revokeunique=_.intersectionBy(t,l,"rightId"),u=e.rights.rolerights.length,p.Newlyadded&&p.Newlyadded.length>0&&($("#NewlyAdded").show(),$("#all").show()),p.Revokeunique&&p.Revokeunique.length>0&&($("#Revoke").show(),$("#all").show()),p.roleName=p.role.roleName;var c;_.forEach(p.allRightCategoryWise,function(t){c=_.markSelectedBy(t.rolerights,_.map(e.rights.rolerights,"rightId"),"rightId")})}function m(){var e=_(p.allRightCategoryWise).map("rolerights").flatten().filter({selected:!0}).value();_.filter(e,"selected").length;return e.length?y.length!=e.length||(o.freeText("You cannot select all rights, please select atleast one less right.",void 0,!0),!1):(o.freeText("Please select atleast one Right",void 0,!0),!1)}var p=this;p.cancel=function(){a.cancel()},p.createRole=function(){g=_(p.allRightCategoryWise).map("rolerights").flatten().filter({selected:!0}).value(),m()&&(p.createRolePromise=n.createRole({roleName:p.roleName,rights:_.filter(g,"selected")}).then(function(e){var t=a.confirm().title("Role Created").htmlContent("<b>"+p.roleName+"</b> role has been created. What would you like to do next?").ok("Create New User").cancel("Create another Role");a.show(t).then(function(){i.go("selfcare.users.create")}).catch(function(){i.reload("selfcare.roles.create")})}))},p.saveEditedRole=function(){var e=_(p.allRightCategoryWise).map("rolerights").flatten().filter({selected:!0}).value();m()&&(p.saveRolePromise=n.saveRole({roleId:p.role.roleId,roleName:p.roleName,rights:_.filter(e,"selected")}).then(function(){return a.hide(p.roleName)}))},p.selectUnselectAll=function(e){_.each(g,function(t){t.selected=e})},p.sortApps=s,p.saveas1111=function(){r.showComponent({component:"createRoleComponentSaveAs",clickOutsideToClose:!0,bindings:{dialogMode:!0}})},p.saveAs=function(e){(f=_(p.allRightCategoryWise).map("rolerights").flatten().filter({selected:!0}).value()).length===u?$("#saveAsbtn").hide():$("#saveAsbtn").show(),h=p.role.roleId,c(),l()},p.setid=c,p.setroleId=l;var u,g,v,f={},h={},b=[],y=[];p.$onInit=function(){p.allRights=_(t.userRights).filter(function(e){return!e.temp}).value(),p.allRights=_.cloneDeep(p.allRights),$("#NewlyAdded").hide(),$("#Revoke").hide(),$("#all").hide(),$("#saveAsbtn").hide(),n.getRolesByCateogry().then(function(e){p.categoryWiseRole=e;var n=[];_.forEach(p.allRights,function(e){var t=p.categoryWiseRole.find(function(t){return t.rightName===e.rightName});if(angular.isDefined(t)){var a={};a.roleArray=e,a.rolename=t.name,n.push(a)}});var a={};_.forEach(n,function(e){(a={}).rolerights=[],a.roleheader="";var t=!1;_.forEach(b,function(n){if(n.roleheader==e.rolename)return n.rolerights.push(e.roleArray),t=!0,!1}),t||(a.roleheader=e.rolename,a.rolerights.push(e.roleArray),b.push(a))}),t.suballRightCategoryWise=b,p.allRightCategoryWise=t.suballRightCategoryWise,console.log(p.allRightCategoryWise),p.allRightCategoryWise.map(function(e){return e.rolerights}).reduce(function(e,t){return t.reduce(function(e,t){y.push(t.displayRightName)},{}),y.length},{}),s(),p.role&&d(p.role)})}}e.component("createRoleComponent",{templateUrl:"resources/app/components/roleComponents/createRoleComponent/createRoleComponent.html",controller:t,controllerAs:"vm",bindings:{role:"<",dialogMode:"<"}});t.$inject=["$scope","$localStorage","rolesRightsService","$mdDialog","$state","customToastService","customDialogService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o){var r=this;r.saveAs=function(){var e=t.getIds(),n=t.getroleids();_.filter(e,"selected");r.saveRolePromise=t.createRole({roleId:n,roleName:r.roleName,rights:e}).then(function(e){var t=i.confirm().title("Role Created").htmlContent("<b>"+r.roleName+"</b> role has been created. What would you like to do next?").ok("Create New User").cancel("Create another Role");i.show(t).then(function(){o.go("selfcare.users.create")}).catch(function(){o.reload("selfcare.roles.edit")})})},r.$onInit=function(){r.rolesPromise=t.getMyRoles().then(function(e){r.allRoles=e})}}e.component("createRoleComponentSaveAs",{templateUrl:"resources/app/components/roleComponents/createRoleComponentSaveAs.html",controller:t,controllerAs:"vm",bindings:{role:"<"}}),t.$inject=["$localStorage","rolesRightsService","customDialogService","customToastService","$mdDialog","$state"]}(angular.module("selfcare")),function(e){function t(e,t,n,a){function i(){switch(o.sortType||(o.sortType="latestFirst"),o.sortType){case"latestFirst":o.allRoles=_(o.allRoles).orderBy(function(e){return moment(e.creationDate,"DD/MM/YYYY hh:mm").valueOf()},["desc"]).value();break;case"oldestFirst":o.allRoles=_(o.allRoles).orderBy(function(e){return moment(e.creationDate,"DD/MM/YYYY hh:mm").valueOf()},["asc"]).value()}}var o=this;o.getAndEditRole=function(e){e.getRolePromise=t.getRoleDetails(e.roleId).then(function(t){n.showComponent({component:"createRoleComponent",clickOutsideToClose:!1,bindings:{role:{roleName:e.roleName,roleId:e.roleId,rights:t},dialogMode:!0}}).then(function(t){e.roleName=t,a.freeText("Changes to role have been successfully made!")})})},o.sortApps=i,o.$onInit=function(){o.rolesPromise=t.getMyRoles().then(function(e){o.allRoles=e,o.allRoles.length<=0&&$("#roletable2").hide()}).then(function(){i()})}}e.component("editRoleComponent",{templateUrl:"resources/app/components/roleComponents/editRoleComponent/editRoleComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","rolesRightsService","customDialogService","customToastService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o,r){function s(){m=d.stateRadio,d.userData.selectedApps=[],d.allApps=_(t.userApps).filter({state:d.userData.state}).map(_.trimAppDetails).value(),"99"!=d.userData.state&&d.isSuperAdmin?(_.pull(d.roles,d.stateAdminDummyRole),d.roles.push(d.stateAdminDummyRole)):(_.pull(d.roles,d.stateAdminDummyRole),d.userData.role==d.stateAdminDummyRole&&delete d.userData.role)}function l(){d.sortType||(d.sortType="aToZ",d.roles=_(d.roles).orderBy(function(e){return _.toLower(e.roleName)},["asc"]).value())}function c(){return r.fetchStates().then(function(e){e=_.intersectionWith(e,_.map(t.userApps),function(e,t){return e.stateid==t.state}),d.allStates=e})}var d=this;d.userData={},d.roles=[],d.stateAdminDummyRole={roleName:"State Admin",roleId:"0"},d.fetchedRolesOnce=!1,d.getRoles=function(){if(!d.fetchedRolesOnce)return n.getMyRoles().then(function(t){if(d.fetchedRolesOnce=!0,t.length)d.roles=d.roles.concat(t);else{e.hide();var n=a.confirm({title:"No Roles Available!",textContent:"You need to create a role first to create a user.",ok:"Go to Create Roles",cancel:"Close",clickOutsideToClose:!1});a.show(n).then(function(){i.go("selfcare.roles.create")})}}).then(function(){l()})},d.createUser=function(){d.userData.state="all"==m?"32,23,4,29,3,9,5,13,30,18,10,20,8,33,34,28,25,21,22,2,24,16,7,11,1,12,31,37,27,19,36,14,35,15,26,99":"state"==m?d.userData.state:"99",d.createUserPromise=o.createUser(d.userData).then(function(e){var t=a.alert({title:"Successful!",textContent:"User has been created. Password for user has been sent to email and SMS.",ok:"OK",clickOutsideToClose:!0});a.show(t).then(function(){i.reload("selfcare.users")})})},d.fetchStates=c,d.filterAndLoadApps=s,d.onAppDropdownOpen=function(){d.userData.selectedApps.length<=0&&(d.allApps=_(t.userApps).map(_.trimAppDetails).value())},d.sortright=l;var m;d.$onInit=function(){d.isSuperAdmin="superadmin"==t.userRole.logicalName.toLowerCase(),console.log(JSON.stringify(t.userInfo.statecentral)),t.userInfo.statecentral.length>3&&t.userInfo.statecentral.match(/99/g)&&(d.stateName="All",d.stateRadio="all"),d.isSuperAdmin?d.userData.state="99":d.userData.state=t.userInfo.statecentral,d.isSuperAdmin&&(d.stateRadio="all"),d.emailPattern=envVars.emailPattern,d.mobilePattern=envVars.mobilePattern,s(),c()}}e.component("createUserComponent",{templateUrl:"resources/app/components/userComponents/createUserComponent/createUserComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$mdSelect","$localStorage","rolesRightsService","$mdDialog","$state","usersService","commonDataService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i){function o(){switch(s.sortType||(s.sortType="latestFirst"),s.sortType){case"latestFirst":s.subUsers=_(s.subUsers).orderBy(function(e){return moment(e.creationDate,"DD/MM/YYYY hh:mm").valueOf()},["desc"]).value();break;case"oldestFirst":s.subUsers=_(s.subUsers).orderBy(function(e){return moment(e.creationDate,"DD/MM/YYYY hh:mm").valueOf()},["asc"]).value();break;case"aToZ":s.subUsers=_(s.subUsers).orderBy(function(e){return _.toLower(e.applicationName)},["asc"]).value();break;case"zToA":s.subUsers=_(s.subUsers).orderBy(function(e){return _.toLower(e.applicationName)},["desc"]).value();break;case"zToA":s.subUsers=_(s.subUsers).orderBy(function(e){return _.toLower(e.userid)},["desc"]).value();break;case"aToZ":s.subUsers=_(s.subUsers).orderBy(function(e){return _.toLower(e.userid)},["asc"]).value()}}function r(){s.getSubUsersPromise=n.getSubUsers(s.filters&&s.filters.payload).then(function(t){s.subUsers=t,s.subUsers<=0&&$("#table").hide(),s.forTree&&s.subUsers.unshift({userId:e.userInfo.userId,creationDate:e.userInfo.cdate,applicationName:"NA"})}).then(function(){o()})}var s=this,l=!0;s.editUser=function(t){t.getUserPromise=n.getSubUserDetails(t.userId).then(function(t){e.detailedUser=t,a.showComponent({component:"viewAndEditUserComponent",bindings:{user:t,forDialog:!0},clickOutsideToClose:!1}).then(function(){i.freeText("User Details have been successfully updated.")})})},s.filterUsers=function(){a.showComponent({component:"filterUsersComponent",bindings:{filters:_.cloneDeep(s.filters)},clickOutsideToClose:!0}).then(function(e){s.filters=e,r()})},s.clearFilters=function(){delete s.filters,r()},s.viewTree=function(e){e.getTreePromise=t.fetchUserTree(e.userId,l).then(function(e){l=!1,a.showComponent({component:"userTreeComponent",bindings:{tree:e},closeButton:!0})})},s.sortApps=o,s.$onInit=function(){r(),$("#table").show()}}e.component("editUsersComponent",{templateUrl:"resources/app/components/userComponents/editUsersComponent/editUsersComponent.html",controller:t,controllerAs:"vm",bindings:{forTree:"<"}}),t.$inject=["$localStorage","userTreeService","usersService","customDialogService","customToastService"]}(angular.module("selfcare")),function(e){function t(e){this.$onInit=function(){}}e.component("userTreeComponent",{templateUrl:"resources/app/components/userComponents/userTreeComponent/userTreeComponent.html",controller:t,controllerAs:"vm",bindings:{tree:"<"}}),t.$inject=["$localStorage"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o,r){function s(){g.Apps=e.detailedUser;var t=_.map(g.Apps,function(e){return{departmentId:e.departmentId}});g.selectedApps1=_.intersectionBy(g.Apps,t,"departmentId")}function l(){if(!g.allStates)return o.fetchStates().then(function(t){e.Allstates=t,g.allStates=e.Allstates;var n=_.map(g.state.split(","),function(e){return{stateid:e}});g.state=_.intersectionBy(t,n,"stateid")})}function c(){g.fetchCategoriesPromise=r.fetchCategories().then(function(t){e.Allcategories=t,g.catagories=e.Allcategories;var n=_.map(g.catagory,function(e){return{categoryId:e}});g.catagory=_.intersectionBy(t,n,"categoryId")})}function d(t){var a,i=[];angular.forEach(g.catagory,function(e,t){i.push(e.categoryId)}),a=i.toString();var o,r=[];angular.forEach(g.state,function(e,t){r.push(e.stateid)}),o=r.toString(),o="all"==g.stateRadio?f:"central"==g.stateRadio?"99":o,g.fetchdeptbasedstate=n.fetchdeptbasedstate(o,a).then(function(t){g.Apps=t,g.state||(g.allApps=_(e.userApps).filter({state:g.state}).map(_.trimAppDetails).value(),g.Apps=_.filter(g.allApps,function(e){return _.includes(g.user.appids,e.appid)}));var n=_.map(g.Apps,function(e){return{departmentId:e.departmentId}});g.selectedApps1=_.intersectionBy(g.Apps,n,"departmentId")})}function m(){g.allApps=_(e.userApps).filter({state:g.state}).map(_.trimAppDetails).value(),g.selectedApps1=_.filter(g.allApps,function(e){return _.includes(g.user.appids,e.appid)})}function p(e){return a.getMyRoles().then(function(e){g.roles=e})}function u(){p().then(function(){g.selectedRoles=_.find(g.roles,{roleId:g.user[0].roleId})})}var g=this;g.saveUser=function(){var e,a=[];angular.forEach(g.state,function(e,t){a.push(e.stateid)}),e=a.toString(),e="all"==g.stateRadio?f:"central"==g.stateRadio?"99":e;var i={userId:g.user[0].userId,status:g.user[0].status};g.savingUserPromise=n.saveUserStatus(i).then(function(e){var t={userId:g.user[0].userId,selectedApps:_.map(g.selectedApps1,"departmentId").toString()};return n.saveUserApps(t)}).then(function(){var t={userId:g.user[0].userId,roleId:g.user[0].roleId,state:e};return n.saveUserRole(t)}).then(function(){t.hide()}).then(function(){var e={userId:g.user[0].userId,roleId:g.selectedRoles.roleId,lang:"en"};return n.changeUserRole(e)}).then(function(){t.hide()})},g.cancel=function(){t.cancel()},g.fetchStates=l,g.stateChange123=function(){confirm("Are you sure you want to change the nature? All the scheduled campaign/banner/notification will remain unaffected.")||(g.user.stateName=v,g.stateRadio=v),g.catagory="",g.selectedApps1=""},g.onAppsDDOpen1=d,g.fetchStatewithcntrl=function(){g.allStates=[{stateid:"all",statename:"All"}]},g.fetchcatagory=c,g.RoleChange=function(e){var t=g.user[0].roleId;confirm("Are you sure you want to change the role(s)? All the scheduled campaign/banner/notification will remain unaffected.")||(g.selectedRoles=t,p().then(function(){g.selectedRoles=_.find(g.roles,{roleId:g.user[0].roleId})}))},g.getStates=function(){g.allStates=e.Allstates},g.fetchcatagorynew=function(){g.catagories=e.Allcategories,d()},g.catagoryChange=function(){d()};var v="";g.beforeon=s,g.$onInit=function(){g.isSuperAdmin="superadmin"==e.userRole.logicalName.toLowerCase(),e.userInfo.statecentral.length>3&&e.userInfo.statecentral.match(/99/g)?g.stateName1="All":99==e.userInfo.statecentral?g.stateName1="Center":g.stateName1="State",g.state=g.user[0].stateCentral,g.catagory=g.user.catIds,g.selectedApps1="","null"==g.user[0].organizationName||void 0==g.user[0].organizationName?g.user.organizationName="NA":g.user.organizationName=g.user[0].organizationName,g.user[0].stateCentral.length>3&&g.user[0].stateCentral.match(/99/g)?(g.user.stateName="All",g.stateRadio="all"):99==g.user[0].stateCentral?(g.user.stateName="Center",g.stateRadio="central"):(g.user.stateName="State",g.stateRadio="state"),v=g.stateRadio,o.getStateName(g.state).then(function(e){g.user.stateName=e}),"guest"==g.user[0].roleLogicalName.toLowerCase()&&(g.isRoleEditable=!0,g.stateRadio="99"==g.state?"central":"state","state"==g.stateRadio&&l(),p()),u(),m(),l(),c(),s()};var f="32,23,4,29,3,9,5,13,30,18,10,20,8,33,34,28,25,21,22,2,24,16,7,11,1,12,31,37,27,19,36,14,35,15,26,99"}e.component("viewAndEditUserComponent",{templateUrl:"resources/app/components/userComponents/viewAndEditUserComponent/viewAndEditUserComponent.html",controller:t,controllerAs:"vm",bindings:{user:"<",forDialog:"<"}}),t.$inject=["$localStorage","$mdDialog","usersService","rolesRightsService","$q","commonDataService","categoriesService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o){function r(){return o.fetchStates().then(function(e){d.allStates=e})}function s(){d.filters.master.allApps||(d.filters.master.allApps=_.map(e.userApps))}function l(){"central"==d.filters.selected.stateRadio&&(d.filters.selected.state={stateid:"99"}),"all"==d.filters.selected.stateRadio&&(d.filters.selected.state=null)}function c(){return!_.isEqual(d.filters.selected,{})}var d=this;d.cancel=function(){t.cancel()},d.reset=function(){d.filters.selected={},d.filters.selected.stateRadio="all",l()},d.submit=function(){d.filters.payload={},_.attempt(function(){return d.filters.payload.appIds=_(d.filters.selected.apps).map("appid").join(",")}),_.attempt(function(){return d.filters.payload.roleIds=_(d.filters.selected.roles).map("roleId").join(",")}),_.attempt(function(){return d.filters.payload.categoryIds=_(d.filters.selected.categories).map("categoryId").join(",")}),_.attempt(function(){return d.filters.payload.state=d.filters.selected.state.stateid}),_.attempt(function(){return d.filters.payload.status=d.filters.selected.status}),_.attempt(function(){return d.filters.payload.startDate=d.filters.selected.startDate}),_.attempt(function(){return d.filters.payload.endDate=d.filters.selected.endDate}),_.each(d.filters.payload,function(e,t){e||delete d.filters.payload[t]}),d.filters.payload=c()?d.filters.payload:void 0,t.hide(d.filters)},d.getRoles=function(){if(!d.filters.master.allRoles)return a.getMyRoles().then(function(e){d.filters.master.allRoles=e})},d.getCategories=function(){if(!d.filters.master.allCategories)return i.fetchCategories().then(function(e){d.filters.master.allCategories=e})},d.isFormFilled=c,d.stateCentralChange=l,d.fetchStates=r,d.$onInit=function(){d.filters=d.filters||{master:{},selected:{}},d.isSuperAdmin="superadmin"==e.userRole.logicalName.toLowerCase(),d.filters.selected.stateRadio=d.filters.selected.stateRadio||"all",l(),s(),r()}}e.component("filterUsersComponent",{templateUrl:"resources/app/components/userComponents/filterUsersComponent/filterUsersComponent.html",controller:t,controllerAs:"vm",bindings:{filters:"<"}}),t.$inject=["$localStorage","$mdDialog","usersService","rolesRightsService","categoriesService","commonDataService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o){function r(){if(!s.state)return s.activeBanners=null,s.inactiveBanners=null,void(s.requestedBanners=null);s.getAllBannersPromise=t.getAllBanners(s.state),s.getAllBannersPromise.then(function(e){s.activeBanners=e.active,s.inactiveBanners=e.inactive,s.requestedBanners=e.requested})}var s=this;s.rejectBanner=function(e){a.showComponent({component:"promptComponent",bindings:{title:"Rejection Comment",required:!0,name:"Comment",ok:"Reject",cancel:"Cancel",onSubmit:function(n){var a=t.rejectBanner(e.bannerId,n);return a.then(function(){_.pull(s.requestedBanners,e),i.freeText("Banner has been rejected!")}),a}}})},s.changePriority=function(e,n){var a=s.activeBanners[e].bannerId,i=s.activeBanners[n].bannerId,o=t.swapPriorities(a,i).then(function(){_.swap(s.activeBanners,e,n)});e>n?s.activeBanners[e].moveUpPromise=o:s.activeBanners[e].moveDownPromise=o},s.viewUploaderComment=function(e){n.show(n.alert().title("Uploader's Comment").textContent(e.comments).ok("Close"))},s.removeFromActive=function(e){e.removePromise=t.removeFromActive(e.bannerId).then(function(){_.pull(s.activeBanners,e),s.inactiveBanners.unshift(e)})},s.viewDetails=function(e){e.viewDetailsPromise=t.getAllLangBanners(e.bannerId),e.viewDetailsPromise.then(function(e){a.showComponent({component:"viewAllLangBannersComponent",bindings:{banners:e},closeButton:!0})})},s.fetchStates=function(){if(!s.allStates)return o.fetchStates().then(function(e){s.allStates=e})},s.addToActive=function(e){e.addingPromise=t.addToActive(e.bannerId).then(function(){_.pull(s.inactiveBanners,e),_.pull(s.requestedBanners,e),s.activeBanners.push(e)})},s.getAllBanners=r,s.$onInit=function(){s.isSuperAdmin="superadmin"==e.userRole.logicalName.toLowerCase(),s.state=e.userInfo.statecentral,s.stateRadio="central",s.state.length>3&&s.state.match(/99/g)?(s.stateRadio="central",s.state="99",r()):(s.state,s.stateRadio="central",s.state="99",r()),r()}}e.component("approveBannersComponent",{templateUrl:"resources/app/components/bannerComponents/approveBannersComponent/approveBannersComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","bannerService","$mdDialog","customDialogService","customToastService","commonDataService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o){function r(){t.fetchLanguages().then(function(e){c.allLanguages=_.sortBy(e,function(e){return _.toLower(e.language)}),c.selectedLanguage=_.find(c.allLanguages,{id:"en"}),s()})}function s(){c.bannerLanguages.push(c.selectedLanguage),_.pull(c.allLanguages,c.selectedLanguage),c.selectedLanguage=null}function l(){c.imageWidth=1600,c.imageHeight=398,c.allowedFileExtns=["png","jpg","jpeg"],c.maxFileSize=300}var c=this;c.bannerLanguages=[],c.attachAnotherBanner=s,c.validateImage=function(e,t){var n=o.checkFileExtentions(e,c.allowedFileExtns);t.$setValidity("notImage",n),n&&(o.checkImageDimensionsAsync(e,c.imageHeight,c.imageWidth).then(function(e){t.$setValidity("dimensions",e)}),t.$setValidity("size",e.size<=1024*c.maxFileSize))},c.uploadnRequest=function(){var o=null;if("service"==c.actionType){var r=e.userApps[c.redirectApp.appid];o=r.umangUrl+"|"+r.appname+"|"+r.appid}c.uploadPromise=t.fetchLanguages().then(function(e){var t={stateId:c.state,bannerName:c.bannerName,comment:c.comment,actionType:"noAction"==c.actionType?"":c.actionType,actionUrl:o||c.redirectUrl,source:"app"},a=_.find(c.bannerLanguages,{id:"en"}).langBanner.name;return _.each(e,function(e){var n=_.find(c.bannerLanguages,{id:e.id})||{langBanner:new File([],a)};t[e.id]=n.langBanner}),n.uploadBanners(t)}),c.uploadPromise.then(function(){i.freeText("Your banners have been successfully uploaded and requested.","View my banners").then(function(e){e&&a.go("selfcare.banners.view")}),a.reload("selfcare.banners.upload")})},c.urlPattern=envVars.urlPattern,c.fetchLanguages=r,c.fetchStates=function(){if(!c.allStates)return t.fetchStates().then(function(e){c.allStates=e})},c.allApps=_.map(e.userApps,_.trimAppDetails),c.actionType="noAction",c.$onInit=function(){c.isSuperAdmin="superadmin"==e.userRole.logicalName.toLowerCase(),c.stateRadio="central",c.state=c.isSuperAdmin?"99":e.userInfo.statecentral,c.state=e.userInfo.statecentral,console.log(c.state),c.state.length>3&&c.state.match(/99/g)?(console.log("if case"),c.stateRadio="all"):"99"==c.state&&(console.log("else case"),c.stateRadio="central"),r(),l()}}e.component("uploadBannerComponent",{templateUrl:"resources/app/components/bannerComponents/uploadBannerComponent/uploadBannerComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","commonDataService","bannerService","$state","customToastService","helperService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o){function r(){if(!s.state)return s.activeBanners=null,s.inactiveBanners=null,s.requestedBanners=null,void(s.rejectedBanners=null);s.getBannersPromise=t.getMyBanners(s.state).then(function(e){s.activeBanners=e.active,s.inactiveBanners=e.inactive,s.requestedBanners=e.requested,s.rejectedBanners=e.rejected})}var s=this;s.viewDetails=function(e){e.viewDetailsPromise=t.getAllLangBanners(e.bannerId),e.viewDetailsPromise.then(function(e){n.showComponent({component:"viewAllLangBannersComponent",bindings:{banners:e},closeButton:!0})})},s.deleteBanner=function(e,i){n.confirm("delete the selected banner").then(function(){i.deletePromise=t.deleteBanner(i.bannerId),i.deletePromise.then(function(){_.pull(e,i),a.freeText("Banner has been successfully deleted.")})})},s.reRequestBanner=function(e){n.showComponent({component:"promptComponent",bindings:{title:"Re-request Comment",name:"Comment",required:!0,ok:"Re-request",cancel:"Cancel",onSubmit:function(n){var i=t.reRequestBanner(e.bannerId,n);return i.then(function(){_.pull(s.inactiveBanners,e),s.requestedBanners.unshift(e),a.freeText("Banner has been successfully re-requested!")}),i}}})},s.viewAdminCommnet=function(e){i.show(i.alert().title("Admin Comment").textContent(e.adminComments).ok("Close"))},s.fetchStates=function(){if(!s.allStates)return o.fetchStates().then(function(e){s.allStates=e})},s.getMyBanners=r,s.$onInit=function(){s.isSuperAdmin="superadmin"==e.userRole.logicalName.toLowerCase(),s.stateRadio="central",s.state=e.userInfo.statecentral,s.state.length>3&&s.state.match(/99/g)?(s.stateRadio="central",s.state="99",r()):99==s.state&&(s.stateRadio="central",s.state="99"),s.isSuperAdmin&&r()}}e.component("viewMyBannersComponent",{templateUrl:"resources/app/components/bannerComponents/viewMyBannersComponent/viewMyBannersComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","bannerService","customDialogService","customToastService","$mdDialog","commonDataService"]}(angular.module("selfcare")),function(e){function t(e,t){function n(){t.fetchLanguages().then(function(e){e=_.keyBy(e,"id"),_.each(a.banners,function(t){t.langaugeObj=e[t.lang]});var t=_.find(a.banners,{lang:"en"});_.remove(a.banners,function(e){return e.bannerURL==t.bannerURL}),a.banners.unshift(t)})}var a=this;a.$onInit=function(){n()}}e.component("viewAllLangBannersComponent",{templateUrl:"resources/app/components/bannerComponents/viewAllLangBannersComponent/viewAllLangBannersComponent.html",controller:t,controllerAs:"vm",bindings:{banners:"<"}}),t.$inject=["$localStorage","commonDataService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a){function i(){o.fetchCategoriesPromise=t.fetchCategories().then(function(e){o.allCategories=_.sortBy(e,function(e){return e.categoryName.toLowerCase()})})}var o=this;o.viewEditLinkedApps=function(e){n.showComponent({component:"viewEditCategoryComponent",bindings:{category:e},closeButton:!0})},o.requestNew=function(){n.showComponent({component:"requestComponent",clickOutsideToClose:!1,bindings:{name:"Category",initValue:"",maxLength:30,Subject:"Request for addition of New App Category on UMANG",onRequest:function(e){return a.requestChange(e)}}}).then(n.requestSuccessful)},o.$onInit=function(){i()}}e.component("createCategoryComponent",{templateUrl:"resources/app/components/createCategoryComponent/createCategoryComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","categoriesService","customDialogService","appServiceProfileService"]}(angular.module("selfcare")),function(e){function t(e,t,n){function a(){i.category.appIdObjs=_.map(i.category.appIds.split(","),function(e){return{appid:e}}),i.linkedApps=_(e.userApps).map().intersectionBy(i.category.appIdObjs,"appid").sortBy(function(e){return e.appname.toLowerCase()}).value(),i.unlinkedApps=_(e.userApps).map().differenceBy(i.category.appIdObjs,"appid").sortBy(function(e){return e.appname.toLowerCase()}).value()}var i=this;i.unlinkApp=function(e){n.confirm("unlink <b>"+i.category.categoryName+"</b> from <b>"+e.appname+"</b>",!0).then(function(){e.spinning=!0,t.unlinkCategory(e.appid,i.category.categoryId).then(function(){_.pull(i.linkedApps,e),_.insertSortedBy(i.unlinkedApps,e,"appname"),i.newlyAdded=e,i.category.appIds=_.map(i.linkedApps,"appid").join(",")}).finally(function(){e.spinning=!1})})},i.linkApp=function(e){n.confirm("link <b>"+i.category.categoryName+"</b> to <b>"+e.appname+"</b>",!0).then(function(){e.spinning=!0,t.linkCategory(e.appid,i.category.categoryId).then(function(){_.pull(i.unlinkedApps,e),_.insertSortedBy(i.linkedApps,e,"appname"),i.newlyAdded=e,i.category.appIds=_.map(i.linkedApps,"appid").join(",")}).finally(function(){e.spinning=!1})})},i.$onInit=function(){a()}}e.component("viewEditCategoryComponent",{templateUrl:"resources/app/components/createCategoryComponent/viewEditCategoryComponent/viewEditCategoryComponent.html",controller:t,controllerAs:"vm",bindings:{category:"<"}}),t.$inject=["$localStorage","categoriesService","customDialogService"]}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.$mdDialog=t,a.saveQueryStatus=function(){a.saveQueryPromise=n.saveQueryStatus({ticketId:a.queryData.ticket_id,status:a.selectedStatus.value,remarks:a.queryData.remarks,mno:a.queryData.user_mno}).then(function(){t.hide({newRemark:a.queryData.remarks,newStatus:a.selectedStatus.value})})},a.$onInit=function(){a.statusOptions=n.getQueryStatuses(),a.selectedStatus=_.find(a.statusOptions,{value:a.queryData.status}),a.selectedStatus||(a.selectedStatus=_.find(a.statusOptions,{value:"forward_to_department"}))}}e.component("queryViewComponent",{templateUrl:"resources/app/components/userQueryComponent/queryViewComponent/queryViewComponent.html",controller:t,controllerAs:"vm",bindings:{queryData:"<"}}),t.$inject=["$localStorage","$mdDialog","userQueryService"]}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.$mdDialog=t,a.saveQueryStatus=function(){a.saveQueryPromise=n.saveQueryStatus({ticketId:a.emailData.ticket_id,status:a.selectedStatus.value,remarks:a.emailData.remarks,email:a.emailData.efrom}).then(function(){t.hide({newRemark:a.emailData.remarks,newStatus:a.selectedStatus.value})})},a.$onInit=function(){a.statusOptions=n.getQueryStatuses(),a.selectedStatus=_.find(a.statusOptions,{value:a.emailData.status}),a.selectedStatus||(a.selectedStatus=_.find(a.statusOptions,{value:"forward_to_department"}))}}e.component("emailViewComponent",{templateUrl:"resources/app/components/userQueryComponent/emailViewComponent/emailViewComponent.html",controller:t,controllerAs:"vm",bindings:{emailData:"<"}}),t.$inject=["$localStorage","$mdDialog","userQueryService"]}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.$mdDialog=t,a.saveQueryStatus=function(){a.saveQueryPromise=n.saveQueryStatus({ticketId:a.emailData.ticket_id,status:a.selectedStatus.value,remarks:a.emailData.remarks,email:a.emailData.efrom,attachment:a.emailData.attachment}).then(function(){t.hide({newRemark:a.emailData.remarks,newStatus:a.selectedStatus.value})})},a.$onInit=function(){a.statusOptions=n.getQueryStatuses(),a.selectedStatus=_.find(a.statusOptions,{value:a.emailData.status}),a.selectedStatus||(a.selectedStatus=_.find(a.statusOptions,{value:"forward_to_department"}))}}e.component("viewattachmentcomponent",{templateUrl:"resources/app/components/userQueryComponent/emailViewComponent/viewattachmentcomponent.html",controller:t,controllerAs:"vm",bindings:{emailData:"<"}}),t.$inject=["$localStorage","$mdDialog","userQueryService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o){var r=this;r.$onDestroy=function(){i.cancel(r.intervalTimer),a.cancel(r.otpTimeout)},r.cancel=function(){n.cancel()},r.submit=function(){r.submitPromise=t.saveUserMobile(r.mno,r.otp),r.submitPromise.then(function(e){n.hide(r.mno)})},r.requestOTP=function(){r.otpPromise=t.mobOtpInitiate(r.mno,"modify"),r.otpPromise.then(function(){o.freeText("OTP successfully sent to "+r.mno),r.canRequestOTP=!1,a.cancel(r.otpTimeout),r.otpTimeout=a(function(){r.canRequestOTP=!0},6e4),r.timeLeft=60,i.cancel(r.intervalTimer),r.intervalTimer=i(function(){r.timeLeft--},1e3,60)})},r.$onInit=function(){r.mobilePattern=envVars.mobilePattern}}e.component("mobEmailEditComponent",{templateUrl:"resources/app/components/profileDetailsComponent/mobEmailEditComponent/mobEmailEditComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","usersService","$mdDialog","$timeout","$interval","customToastService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o,r,s,l){function c(){delete p.startDate,delete p.endDate,delete p.search,p.hadResults=!1,p.selectedTabIndex=p.statuses.indexOf(p.status),p.requests=null,p.requestsBackup=null,p.getRequestsPromise=a.fetchOnboardingRequests(p.status).then(function(t){l.tlen=t.length,e.$emit("onboardCountUpdate",l.tlen),p.length=t.length,p.requestsBackup=_.cloneDeep(t),p.requests=t,m()})}function d(){switch(p.sortType||(p.sortType="latestFirst"),p.sortType){case"latestFirst":p.requests=_(p.requests).orderBy(function(e){return moment(e.cdate,"DD/MM/YYYY hh:mm").valueOf()},["desc"]).value();break;case"oldestFirst":p.requests=_(p.requests).orderBy(function(e){return moment(e.cdate,"DD/MM/YYYY hh:mm").valueOf()},["asc"]).value()}}function m(){"approved"==p.status&&_.existsBy(t.userRights,"viewQuestionaire","rightName")&&n.getSubmittedUsers().then(function(e){_.map(p.requests,function(t){t.hasSubmitted=!!_.find(e,{userId:t.userId})})})}var p=this;p.viewDetails=function(t){i.showComponent({component:"viewOnboardingRequestComponent",bindings:{request:t,forDialog:!0,readOnly:"pending"!=p.status}}).then(function(){_.pull(p.requests,t),l.tlen=p.requests.length,e.$emit("onboardCountUpdate",l.tlen),$location.reload()})},p.approveRequest=function(t){i.showComponent({component:"promptComponent",bindings:{title:"Approval Comment (Optional)",ok:"Approve",cancel:"Cancel",initialValue:"Approved by NEGD",onSubmit:function(n){return a.approveRequest(t.requestId,n).then(function(){o.freeText("Request has been successfully approved!"),_.pull(p.requests,t),l.tlen=p.requests.length,e.$emit("onboardCountUpdate",l.tlen)})}}})},p.rejectRequest=function(t){i.showComponent({component:"promptComponent",bindings:{title:"Rejection Comment",ok:"Reject",cancel:"Cancel",initialValue:"Rejected by NEGD",onSubmit:function(n){return a.rejectRequest(t.requestId,n).then(function(){o.freeText("Request has been successfully rejected!"),_.pull(p.requests,t),l.tlen=p.requests.length,e.$emit("onboardCountUpdate",l.tlen)})}}})},p.editUser=function(e){e.getUserPromise=n.getSubUserDetails(e.emailId).then(function(e){i.showComponent({component:"viewAndEditUserComponent",bindings:{user:e,forDialog:!0},clickOutsideToClose:!1}).then(function(){o.freeText("User Details have been successfully updated.")})})},p.viewQuestionnaire=function(e){e.getUserQuesionnairePromise=s.getSubUserQuestionnaire(e.userId),e.getUserQuesionnairePromise.then(function(t){i.showComponent({component:"previewQuestionnaireComponent",bindings:{readOnly:!0,masterJson:t.masterJson,responseJson:t.responseJson,user:e},clickOutsideToClose:!0})})},p.filterRequests=function(e){var t=!0;return p.startDate&&(t=t&&moment(e.cdate,"DD/MM/YYYY hh:mm").isSameOrAfter(p.startDate,"day")),p.endDate&&(t=t&&moment(e.cdate,"DD/MM/YYYY hh:mm").isSameOrBefore(p.endDate,"day")),p.searchText&&(t=t&&e.organizationName.toLowerCase().includes(p.searchText.toLowerCase())),t},p.sortApps=d,p.statuses=["pending","approved","rejected"];p.icons={pending:"access_time",approved:"done_all",rejected:"close"},p.$onInit=function(){c(),d()},p.uiOnParamsChanged=function(e,t){p.status=e.status,c()}}e.component("manageRequestsComponent",{templateUrl:"resources/app/components/manageRequestsComponent/manageRequestsComponent.html",controller:t,controllerAs:"vm",bindings:{status:"<",sharedata:"&"}}),t.$inject=["$scope","$localStorage","usersService","onboardService","customDialogService","customToastService","$mdDialog","questionnaireService","$rootScope"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o,r,s){function l(){n.fetchStates().then(function(e){c.request.stateName=_.find(e,{stateid:c.request.stateCentral}).statename})}var c=this;c.cancel=function(){i.cancel()},c.approve=function(){c.approvePromise=t.approveRequest(c.request.requestId,c.request.comments).then(function(){a.freeText("Request has been successfully approved!"),i.hide()})},c.reject=function(){r.showComponent({component:"promptComponent",bindings:{title:"Rejection Comment (Optional)",ok:"Reject",cancel:"Cancel",initialValue:"Rejected by NEGD",onSubmit:function(e){return t.rejectRequest(c.request.requestId,e).then(function(){a.freeText("Request has been successfully rejected!"),i.hide()})}}})},c.editUser=function(){i.cancel(),o.go("selfcare.users.edit")},c.$onInit=function(){"99"!=c.request.stateCentral&&l()}}e.component("viewOnboardingRequestComponent",{templateUrl:"resources/app/components/manageRequestsComponent/viewOnboardingRequestComponent/viewOnboardingRequestComponent.html",controller:t,controllerAs:"vm",bindings:{request:"<",forDialog:"<",readOnly:"<"}}),t.$inject=["$localStorage","onboardService","commonDataService","customToastService","$mdDialog","$state","customDialogService","$location"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i){function o(){return r.saveFormPromise=t.saveMasterQuestionnaire(r.masterForm),r.saveFormPromise.then(function(){n.freeText("Master Questionnaire has been saved."),r.masterFormBackup=_.cloneDeep(r.masterForm)}),r.saveFormPromise}var r=this;r.saveForm=o,r.builderOptions={questionTypes:["text","textarea","radio","checkbox","priority","division","number","date","time","email","range","url"],elementTypes:["question","paragraph"]},r.$onInit=function(){r.masterFormPromise=t.getMasterQuestionnaire(),r.masterFormPromise.then(function(e){r.masterForm=e,i(function(){r.masterFormBackup=_.cloneDeep(e)})})},r.uiCanExit=function(e){if(!_.isEqual(r.masterForm,r.masterFormBackup))return a.show(a.confirm().title("Changes not saved!").textContent("Do you want to save changes to questionnaire?").ok("Yes").cancel("No")).then(function(){return o()}).catch(function(){return!0})}}e.component("buildQuestionnaireComponent",{templateUrl:"resources/app/components/questionnaireComponents/buildQuestionnaireComponent/buildQuestionnaireComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["mwFormResponseUtils","questionnaireService","customToastService","$mdDialog","$timeout"]}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.previewOptions={autoStart:!0},a.saveDraft=function(i){a.saveDraftPromise=e.saveMyQuestionnaire(a.masterForm,a.responseData,i);var o="You draft has been successfully saved!";return i&&(o="You Questionnaire has been successfully submitted!"),a.saveDraftPromise.then(function(){t.show(t.alert().title("Saved Successfully!").textContent(o).ok("Ok")).then(function(){a.isSubmitted=i,i&&n.reload("selfcare.questionnaire.fill")})}),a.saveDraftPromise},a.$onInit=function(){a.masterFormPromise=e.getMyQuestionnaire(),a.masterFormPromise.then(function(e){a.masterForm=e.masterJson,a.responseData=e.responseJson,a.isSubmitted=e.isSubmitted,_.isEqual(a.masterForm,{})||(a.isForm=!0)})}}e.component("fillQuestionnaireComponent",{templateUrl:"resources/app/components/questionnaireComponents/fillQuestionnaireComponent/fillQuestionnaireComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["questionnaireService","$mdDialog","$state"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o){function r(){s.masterFormPromise=e.getMasterQuestionnaire(),s.masterFormPromise.then(function(e){s.masterJson=e,s.responseJson={},_.isEqual(e,{})||(s.isForm=!0)})}var s=this;s.cancel=function(){t.cancel()},s.exportQuestionnaire=function(){var e=i.getResponseSheet(s.masterJson,s.responseJson,!0),t=new jsPDF,n=!0,a=0;t.setFontType("bold"),t.text(63,20,"UMANG Onboarding Questionnare"),t.setFontSize(14),t.setFontType("normal"),t.text(55,30,"Submitted By: "+s.user.organizationName+" ("+s.user.userId+")"),_.times(e[0].length,function(){var i=t.internal.pageSize.height-20,o=20*(a+1)+(n?30:0);o>=i&&(t.addPage(),o=20*(1+(a=0))+((n=!1)?30:0)),t.setFontType("bold"),t.text(20,o,e[0][a]),i=t.internal.pageSize.height-20,(o=20*(a+1)+(n?40:10))>=i&&(t.addPage(),o=20*(1+(a=0))+((n=!1)?40:10)),t.setFontType("normal"),t.text(30,o,e[1][a]),a++}),o.downloadFile(t.output(),"questionnaireExport.pdf")},s.previewOptions={autoStart:!0},s.saveResponse=function(){return a(function(){n.freeText("This was a dummy save to emulate how user will see the form. No Form was submitted.")},500)},s.$onInit=function(){s.masterJson?(s.masterFormPromise=a(),s.isForm=!0):r()}}e.component("previewQuestionnaireComponent",{templateUrl:"resources/app/components/questionnaireComponents/previewQuestionnaireComponent/previewQuestionnaireComponent.html",controller:t,controllerAs:"vm",bindings:{readOnly:"<",masterJson:"<",responseJson:"<",user:"<"}}),t.$inject=["questionnaireService","$mdDialog","customToastService","$timeout","mwFormResponseUtils","helperService"]}(angular.module("selfcare")),function(e){function t(e,t,n){function a(){i.getsubmittedUsersPromise=e.getSubmittedUsers().then(function(e){i.submittedUsers=e})}var i=this;i.getUserQuesionnaire=function(e){return e.getUserQuesionnairePromise=t.getSubUserQuestionnaire(e.userId),e.getUserQuesionnairePromise.then(function(t){n.showComponent({component:"previewQuestionnaireComponent",bindings:{readOnly:!0,masterJson:t.masterJson,responseJson:t.responseJson,user:e},clickOutsideToClose:!0})}),e.getUserQuesionnairePromise},i.$onInit=function(){a()}}e.component("viewQsnrSubmissionsComponent",{templateUrl:"resources/app/components/questionnaireComponents/viewQsnrSubmissionsComponent/viewQsnrSubmissionsComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["usersService","questionnaireService","customDialogService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o){function r(){switch(s.sortType||(s.sortType="latestFirst"),s.sortType){case"latestFirst":s.outboxBroadcasts=_(s.outboxBroadcasts).orderBy(function(e){return moment(e.date,"DD/MM/YYYY hh:mm").valueOf()},["desc"]).value();break;case"oldestFirst":s.outboxBroadcasts=_(s.outboxBroadcasts).orderBy(function(e){return moment(e.date,"DD/MM/YYYY hh:mm").valueOf()},["asc"]).value()}}var s=this;s.getBroadcastInbox=function(e,n){return s.inboxBroadcasts=[],s.inboxPromise=t.fetchBroadcastInbox(e,n),s.inboxPromise.then(function(e){return s.inboxBroadcasts=e.messages,e.count})},s.getBroadcastOutbox=function(e,n){return s.outboxBroadcasts=[],s.outboxPromise=t.fetchBroadcastOutbox(e,n),s.outboxPromise.then(function(e){return _.each(e.messages,function(e){e.to=e.to&&e.to.split(","),e.toSplitted=e.to&&e.to.join(", ")}),s.outboxBroadcasts=e.messages,e.count})},s.composeBroadcast=function(){s.composePromise=n.getSubUsers().then(function(e){e.length?i.showComponent({component:"composeBroadcastComponent",bindings:{subUsers:e}}).then(function(){s.outboxPaginator.goToPage(1),o.freeText("You message has been successfully sent.")}):a.show(a.alert().title("No Subusers found!").textContent("You cannot broadcast a message as you have no users under you.").ok("Ok"))})},s.sortApps=r,r()}e.component("broadcastComponent",{templateUrl:"resources/app/components/messagingComponents/broadcastComponent/broadcastComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","messagingService","usersService","$mdDialog","customDialogService","customToastService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i){var o=this;o.getCategories=function(){if(!o.allCategories)return t.fetchCategories().then(function(e){o.allCategories=e})},o.cancel=function(){i.cancel()},o.broadcast=function(){o.broadcastPromise=a.broadcastMessage({users:o.selectedUsers,categories:o.selectedCategories,apps:o.selectedApps,toSubusers:o.toSubusers,message:o.message}).then(function(){i.hide(),n.freeText("You message has been successfully sent.")})},o.$onInit=function(){o.allApps=_(e.userApps).map(_.trimAppDetails).value(),o.message=e.userInfo.signature?"\n\n"+e.userInfo.signature:""}}e.component("composeBroadcastComponent",{templateUrl:"resources/app/components/messagingComponents/composeBroadcastComponent/composeBroadcastComponent.html",controller:t,controllerAs:"vm",bindings:{subUsers:"<"}}),t.$inject=["$localStorage","categoriesService","customToastService","messagingService","$mdDialog"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i){function o(){switch(r.sortType||(r.sortType="latestFirst"),r.sortType){case"latestFirst":r.inboxMessages=_(r.inboxMessages).orderBy(function(e){return moment(e.message.date,"DD/MM/YYYY hh:mm").valueOf()},["desc"]).value();break;case"oldestFirst":r.inboxMessages=_(r.inboxMessages).orderBy(function(e){return moment(e.message.date,"DD/MM/YYYY hh:mm").valueOf()},["asc"]).value()}}var r=this;r.getInbox=function(e,n){return r.inboxMessages=[],r.inboxPromise=t.fetchDirectMsgInbox(e,n),r.inboxPromise.then(function(e){return r.inboxMessages=e.messages,e.count})},r.getOutbox=function(e,n){return r.outboxMessages=[],r.outboxPromise=t.fetchDirectMsgOutbox(e,n),r.outboxPromise.then(function(e){return r.outboxMessages=e.messages,e.count})},r.composeDirectMsg=function(){r.composePromise=i.getSubUsers().then(function(t){var i={userId:e.userInfo.puserId,isAdmin:!0};i.userId&&t.unshift(i),a.showComponent({component:"composeDirectMsgComponent",bindings:{subUsers:t}}).then(function(){r.outboxPaginator.goToPage(1),n.freeText("You message has been successfully sent.")})})},r.reply=function(i){a.showComponent({component:"promptComponent",bindings:{title:"Reply",ok:"Send",cancel:"Cancel",initialValue:e.userInfo.signature?"\n\n"+e.userInfo.signature:"",name:"Message",multiline:!0,required:!0,maxLength:400,onSubmit:function(e){return t.directMsgReply(i.uniqueId,e).then(function(){i.replyTo={text:e},r.outboxPaginator.goToPage(1),n.freeText("You message has been successfully sent.")})}}})},r.$onInit=function(){o()}}e.component("directMessageComponent",{templateUrl:"resources/app/components/messagingComponents/directMessageComponent/directMessageComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","messagingService","customToastService","customDialogService","usersService"]}(angular.module("selfcare")),function(e){function t(e,t,n){var a=this;a.cancel=function(){t.cancel()},a.send=function(){a.sendPromise=n.directMsgSend(a.selectedUser.userId,a.message).then(function(){t.hide()})},a.$onInit=function(){a.message=e.userInfo.signature?"\n\n"+e.userInfo.signature:""}}e.component("composeDirectMsgComponent",{templateUrl:"resources/app/components/messagingComponents/composeDirectMsgComponent/composeDirectMsgComponent.html",controller:t,controllerAs:"vm",bindings:{subUsers:"<"}}),t.$inject=["$localStorage","$mdDialog","messagingService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a){var i=this;i.deactivateScreen=function(){n.confirm("deactivate this screen for all dates").then(function(){i.deactivatePromise=t.scheduleScreen(null,null,i.screen.screenId).then(function(){a.freeText("Selected screen has been successfully deactivated."),i.onSchedule()()})})},i.scheduleScreen=function(){n.showComponent({component:"dateRangeSelectorComponent",bindings:{startDate:moment().toDate(),maxEndDate:moment().add(2,"weeks").toDate(),minStartDate:moment().toDate()}}).then(function(e){i.schedulePromise=t.scheduleScreen(e.startDate,e.endDate,i.screen.screenId).then(function(){a.freeText("Selected screen has been successfully scheduled."),i.onSchedule()()}).catch(function(e){})})},i.$onInit=function(){}}e.component("attScreenComponent",{templateUrl:"resources/app/components/attentionScreenComponents/attScreenComponent/attScreenComponent.html",controller:t,controllerAs:"vm",bindings:{screen:"<",active:"<",date:"<",onSchedule:"&"}}),t.$inject=["$localStorage","attentionScreenService","customDialogService","customToastService"]}(angular.module("selfcare")),function(e){function t(e,t){function n(){return a.fetchActivePromise=t.fetchActiveScreens(a.startDate.toDate(),a.endDate.toDate()),a.fetchActivePromise.then(function(e){a.activeScreens=e})}var a=this;a.fetchAllScreens=function(e,n){return a.fetchScreensPromise=t.fetchAllScreens(e,n),a.fetchScreensPromise.then(function(e){return a.screens=e.screens,e.count})},a.fetchActiveScreens=n,a.changeDates=function(e){a.disableButtons=!0,e?(a.startDate.add(3,"days"),a.endDate.add(3,"days"),n().then(function(){a.disablePrevious=!1}).catch(function(){a.startDate.subtract(3,"days"),a.endDate.subtract(3,"days")}).finally(function(){delete a.disableButtons})):(a.startDate.subtract(3,"days"),a.endDate.subtract(3,"days"),n().then(function(){moment().startOf("day").isSame(a.startDate)&&(a.disablePrevious=!0)}).catch(function(){a.startDate.add(3,"days"),a.endDate.add(3,"days")}).finally(function(){delete a.disableButtons}))},a.startDate=moment().startOf("day"),a.endDate=moment().startOf("day").add(2,"days"),a.disablePrevious=!0,a.$onInit=function(){n()}}e.component("viewAttScreensComponent",{templateUrl:"resources/app/components/attentionScreenComponents/viewAttScreensComponent/viewAttScreensComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","attentionScreenService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i){function o(){r.imageDimensions={minHeight:300,maxHeight:400,minWidth:900,maxWidth:1200},r.allowedFileExtns=["png","jpg","jpeg"],r.maxFileSize=300}var r=this;r.validateImage=function(){var e=t.checkFileExtentions(r.image,r.allowedFileExtns);r.uploadForm.image.$setValidity("notImage",e),e&&(t.checkImageDimensionsRangeAsync(r.image,r.imageDimensions).then(function(e){r.uploadForm.image.$setValidity("dimensions",e)}),r.uploadForm.image.$setValidity("size",r.image.size<=1024*r.maxFileSize))},r.upload=function(){var t=null;if("service"==r.actionType){var o=e.userApps[r.redirectApp.appid];t=o.umangUrl+"|"+o.appname+"|"+o.appid}var s={title:r.title,description:r.description,buttonText:r.buttonText,actionType:"noAction"==r.actionType?"":r.actionType,actionUrl:t||r.redirectUrl,comment:r.comment,image:r.image};r.uploadPromise=n.uploadAttScreen(s).then(function(e){i.reload(),a.freeText("Attention screen uploaded successfully!")})},r.urlPattern=envVars.urlPattern,r.$onInit=function(){o(),r.allApps=_.map(e.userApps)}}e.component("uploadAttScreenComponent",{templateUrl:"resources/app/components/attentionScreenComponents/uploadAttScreenComponent/uploadAttScreenComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","helperService","attentionScreenService","customToastService","$state"]}(angular.module("selfcare")),function(e){function t(e,t,n,a){function i(){o.fetchDeptPromise=t.fetchAllDept().then(function(e){o.depts=e})}var o=this;o.editDept=function(e){o.editing=!0,o.currentlyEditing=_.cloneDeep(e),angular.element(document.getElementById("directoryView")).scrollTo(0,0,600)},o.deleteDept=function(e){n.confirm("permanently delete <b>"+e.deptName+"</b>",!0).then(function(){e.deletePromise=t.deleteDept(e.deptId).then(function(){a.freeText(e.deptName+" has been successfully deleted!"),_.pull(o.depts,e)})})},o.afterSaveDept=function(e){o.editing=!1,_.pullAllBy(o.depts,[e],"deptId"),o.currentlyEditing=null,_.insertSortedBy(o.depts,e,"deptName"),a.freeText(e.deptName+" has been successfully updated!")},o.onCancelEdit=function(){o.editing=!1,o.currentlyEditing=null},o.$onInit=function(){i()},o.uiCanExit=function(){if(o.editing&&o.editor&&o.editor.isFormDirty&&o.editor.isFormDirty())return n.confirm("cancel editing")}}e.component("viewDirectoryComponent",{templateUrl:"resources/app/components/directoryComponents/viewDirectoryComponent/viewDirectoryComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","directoryService","customDialogService","customToastService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o){function r(e){var t=function(){return l.editMode?(l.onCancel()(),!0):!!e||void o.go("selfcare.directory.view")};return s()?n.confirm("cancel editing").then(t):t()}function s(){return!_.isEqual(l.deptModel,l.deptModelBackup)}var l=this;l.editWorkingHours=function(){n.showComponent({component:"workingHoursComponent",clickOutsideToClose:!1,bindings:{startDay:l.startDay,endDay:l.endDay,startTime:l.startTime,endTime:l.endTime,title:"Working Hours",ok:"Ok",onSubmit:function(e){return l.startDay=e.startDay,l.endDay=e.endDay,l.startTime=e.startTime,l.endTime=e.endTime,a.convertWorkingHours(e.startTime,e.endTime,e.startDay,e.endDay).then(function(e){var t=e.en;return l.deptModel.workingHours=t,t})}}})},l.saveDept=function(){l.editMode?l.savePromise=t.updateDept(l.deptModel).then(function(){l.afterSave()(l.deptModel)}):l.savePromise=t.addNewDept(l.deptModel).then(function(){var e=i.confirm().title("Department Created!").htmlContent("<b>"+l.deptModel.deptName+"</b> department has been created. What would you like to do next?").ok("Add Another Department").cancel("View All Departments");i.show(e).then(function(){l.deptModel={},o.reload("selfcare.directory.createNew")}).catch(function(){l.deptModel={},o.go("selfcare.directory.view")})})},l.cancel=r,l.uiCanExit=r,l.$onInit=function(){l.deptModel=l.deptModel||{},l.deptModelBackup=_.cloneDeep(l.deptModel),l.emailPattern=envVars.emailPattern,l.urlPattern=envVars.urlPattern,l.mutipleHelplinePattern=envVars.mutipleHelplinePattern,l.title=l.editMode?"Edit Department":"Create New Department",l.api={triggerCancel:r,isFormDirty:s}}}e.component("deptEditorComponent",{templateUrl:"resources/app/components/directoryComponents/deptEditorComponent/deptEditorComponent.html",controller:t,controllerAs:"vm",bindings:{deptModel:"<",editMode:"<",afterSave:"&",onCancel:"&",api:"="}}),t.$inject=["$localStorage","directoryService","customDialogService","appServiceProfileService","$mdDialog","$state"]}(angular.module("selfcare")),function(e){function t(e){this.$onInit=function(){}}e.component("designApiComponent",{templateUrl:"resources/app/components/designApiComponent/designApiComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage"]}(angular.module("selfcare")),function(e){function t(e){var t=this;t.$onInit=function(){t.mailTo=encodeURI("mailto:"+envVars.spiceMail+"?Subject=Request for change in UMANG FAQ")}}e.component("umangFaqComponent",{templateUrl:"resources/app/components/umangFaqComponent/umangFaqComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage"]}(angular.module("selfcare")),function(e){function t(e,t,n){function a(e,t){i.startDate=e,i.endDate=t,i.dateSelectorInstance.updateDates(e,t)}var i=this;i.setDateRange=a,i.changeCriteria=function(e){i.selectedCriteria=e},i.criterias=[{text:"Application",value:"app",icon:"smartphone",right:"ratingsApp"},{text:"Department",value:"dept",icon:"apps",right:"ratingsDept"}],i.$onInit=function(){i.dateSelectorInstance=n.createInstance(t,a,!0),i.dateRange="week",_.existsBy(e.userRights,"ratingsApp","rightName")?i.selectedCriteria=_.head(i.criterias):i.selectedCriteria=_.last(i.criterias)}}e.component("ratingAndFeebacksComponent",{templateUrl:"resources/app/components/ratingAndFeebacksComponent/ratingAndFeebacksComponent.html",controller:t,controllerAs:"vm",bindings:{}}),t.$inject=["$localStorage","$scope","dateRangeSelectorService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a){function i(){t.fetchLanguages().then(function(e){l.langsList=e})}function o(){l.paginator&&l.paginator.goToPage(1)}function r(e){var t=new Date(e),n=t.getDate(),a=t.getMonth()+1;return a<=9&&(a="0"+a),n<=9&&(n="0"+n),t.getFullYear()+"-"+a+"-"+n}function s(){switch(l.sortType){case"latestFirst":l.feedbacks=_(l.feedbacks).orderBy(function(e){return moment(e.logdate).valueOf()},["desc"]).value();break;case"oldestFirst":l.feedbacks=_(l.feedbacks).orderBy(function(e){return moment(e.logdate).valueOf()},["asc"]).value()}}var l=this;l.clearFilters=function(){l.appFeedbacksFilters={},o()},l.hasFilters=function(){return""!=_.flatMap(l.appFeedbacksFilters,function(e){return e.toString()}).join("")},l.getResults=function(e,t){var a=r(l.startDate),i=r(l.endDate),o=_.cloneDeep(l.appFeedbacksFilters);return o.startDate=a,o.endDate=i,o.page=e,o.size=t,l.getResultsPromise=n.getAppFeedbacks(o).then(function(e){return l.results=e,e.totalUsers}).then(function(){var o=_.cloneDeep(l.appFeedbacksFilters);return o.sdate=a,o.edate=i,o.page=e,o.pageSize=t,n.getAllAppFeedbacks(o).then(function(e){return console.log("details JSON is : "+JSON.stringify(e.details)),l.feedbacks=e.details,e.totalCount})}),l.getResultsPromise},l.refreshResults=o,l.sortApps=s,l.showProfileInfo=function(e){if(!e.mno)return console.log("feedback.mno is ",e.mno),!1;e.showProfilePromise=n.getProfileInfo(e.mno).then(function(e){a.showComponent({component:"userProfileComponent",bindings:{profile:e}})})},l.appFeedbacksFilters={},l.appAllFeedbacksFilters={},l.filterByList=[{name:"Five Star",value:"5",star:!0},{name:"Four Star",value:"4",star:!0},{name:"Three Star",value:"3",star:!0},{name:"Two Star",value:"2",star:!0},{name:"One Star",value:"1",star:!0},{name:"No rating",value:"6"},{name:"Rating Without Feedback",value:"7"},{name:"Other Feedback",value:"8"},{name:"App store (Apple)",value:"9"},{name:"Play store (Android)",value:"10"},{name:"Window store",value:"11"}],l.opSystemsList=[{name:"All",value:""},{name:"Android",value:"android"},{name:"iOS",value:"ios"},{name:"Windows Phone",value:"wp"},{name:"Website",value:"web"}],l.$onInit=function(){i(),s()},l.$onChanges=function(){o()}}e.component("appFeedbacksComponent",{templateUrl:"resources/app/components/ratingAndFeebacksComponent/appFeedbacksComponent/appFeedbacksComponent.html",controller:t,controllerAs:"vm",bindings:{startDate:"<",endDate:"<"}}),t.$inject=["$localStorage","commonDataService","ratingsService","customDialogService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i,o){function r(e){var t=new Date(e),n=t.getDate(),a=t.getMonth()+1;return a<=9&&(a="0"+a),n<=9&&(n="0"+n),t.getFullYear()+"-"+a+"-"+n}function s(){var e=r(p.startDate),t=r(p.endDate),n=_.cloneDeep(p.deptFeedbacksFilters);return n.startDate=e,n.endDate=t,n.page=u,n.size=g,p.AppFeedbackResults=a.getServiceFeedbacks(n,p.allServices).then(function(e){return p.feedbacks=e.details,e.totalCount}),p.AppFeedbackResults}function l(e){"os"!=e&&"rating"!=e&&"lang"!=e&&"app"!=e||(p.deptFeedbacksFilters.services=""),p.paginator&&p.paginator.goToPage(1)}function c(){t.fetchLanguages().then(function(e){p.langsList=e})}function d(){m(e.userApps),delete p.filters,delete p.category,delete p.hasDeptFilters}function m(t){p.allApps=_(t).orderBy(function(e){return _.toLower(e.appname)},["asc"]).map(_.trimAppDetails).value(),p.allServices=_(e.userServices).filter(function(e){return _.existsBy(t,e.appid,"appid")}).map(_.trimServiceDetails).value()}var p=this;p.clearFilters=function(){p.deptFeedbacksFilters={},d(),l()},p.hasFilters=function(){return""!=_.flatMap(p.deptFeedbacksFilters,function(e){return e.toString()}).join("")},p.refreshResults=l,p.getResults=function(t,n){if(t||(t="1"),n||(n="10"),u=t,g=n,e.stateCentral.length>3&&e.stateCentral.match(/99/g)?p.stateRadio="all":99==e.stateCentral?p.stateRadio="central":p.stateRadio="state",p.deptFeedbacksFilters.services)return s();var i=r(p.startDate),o=r(p.endDate),l=_.cloneDeep(p.deptFeedbacksFilters);return l.startDate=i,l.endDate=o,l.page=t,l.size=n,p.getResultsPromise=a.getDeptFeedbacks(l,p.allApps).then(function(e){return p.feedbacks=e.details,e.totalCount}),p.getResultsPromise},p.filterDepartments=function(){n.showComponent({component:"appsServicesFilterComponent",bindings:{filters:_.cloneDeep(p.filters)}}).then(function(e){delete p.deptFeedbacksFilters.apps,delete p.serviceFeedbacksFilters.services,p.filters=e.filters,p.hasDeptFilters=e.hasFilters,m(e.apps),l()})},p.clearDepartmentsFilter=d,p.showProfileInfo=function(e){if(!e.profileId)return console.log("feedback.profileId is ",e.profileId),!1;e.showProfilePromise=a.getProfileInfo(e.profileId).then(function(e){n.showComponent({component:"userProfileComponent",bindings:{profile:e}})})},p.fetchCategories=function(){p.catagories=e.appCategory,console.log(p.catagories)},p.onAppsDDOpen=function(e){var t,n=[];angular.forEach(p.catagory,function(e,t){n.push(e.categoryId)}),t=n.toString();var a,i=[];angular.forEach(p.state,function(e,t){i.push(e.stateid)}),a=i.toString(),a="all"==p.stateRadio?"32,23,4,29,3,9,5,13,30,18,10,20,8,33,34,28,25,21,22,2,24,16,7,11,1,12,31,37,27,19,36,14,35,15,26,99":"central"==p.stateRadio?"99":a,p.fetchdeptbasedstate=o.fetchdeptbasedstate(a,t).then(function(e){p.allDept=e})},p.servicePost=s,p.stateChange=function(){if(!p.allStates)return t.fetchStates().then(function(t){e.Allstates=t,p.allStates=e.Allstates;var n=e.stateCentral[0].split(","),a=_.map(n,function(e){return{stateid:e}});p.state=_.intersectionBy(t,a,"stateid")})},p.deptFeedbacksFilters={},p.serviceFeedbacksFilters={};var u,g;p.filterByList=[{name:"Five Star",value:"5"},{name:"Four Star",value:"4"},{name:"Three Star",value:"3"},{name:"Two Star",value:"2"},{name:"One Star",value:"1"},{name:"Feedback without Rating",value:"0"},{name:"Rating Without Feedback",value:"11"}],p.opSystemsList=[{name:"Android",value:"android"},{name:"iOS",value:"ios"},{name:"Windows Phone",value:"win"},{name:"Website",value:"web"},{name:"Mobile Web",value:"moweb"}],p.$onInit=function(){c(),m(e.userApps)},p.$onChanges=function(){l()}}e.component("deptFeedbackComponent",{templateUrl:"resources/app/components/ratingAndFeebacksComponent/deptFeedbackComponent/deptFeedbackComponent.html",controller:t,controllerAs:"vm",bindings:{startDate:"<",endDate:"<"}}),t.$inject=["$localStorage","commonDataService","customDialogService","ratingsService","categoriesService","usersService"]}(angular.module("selfcare")),function(e){function t(e){var t=this;t.$onInit=function(){console.log(JSON.stringify(t.profile.userinfo[0].name)),"Not Registered"==t.profile.userinfo[0].name&&(t.profile.userinfo[0].name="NA"),"Not Registered"==t.profile.userinfo[0].email&&(t.profile.userinfo[0].email="NA"),"Not Registered"==t.profile.userinfo[0].addr&&(t.profile.userinfo[0].addr="NA"),"Not Registered"==t.profile.userinfo[0].state&&(t.profile.userinfo[0].state="NA")}}e.component("userProfileComponent",{templateUrl:"resources/app/components/ratingAndFeebacksComponent/userProfileComponent/userProfileComponent.html",controller:t,controllerAs:"vm",bindings:{profile:"<"}}),t.$inject=["$localStorage"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i){function o(e,t){l.startDate=e,l.endDate=t,l.dateSelectorInstance.updateDates(e,t),a.go(".",{startDate:moment(l.startDate).format("DD-MM-YYYY"),endDate:moment(l.endDate).format("DD-MM-YYYY"),currentComponent:l.currentComponent}),s()}function r(){l.selectedIndex=_.findIndex(l.components,{name:l.currentComponent})}function s(){i.pop(),i.push({name:"Analytics ("+moment(l.startDate).format("MMM DD, YYYY")+" to "+moment(l.endDate).format("MMM DD, YYYY")+")"})}var l=this;l.setDateRange=o,l.changeComponent=function(e){l.currentComponent=e,a.go(".",{startDate:moment(l.startDate).format("DD-MM-YYYY"),endDate:moment(l.endDate).format("DD-MM-YYYY"),currentComponent:l.currentComponent,status:""})},l.components=[{name:"dashboard",display:"Resigtration Summary",icon:"assignment_turned_in"},{name:"temporal",display:"Temporal",icon:"timeline"},{name:"demographic",display:"Demographic",icon:"public"},{name:"department",display:"Department",icon:"work"},{name:"gAnalytics",display:"Google Analytics",icon:"insert_chart"}],l.$onInit=function(){l.dateSelectorInstance=t.createInstance(n,o),l.startDate&&l.endDate||(l.dateRange="month"),l.currentComponent&&_.existsBy(l.components,l.currentComponent,"name")||(l.currentComponent="dashboard"),r(),s()},l.uiOnParamsChanged=function(e,t){l.startDate=moment(t.params().startDate,"DD-MM-YYYY").toDate(),l.endDate=moment(t.params().endDate,"DD-MM-YYYY").toDate(),l.currentComponent=t.params().currentComponent,l.dateSelectorInstance.updateDates(l.startDate,l.endDate),r(),s()}}e.component("analyticsParentComponent",{templateUrl:"resources/app/components/analyticsComponents/analyticsParentComponent/analyticsParentComponent.html",controller:t,controllerAs:"vm",bindings:{startDate:"<",endDate:"<",currentComponent:"<",status:"<"}}),t.$inject=["$localStorage","dateRangeSelectorService","$scope","$state","breadCrumbService"]}(angular.module("selfcare")),function(e){function t(e,t){function n(){a.getDataPromise=t.getTemporalData({startDate:a.startDate,endDate:a.endDate}).then(function(e){a.jsons=e.status,a.regModesJson=e.regMode,a.regChannelsJson=e.regChannels,a.modeFlex=a.regModesJson.Aadhaar?"50":"100",a.regAttemptsTotal=_(a.jsons).map("totalUsers").sum()})}var a=this;a.getGraphData=n,a.statuses=[{value:"Successful",display:"Successful",state:"selfcare.analytics({currentComponent : 'temporal', status: 'successful'})",tooltip:"Count of users successfully registered on UMANG for the selected time period"},{value:"Blocked",display:"Blocked",state:"selfcare.analytics({currentComponent : 'temporal', status: 'blocked'})",tooltip:'Count of users marked as "Blocked" in UMANG system for the selected time period'},{value:"Deleted",display:"Deleted",state:"selfcare.analytics({currentComponent : 'temporal', status: 'deleted'})",tooltip:'Count of users marked as "Deleted" in UMANG system for the selected time period'},{value:"Pending",display:"Pending",state:"selfcare.analytics({currentComponent : 'temporal', status: 'pending'})",tooltip:'Count of users marked as "Pending" in UMANG system for the selected time period'}],a.regModes=[{value:"Mobile",display:"Mobile Registration",tooltip:"Count of users who registered on UMANG using Mobile verificiation for the selected time period"},{value:"Aadhaar",display:"Aadhaar Registration",tooltip:"Count of users who registered on UMANG using Aadhar verificiation for the selected time period"}],a.regChannels=[{value:"App",display:"App Registration",tooltip:"Count of users who registered on UMANG using UMANG Mobile app for the selected time period"},{value:"Web",display:"Web Registration",tooltip:"Count of users who registered on UMANG using UMANG web for the selected time period"}],a.$onChanges=function(){n()}}e.component("analyticsDashboardComponent",{templateUrl:"resources/app/components/analyticsComponents/analyticsDashboardComponent/analyticsDashboardComponent.html",controller:t,controllerAs:"vm",bindings:{startDate:"<",endDate:"<"}}),t.$inject=["$localStorage","analyticsUserService"]}(angular.module("selfcare")),function(e){function t(e,t){function n(){a.getDataPromise=t.getTemporalData({startDate:a.startDate,endDate:a.endDate}).then(function(e){a.jsons=e.status,a.status&&_.each(a.jsons,function(e){_.each(e.series,function(e){e.name.toLowerCase()!=a.status&&(e.visible=!1)})})})}var a=this;a.$onChanges=function(){n()}}e.component("analyticsTemporalComponent",{templateUrl:"resources/app/components/analyticsComponents/analyticsTemporalComponent/analyticsTemporalComponent.html",controller:t,controllerAs:"vm",bindings:{startDate:"<",endDate:"<",status:"<"}}),t.$inject=["$localStorage","analyticsUserService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i){function o(){t("gt-sm")?angular.element(document.getElementById("analyticsComponent")).scrollTo(0,0,600):angular.element(document.getElementById("analyticsComponent")).scrollTo(0,document.getElementById("analyticsComponent").scrollHeight,600),"app"==l.graphFor.type&&"temporal"==l.selectedCriteria.value?l.getDataPromise=a.getDeptData(l.graphFor.obj,l.startDate,l.endDate).then(function(e){l.json=e.json,l.graphForItems=[],l.graphForItems.push({name:l.selectedApp.appname,type:"app",obj:l.selectedApp}),_.each(e.services,function(e){l.graphForItems.push({name:e.name,type:"service",obj:e})}),l.graphFor=_.head(l.graphForItems)}):"service"==l.graphFor.type&&"temporal"==l.selectedCriteria.value?l.getDataPromise=a.getServiceData(l.graphFor.obj,l.startDate,l.endDate).then(function(e){l.json=e}):r()}function r(){l.sub={},delete l.getSubDataPromise,l.getDataPromise=a.getDeptCriteriaData({criteria:l.selectedCriteria.value,startDate:l.startDate,endDate:l.endDate,id:"service"==l.graphFor.type?l.graphFor.obj.id:l.graphFor.obj.appid},"service"==l.graphFor.type).then(function(e){l.json=e})}function s(e){l.sub={},angular.element(document.getElementById("analyticsComponent")).scrollTo(0,200,600),l.getSubDataPromise=a.getDeptSubCriteriaData({subCriteria:e,criteria:l.selectedCriteria.value,startDate:l.startDate,endDate:l.endDate,id:"service"==l.graphFor.type?l.graphFor.obj.id:l.graphFor.obj.appid},"service"==l.graphFor.type).then(function(e){l.sub.ageJson=e.ageJson,l.sub.genderJson=e.genderJson,l.sub.qualJson=e.qualJson,l.sub.occupJson=e.occupJson,l.sub.districtJson=e.districtJson,angular.element(document.getElementById("analyticsComponent")).scrollTo(0,500,600)})}var l=this;l.selectApp=function(e){l.selectedCriteria=_.head(l.criterias),l.sub={},l.onSeriesClick=null,l.selectedApp=e,l.graphForItems=[],l.graphForItems.push({name:l.selectedApp.appname,type:"app",obj:l.selectedApp}),l.graphFor=_.head(l.graphForItems),o()},l.showFilterComp=function(){i.showComponent({component:"appsServicesFilterComponent",bindings:{showMinistries:!0,filters:_.cloneDeep(l.filters)},clickOutsideToClose:!0}).then(function(e){l.filters=e.filters,l.allApps=e.apps,l.hasFilters=e.hasFilters})},l.clearFilters=function(){l.allApps=_.map(e.userApps,_.identity),l.hasFilters=!1,delete l.filters},l.getData=o,l.changeCriteria=function(e){"lang"==e.value||"temporal"==e.value?l.onSeriesClick=null:l.onSeriesClick=s,l.selectedCriteria=e,o()},l.criterias=[{text:"Temporal",value:"temporal",icon:"timeline"},{text:"Gender",value:"gender",icon:"wc"},{text:"Age Bucket",value:"age",icon:"group"},{text:"Qualification",value:"qual",icon:"school"},{text:"Occupation",value:"occup",icon:"business_center"},{text:"Language",value:"lang",icon:"translate"},{text:"Location",value:"location",icon:"location_city"}],l.$onInit=function(){l.allApps=_.map(e.userApps,_.identity),l.selectedCriteria=_.head(l.criterias)},l.$onChanges=function(){l.selectedApp&&o()}}e.component("analyticsDeptsComponent",{templateUrl:"resources/app/components/analyticsComponents/analyticsDeptsComponent/analyticsDeptsComponent.html",controller:t,controllerAs:"vm",bindings:{startDate:"<",endDate:"<"}}),t.$inject=["$localStorage","$mdMedia","$mdDialog","analyticsUserService","customDialogService"]}(angular.module("selfcare")),function(e){function t(e,t){function n(){i.sub={},delete i.getSubDataPromise,i.getDataPromise=t.getCriteriaData({criteria:i.selectedCriteria.value,startDate:i.startDate,endDate:i.endDate}).then(function(e){i.json=e})}function a(e){i.sub={},angular.element(document.getElementById("analyticsComponent")).scrollTo(0,200,600),i.getSubDataPromise=t.getSubCriteriaData({subCriteria:e,criteria:i.selectedCriteria.value,startDate:i.startDate,endDate:i.endDate}).then(function(e){i.sub.ageJson=e.ageJson,i.sub.genderJson=e.genderJson,i.sub.qualJson=e.qualJson,i.sub.occupJson=e.occupJson,i.sub.districtJson=e.districtJson,angular.element(document.getElementById("analyticsComponent")).scrollTo(0,500,600)})}var i=this;i.changeCriteria=function(e){"lang"==e.value?i.onSeriesClick=null:i.onSeriesClick=a,i.selectedCriteria=e,n()},i.onSeriesClick=a,i.criterias=[{text:"Gender",value:"gender",icon:"wc"},{text:"Age Bucket",value:"age",icon:"group"},{text:"Qualification",value:"qual",icon:"school"},{text:"Occupation",value:"occup",icon:"business_center"},{text:"Language",value:"lang",icon:"translate"},{text:"Location",value:"location",icon:"location_city"}],i.$onChanges=function(){i.selectedCriteria=i.selectedCriteria||_.head(i.criterias),n()}}e.component("analyticsDemogComponent",{templateUrl:"resources/app/components/analyticsComponents/analyticsDemogComponent/analyticsDemogComponent.html",controller:t,controllerAs:"vm",bindings:{startDate:"<",endDate:"<"}}),t.$inject=["$localStorage","analyticsUserService"]}(angular.module("selfcare")),function(e){function t(e,t,n,a){var i=this;i.fetchStates=function(){if(!i.filters.master.allStates)return t.fetchStates().then(function(e){i.filters.master.allStates=e})},i.fetchCategories=function(){if(!i.filters.master.allCategories)return n.fetchCategories().then(function(e){i.filters.master.allCategories=e})},i.submit=function(){var t=_.map(e.userApps,_.identity),n=!1;"all"!=i.filters.selected.state&&(n=!0,t=_.filter(t,function(e){return e.state==i.filters.selected.state})),i.filters.selected.category&&(n=!0,t=_.filter(t,function(e){return _.exists(_.map(e.categories,"categoryId"),i.filters.selected.category)})),a.hide({filters:i.filters,apps:t,hasFilters:n})},i.$onInit=function(){i.filters=i.filters||{master:{},selected:{stateRadio:"all",state:"all"}}}}e.component("analyticsfilterAppsComponent",{templateUrl:"resources/app/components/analyticsComponents/analyticsfilterAppsComponent/analyticsfilterAppsComponent.html",controller:t,controllerAs:"vm",bindings:{filters:"<"}}),t.$inject=["$localStorage","commonDataService","categoriesService","$mdDialog"]}(angular.module("selfcare")),function(e){function t(e,t,n,a,i){function o(){delete r.subJson;var e={startDate:r.startDate,endDate:r.endDate,viewId:r.selectedView.value};switch(r.selectedCriteria.value){case"device":r.getDataPromise=a.getDeviceData(e).then(function(e){r.deviceTable=e});break;case"screen":r.getDataPromise=a.getScreenData(e).then(function(e){r.screenTable=e});break;case"state":r.getDataPromise=a.getStatesData(e).then(function(e){r.json=e})}}var r=this;r.loginGoogle=function(){r.loginToGooglePromise=n.loginGA().then(function(){r.isLoggedInGoogle=!0,o()}).catch(function(e){i.freeText(e,void 0,!0)})},r.changeView=function(e){r.selectedView=e,o()},r.changeCriteria=function(e){r.selectedCriteria=e,o()},r.$onChanges=function(){r.isLoggedInGoogle&&o()},r.getCityData=function(e){delete r.subJson;var t={startDate:r.startDate,endDate:r.endDate,viewId:r.selectedView.value,state:e};angular.element(document.getElementById("analyticsComponent")).scrollTo(0,200,600),r.getSubDataPromise=a.getCityData(t).then(function(e){r.subJson=e,angular.element(document.getElementById("analyticsComponent")).scrollTo(0,500,600)})},r.criterias=[{text:"Location",value:"state",icon:"location_city"},{text:"Device",value:"device",icon:"devices_other"},{text:"Screen",value:"screen",icon:"insert_drive_file"}],r.views=[{text:"Android Analytics",value:envVars.ga.androidViewId,icon:"fa-android"},{text:"iOS Analytics",value:envVars.ga.iOSViewId,icon:"fa-apple"},{text:"Windows Phone Analytics",value:envVars.ga.wpViewId,icon:"fa-windows"}],r.$onInit=function(){r.selectedCriteria=_.head(r.criterias),r.selectedView=_.head(r.views),e.$on("logoutGA",function(){r.isLoggedInGoogle=!1,i.freeText("Your account is not authorized. Please login with a valid Google account.",void 0,!0)}),r.checkingGAStatusPromise=n.isLoggedIn().then(function(e){r.isLoggedInGoogle=e,e&&o()})}}e.component("gAnalyticsComponent",{templateUrl:"resources/app/components/analyticsComponents/gAnalyticsComponent/gAnalyticsComponent.html",controller:t,controllerAs:"vm",bindings:{startDate:"<",endDate:"<"}}),t.$inject=["$rootScope","$localStorage","gaHttpService","googleAnalyticsDataService","customToastService"]}(angular.module("selfcare")),function(e){function t(e){var t=this;t.exportToCSV=function(){var n="";n+=t.table.columns.join(","),n+="\n",_.each(t.table.rows,function(e){n+=e.join(","),n+="\n"}),t.exportName=t.exportName||"export",e.downloadFile(n,t.exportName+".csv")}}e.component("analyticsTableComponent",{templateUrl:"resources/app/components/analyticsComponents/analyticsTableComponent/analyticsTableComponent.html",controller:t,controllerAs:"vm",bindings:{table:"<",export:"<",exportName:"@"}}),t.$inject=["helperService"]}(angular.module("selfcare"));